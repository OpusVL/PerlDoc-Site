<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="perl5140delta - perldoc.perl.org">
    <link rel="icon" href="/public/img/favicon.ico">
    <title>perl5140delta - perldoc.perl.org</title>
    <link href="/public/css/main.min.css" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Lato:400,100,300,700,900' rel='stylesheet' type='text/css'>
    <script>
            window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
            ga('create', 'UA-1892152-2', 'auto');  // JJ's account
            ga('create', 'UA-50555-3', 'auto', 'perlOrg');   // perl.org account
            ga('require', 'outboundLinkTracker', {
              events: ['click', 'auxclick', 'contextmenu'],
            });
            ga('require', 'maxScrollTracker');
            ga('send', 'pageview');
            ga('perlOrg.send', 'pageview');
    </script>
    <script async src="https://www.google-analytics.com/analytics.js"></script>
    <script async src="/public/js/tracking.min.js"></script>
  </head>
  <body class="body container-fluid ">
    <div class="wrapper">
        <nav class="navbar navbar-expand-md navbar-dark bg-primary bg-perl fixed-top justify-content-between">
          <a class="navbar-brand" href="/">
            <object class="logo" data="/public/img/logo_perl_doc.svg" type="image/svg+xml" name="Perl Documentation Logo">Perl Documentation Logo</object>
          </a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div id="navbar" class="collapse navbar-collapse justify-content-end">
            <ul class="nav navbar-nav navbar-right">
              <li class="nav-item dropdown">
                <a id="navbarDropdown" href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Perl versions</a>
                <div class="dropdown-menu" id="dropdown-menu-links" aria-labelledby="navbarDropdown">
                </div>
              </li>
              <li class="nav-item dropdown">
                <a id="navbarDropdown1" href="#" class="dropdown-toggle nav-link" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Manuals</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown1">
                  <a class="dropdown-item" href="/5.24.2/index-overview.html">Overview</a>
                  <a class="dropdown-item" href="/5.24.2/index-tutorials.html">Tutorials</a>
                  <a class="dropdown-item" href="/5.24.2/index-faq.html">FAQs</a>
                  <a class="dropdown-item" href="/5.24.2/index-history.html">History / Changes</a>
                  <a class="dropdown-item" href="/5.24.2/index-licence.html">License</a>
                  <a class="dropdown-item" href="/5.24.2/index-language.html">Language</a>
                  <a class="dropdown-item" href="/5.24.2/index-functions.html">Functions</a>
                  <a class="dropdown-item" href="/5.24.2/perlop.html">Operators</a>
                  <a class="dropdown-item" href="/5.24.2/perlvar.html">Special Variables</a>
                  <a class="dropdown-item" href="/5.24.2/index-pragmas.html">Pragmas</a>
                  <a class="dropdown-item" href="/5.24.2/index-utilities.html">Utilities</a>
                  <a class="dropdown-item" href="/5.24.2/index-internals.html">Internals</a>
                  <a class="dropdown-item" href="/5.24.2/index-platforms.html">Platform Specific</a>
                </div>
              </li>
              <li class="nav-item dropdown">
                <a id="navbarDropdown3" href="#" class="nav-link dropdown-toggle " data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Modules</a>
                <div aria-labelledby="navbarDropdown3" class="dropdown-menu letters-wrap">
                  <a class="dropdown-item" href="/5.24.2/index-functions.html">A-Z</a>
                  <a class="dropdown-item" href="/5.24.2/index-functions-by-cat.html">By Category</a>
                  <div class="dropdown-divider"></div>
                  <div class="letter-container">
                    <a class="dropdown-item letters" href="/5.24.2/index-modules-A.html">A</a>
                    <a class="dropdown-item letters" href="/5.24.2/index-modules-B.html">B</a>
                    <a class="dropdown-item letters" href="/5.24.2/index-modules-C.html">C</a>
                    <a class="dropdown-item letters" href="/5.24.2/index-modules-D.html">D</a>
                    <a class="dropdown-item letters" href="/5.24.2/index-modules-E.html">E</a>
                    <a class="dropdown-item letters" href="/5.24.2/index-modules-F.html">F</a>
                    <a class="dropdown-item letters" href="/5.24.2/index-modules-G.html">G</a>
                    <a class="dropdown-item letters" href="/5.24.2/index-modules-H.html">H</a>
                    <a class="dropdown-item letters" href="/5.24.2/index-modules-I.html">I</a>
                    <a class="dropdown-item letters" href="/5.24.2/index-modules-J.html">J</a>
                    <a class="dropdown-item letters" href="/5.24.2/index-modules-L.html">L</a>
                    <a class="dropdown-item letters" href="/5.24.2/index-modules-M.html">M</a>
                    <a class="dropdown-item letters" href="/5.24.2/index-modules-N.html">N</a>
                    <a class="dropdown-item letters" href="/5.24.2/index-modules-O.html">O</a>
                    <a class="dropdown-item letters" href="/5.24.2/index-modules-P.html">P</a>
                    <a class="dropdown-item letters" href="/5.24.2/index-modules-S.html">S</a>
                    <a class="dropdown-item letters" href="/5.24.2/index-modules-T.html">T</a>
                    <a class="dropdown-item letters" href="/5.24.2/index-modules-U.html">U</a>
                    <a class="dropdown-item letters" href="/5.24.2/index-modules-X.html">X</a>
                    </div>
                </div>
              </li>
            </ul>
          </div>
          <!--/.nav-collapse -->
        </nav>

      <main class="row main-content pb-5 pt-5">
        <div class="col-sm-8 offset-sm-2">
          <div class="row">
            <div class="col-sm-12">
                <div id="breadcrumbs">
                    
    <a href="index.html">Home</a>&nbsp; &gt;
    
      
        <a href="index-history.html">History / Changes</a> &gt;
      
    
    perl5140delta
  

                </div>
            </div>
          </div>
          <div class="row">
              <article class="col-sm-12 content">
                <div class="documentation-wrapper">
                  <div id="perl_version">
                    <h1 class='page-title'> Perl 5 version 24.2 documentation</h1>
                  </div>
                  <h1>perl5140delta</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><li><a href="#Notice">Notice</a></li><li><a href="#Core-Enhancements">Core Enhancements</a></li><ul><li><a href="#Unicode">Unicode</a></li><li><a href="#Regular-Expressions">Regular Expressions</a></li><li><a href="#Syntactical-Enhancements">Syntactical Enhancements</a></li><li><a href="#Exception-Handling">Exception Handling</a></li><li><a href="#Other-Enhancements">Other Enhancements</a></li><li><a href="#New-C-APIs">New C APIs</a></li></ul><li><a href="#Security">Security</a></li><ul><li><a href="#User-defined-regular-expression-properties">User-defined regular expression properties</a></li></ul><li><a href="#Incompatible-Changes">Incompatible Changes</a></li><ul><li><a href="#Regular-Expressions-and-String-Escapes">Regular Expressions and String Escapes</a></li><li><a href="#Stashes-and-Package-Variables">Stashes and Package Variables</a></li><li><a href="#Changes-to-Syntax-or-to-Perl-Operators">Changes to Syntax or to Perl Operators</a></li><li><a href="#Threads-and-Processes">Threads and Processes</a></li><li><a href="#Configuration">Configuration</a></li></ul><li><a href="#Deprecations">Deprecations</a></li><ul><li><a href="#Omitting-a-space-between-a-regular-expression-and-subsequent-word">Omitting a space between a regular expression and subsequent word</a></li><li><a href="#%5cc_X_">\c_X_</a></li><li><a href="#%22%5cb%7b%22-and-%22%5cB%7b%22">"\b{" and "\B{"</a></li><li><a href="#Perl-4-era-.pl-libraries">Perl 4-era .pl libraries</a></li><li><a href="#List-assignment-to-%24%5b">List assignment to $[</a></li><li><a href="#Use-of-qw(...)-as-parentheses">Use of qw(...) as parentheses</a></li><li><a href="#%5cN%7bBELL%7d">\N{BELL}</a></li><li><a href="#%3fPATTERN%3f">?PATTERN?</a></li><li><a href="#Tie-functions-on-scalars-holding-typeglobs">Tie functions on scalars holding typeglobs</a></li><li><a href="#User-defined-case-mapping">User-defined case-mapping</a></li><li><a href="#Deprecated-modules">Deprecated modules</a></li></ul><li><a href="#Performance-Enhancements">Performance Enhancements</a></li><ul><li><a href="#%22Safe-signals%22-optimisation">"Safe signals" optimisation</a></li><li><a href="#Optimisation-of-shift()-and-pop()-calls-without-arguments">Optimisation of shift() and pop() calls without arguments</a></li><li><a href="#Optimisation-of-regexp-engine-string-comparison-work">Optimisation of regexp engine string comparison work</a></li><li><a href="#Regular-expression-compilation-speed-up">Regular expression compilation speed-up</a></li><li><a href="#String-appending-is-100-times-faster">String appending is 100 times faster</a></li><li><a href="#Eliminate-PL_*-accessor-functions-under-ithreads">Eliminate PL_* accessor functions under ithreads</a></li><li><a href="#Freeing-weak-references">Freeing weak references</a></li><li><a href="#Lexical-array-and-hash-assignments">Lexical array and hash assignments</a></li><li><a href="#%40_-uses-less-memory">@_ uses less memory</a></li><li><a href="#Size-optimisations-to-SV-and-HV-structures">Size optimisations to SV and HV structures</a></li><li><a href="#Memory-consumption-improvements-to-Exporter">Memory consumption improvements to Exporter</a></li><li><a href="#Memory-savings-for-weak-references">Memory savings for weak references</a></li><li><a href="#%25%2b-and-%25--use-less-memory">%+ and %- use less memory</a></li><li><a href="#Multiple-small-improvements-to-threads">Multiple small improvements to threads</a></li><li><a href="#Adjacent-pairs-of-nextstate-opcodes-are-now-optimized-away">Adjacent pairs of nextstate opcodes are now optimized away</a></li></ul><li><a href="#Modules-and-Pragmata">Modules and Pragmata</a></li><ul><li><a href="#New-Modules-and-Pragmata">New Modules and Pragmata</a></li><li><a href="#Updated-Modules-and-Pragma">Updated Modules and Pragma</a></li><li><a href="#Removed-Modules-and-Pragmata">Removed Modules and Pragmata</a></li></ul><li><a href="#Documentation">Documentation</a></li><ul><li><a href="#New-Documentation">New Documentation</a></li><li><a href="#Changes-to-Existing-Documentation">Changes to Existing Documentation</a></li></ul><li><a href="#Diagnostics">Diagnostics</a></li><ul><li><a href="#New-Diagnostics">New Diagnostics</a></li><li><a href="#Changes-to-Existing-Diagnostics">Changes to Existing Diagnostics</a></li></ul><li><a href="#Utility-Changes">Utility Changes</a></li><li><a href="#Configuration-and-Compilation">Configuration and Compilation</a></li><li><a href="#Platform-Support">Platform Support</a></li><ul><li><a href="#New-Platforms">New Platforms</a></li><li><a href="#Discontinued-Platforms">Discontinued Platforms</a></li><li><a href="#Platform-Specific-Notes">Platform-Specific Notes</a></li></ul><li><a href="#Internal-Changes">Internal Changes</a></li><ul><li><a href="#New-APIs">New APIs</a></li><li><a href="#C-API-Changes">C API Changes</a></li><li><a href="#Deprecated-C-APIs">Deprecated C APIs</a></li><li><a href="#Other-Internal-Changes">Other Internal Changes</a></li></ul><li><a href="#Selected-Bug-Fixes">Selected Bug Fixes</a></li><ul><li><a href="#I%2fO">I/O</a></li><li><a href="#Regular-Expression-Bug-Fixes">Regular Expression Bug Fixes</a></li><li><a href="#Syntax%2fParsing-Bugs">Syntax/Parsing Bugs</a></li><li><a href="#Stashes%2c-Globs-and-Method-Lookup">Stashes, Globs and Method Lookup</a></li><li><a href="#Unicode">Unicode</a></li><li><a href="#Ties%2c-Overloading-and-Other-Magic">Ties, Overloading and Other Magic</a></li><li><a href="#The-Debugger">The Debugger</a></li><li><a href="#Threads">Threads</a></li><li><a href="#Scoping-and-Subroutines">Scoping and Subroutines</a></li><li><a href="#Signals">Signals</a></li><li><a href="#Miscellaneous-Memory-Leaks">Miscellaneous Memory Leaks</a></li><li><a href="#Memory-Corruption-and-Crashes">Memory Corruption and Crashes</a></li><li><a href="#Fixes-to-Various-Perl-Operators">Fixes to Various Perl Operators</a></li><li><a href="#Bugs-Relating-to-the-C-API">Bugs Relating to the C API</a></li></ul><li><a href="#Known-Problems">Known Problems</a></li><li><a href="#Errata">Errata</a></li><ul><li><a href="#keys()%2c-values()%2c-and-each()-work-on-arrays">keys(), values(), and each() work on arrays</a></li><li><a href="#split()-and-%40_">split() and @_</a></li></ul><li><a href="#Obituary">Obituary</a></li><li><a href="#Acknowledgements">Acknowledgements</a></li><li><a href="#Reporting-Bugs">Reporting Bugs</a></li><li><a href="#SEE-ALSO">SEE ALSO</a></li></ul><a id="NAME"></a><h2 class='h2' >NAME</h2>
<p>perl5140delta - what is new for perl v5.14.0</p>
<a id="DESCRIPTION"></a><h2 class='h2' >DESCRIPTION</h2>
<p>This document describes differences between the 5.12.0 release and
the 5.14.0 release.</p>
<p>If you are upgrading from an earlier release such as 5.10.0, first read
<a href="perl5120delta.html">perl5120delta</a>, which describes differences between 5.10.0 and
5.12.0.</p>
<p>Some of the bug fixes in this release have been backported to subsequent
releases of 5.12.x.  Those are indicated with the 5.12.x version in
parentheses.</p>
<a id="Notice"></a><h2 class='h2' >Notice</h2>
<p>As described in <a href="perlpolicy.html">perlpolicy</a>, the release of Perl 5.14.0 marks the
official end of support for Perl 5.10.  Users of Perl 5.10 or earlier
should consider upgrading to a more recent release of Perl.</p>
<a id="Core-Enhancements"></a><h2 class='h2' >Core Enhancements</h2>
<a id="Unicode"></a><h3 class='h3' >Unicode</h3>
<a id="Unicode-Version-6.0-is-now-supported-(mostly)"></a><h4 class='h4' >Unicode Version 6.0 is now supported (mostly)</h4>
<p>Perl comes with the Unicode 6.0 data base updated with
<a href="http://www.unicode.org/versions/corrigendum8.html">Corrigendum #8</a>,
with one exception noted below.
See <a href="http://unicode.org/versions/Unicode6.0.0/">http://unicode.org/versions/Unicode6.0.0/</a> for details on the new
release.  Perl does not support any Unicode provisional properties,
including the new ones for this release.</p>
<p>Unicode 6.0 has chosen to use the name <pre>
<span class="w">BELL</span></code>
 for the character at U+1F514,
which is a symbol that looks like a bell, and is used in Japanese cell
phones.  This conflicts with the long-standing Perl usage of having
<pre>
<span class="w">BELL</span></code>
 mean the ASCII <pre>
<span class="w">BEL</span></code>
 character, U+0007.  In Perl 5.14,
<pre>
\<span class="i">N</span><span class="s">{</span><span class="w">BELL</span><span class="s">}</span></code>
 continues to mean U+0007, but its use generates a
deprecation warning message unless such warnings are turned off.  The
new name for U+0007 in Perl is <pre>
<span class="w">ALERT</span></code>
, which corresponds nicely
with the existing shorthand sequence for it, <pre>
<span class="q">&quot;\a&quot;</span></code>
.  <pre>
\<span class="i">N</span><span class="s">{</span><span class="w">BEL</span><span class="s">}</span></code>

means U+0007, with no warning given.  The character at U+1F514 has no
name in 5.14, but can be referred to by <code class="inline">\N{U+1F514}</code>. 
In Perl 5.16, <pre>
\<span class="i">N</span><span class="s">{</span><span class="w">BELL</span><span class="s">}</span></code>
 will refer to U+1F514; all code
that uses <pre>
\<span class="i">N</span><span class="s">{</span><span class="w">BELL</span><span class="s">}</span></code>
 should be converted to use <pre>
\<span class="i">N</span><span class="s">{</span><span class="w">ALERT</span><span class="s">}</span></code>
,
<pre>
\<span class="i">N</span><span class="s">{</span><span class="w">BEL</span><span class="s">}</span></code>
, or <pre>
<span class="q">&quot;\a&quot;</span></code>
 before upgrading.</p>
<a id="Full-functionality-for-use-feature-'unicode_strings'"></a><h4 class='h4' >Full functionality for <pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">feature</span> <span class="q">&#39;unicode_strings&#39;</span></code>
</h4>
<p>This release provides full functionality for <pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">feature</span>
<span class="q">&#39;unicode_strings&#39;</span></code>
.  Under its scope, all string operations executed and
regular expressions compiled (even if executed outside its scope) have
Unicode semantics.  See <a href="feature.html#the-'unicode_strings'-feature">the 'unicode_strings' feature in feature</a>.
However, see <a href="#Inverted-bracketed-character-classes-and-multi-character-folds">Inverted bracketed character classes and multi-character folds</a>,
below.</p>
<p>This feature avoids most forms of the "Unicode Bug" (see
<a href="perlunicode.html#The-%22Unicode-Bug%22">The Unicode Bug in perlunicode</a> for details).  If there is any
possibility that your code will process Unicode strings, you are
<i>strongly</i> encouraged to use this subpragma to avoid nasty surprises.</p>
<a id="%5cN%7b_NAME_%7d-and-charnames-enhancements"></a><h4 class='h4' ><code class="inline">\N{<i>NAME</i>}</code> and <pre>
<span class="w">charnames</span></code>
 enhancements</h4>
<ul>
<li>
<p><code class="inline">\N{<i>NAME</i>}</code> and <pre>
<span class="w">charnames::vianame</span></code>
 now know about the abbreviated
character names listed by Unicode, such as NBSP, SHY, LRO, ZWJ, etc.; all
customary abbreviations for the C0 and C1 control characters (such as
ACK, BEL, CAN, etc.); and a few new variants of some C1 full names that
are in common usage.</p>
</li>
<li>
<p>Unicode has several <i>named character sequences</i>, in which particular sequences
of code points are given names.  <code class="inline">\N{<i>NAME</i>}</code> now recognizes these.</p>
</li>
<li>
<p><code class="inline">\N{<i>NAME</i>}</code>, <pre>
<span class="w">charnames::vianame</span></code>
, and <pre>
<span class="w">charnames::viacode</span></code>

now know about every character in Unicode.  In earlier releases of
Perl, they didn't know about the Hangul syllables nor several
CJK (Chinese/Japanese/Korean) characters.</p>
</li>
<li>
<p>It is now possible to override Perl's abbreviations with your own custom aliases.</p>
</li>
<li>
<p>You can now create a custom alias of the ordinal of a
character, known by <code class="inline">\N{<i>NAME</i>}</code>, <pre>
<span class="i">charnames::vianame</span><span class="s">(</span><span class="s">)</span></code>
, and
<pre>
<span class="i">charnames::viacode</span><span class="s">(</span><span class="s">)</span></code>
.  Previously, aliases had to be to official
Unicode character names.  This made it impossible to create an alias for
unnamed code points, such as those reserved for private
use.</p>
</li>
<li>
<p>The new function charnames::string_vianame() is a run-time version
of <code class="inline">\N{<i>NAME</i>}}</code>, returning the string of characters whose Unicode
name is its parameter.  It can handle Unicode named character
sequences, whereas the pre-existing charnames::vianame() cannot,
as the latter returns a single code point.</p>
</li>
</ul>
<p>See <a href="charnames.html">charnames</a> for details on all these changes.</p>
<a id="New-warnings-categories-for-problematic-(non-)Unicode-code-points."></a><h4 class='h4' >New warnings categories for problematic (non-)Unicode code points.</h4>
<p>Three new warnings subcategories of "utf8" have been added.  These
allow you to turn off some "utf8" warnings, while allowing
other warnings to remain on.  The three categories are:
<pre>
<span class="w">surrogate</span></code>
 when UTF-16 surrogates are encountered;
<pre>
<span class="w">nonchar</span></code>
 when Unicode non-character code points are encountered;
and <pre>
<span class="w">non_unicode</span></code>
 when code points above the legal Unicode
maximum of 0x10FFFF are encountered.</p>
<a id="Any-unsigned-value-can-be-encoded-as-a-character"></a><h4 class='h4' >Any unsigned value can be encoded as a character</h4>
<p>With this release, Perl is adopting a model that any unsigned value
can be treated as a code point and encoded internally (as utf8)
without warnings, not just the code points that are legal in Unicode.
However, unless utf8 or the corresponding sub-category (see previous
item) of lexical warnings have been explicitly turned off, outputting
or executing a Unicode-defined operation such as upper-casing
on such a code point generates a warning.  Attempting to input these
using strict rules (such as with the <pre>
<span class="j">:</span><span class="i">encoding</span><span class="s">(</span><span class="w">UTF</span>-<span class="n">8</span><span class="s">)</span></code>
 layer)
will continue to fail.  Prior to this release, handling was
inconsistent and in places, incorrect.</p>
<p>Unicode non-characters, some of which previously were erroneously
considered illegal in places by Perl, contrary to the Unicode Standard,
are now always legal internally.  Inputting or outputting them 
works the same as with the non-legal Unicode code points, because the Unicode
Standard says they are (only) illegal for "open interchange".</p>
<a id="Unicode-database-files-not-installed"></a><h4 class='h4' >Unicode database files not installed</h4>
<p>The Unicode database files are no longer installed with Perl.  This
doesn't affect any functionality in Perl and saves significant disk
space.  If you need these files, you can download them from
<a href="http://www.unicode.org/Public/zipped/6.0.0/">http://www.unicode.org/Public/zipped/6.0.0/</a>.</p>
<a id="Regular-Expressions"></a><h3 class='h3' >Regular Expressions</h3>
<a id="(%3f%5e...)-construct-signifies-default-modifiers"></a><h4 class='h4' ><code class="inline">(?^...)</code> construct signifies default modifiers</h4>
<p>An ASCII caret <pre>
<span class="q">&quot;^&quot;</span></code>
 immediately following a <pre>
<span class="q">&quot;(?&quot;</span></code>
 in a regular
expression now means that the subexpression does not inherit surrounding
modifiers such as <code class="inline">/i</code>, but reverts to the Perl defaults.  Any modifiers
following the caret override the defaults.</p>
<p>Stringification of regular expressions now uses this notation.  
For example, <code class="inline"><a class="l_k" href="functions/qr.html">qr/hlagh/i</a></code> would previously be stringified as
<code class="inline">(?i-xsm:hlagh)</code>, but now it's stringified as <code class="inline">(?^i:hlagh)</code>.</p>
<p>The main purpose of this change is to allow tests that rely on the
stringification <i>not</i> to have to change whenever new modifiers are added.
See <a href="perlre.html#Extended-Patterns">Extended Patterns in perlre</a>.</p>
<p>This change is likely to break code that compares stringified regular
expressions with fixed strings containing <code class="inline">?-xism</code>.</p>
<a id="%2fd%2c-%2fl%2c-%2fu%2c-and-%2fa-modifiers"></a><h4 class='h4' ><code class="inline">/d</code>, <code class="inline">/l</code>, <code class="inline">/u</code>, and <code class="inline">/a</code> modifiers</h4>
<p>Four new regular expression modifiers have been added.  These are mutually
exclusive: one only can be turned on at a time.</p>
<ul>
<li>
<p>The <code class="inline">/l</code> modifier says to compile the regular expression as if it were
in the scope of <pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">locale</span></code>
, even if it is not.</p>
</li>
<li>
<p>The <code class="inline">/u</code> modifier says to compile the regular expression as if it were
in the scope of a <pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">feature</span> <span class="q">&#39;unicode_strings&#39;</span></code>
 pragma.</p>
</li>
<li>
<p>The <code class="inline">/d</code> (default) modifier is used to override any <pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">locale</span></code>
 and
<pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">feature</span> <span class="q">&#39;unicode_strings&#39;</span></code>
 pragmas in effect at the time
of compiling the regular expression.</p>
</li>
<li>
<p>The <code class="inline">/a</code> regular expression modifier restricts <code class="inline">\s</code>, <pre>
\<span class="w">d</span></code>
 and <pre>
\<span class="w">w</span></code>
 and
the POSIX (<code class="inline">[[:posix:]]</code>) character classes to the ASCII range.  Their
complements and <pre>
\<span class="w">b</span></code>
 and <pre>
\<span class="w">B</span></code>
 are correspondingly
affected.  Otherwise, <code class="inline">/a</code> behaves like the <code class="inline">/u</code> modifier, in that
case-insensitive matching uses Unicode semantics.</p>
<p>If the <code class="inline">/a</code> modifier is repeated, then additionally in case-insensitive
matching, no ASCII character can match a non-ASCII character.
For example,</p>
<div class="verbatim"><ol><li>    "k"     =~ /\N{KELVIN SIGN}/ai</li><li>    "\xDF" =~ /ss/ai</li></ol></div><p>match but</p>
<div class="verbatim"><ol><li>    "k"    =~ /\N{KELVIN SIGN}/aai</li><li>    "\xDF" =~ /ss/aai</li></ol></div><p>do not match.</p>
</li>
</ul>
<p>See <a href="perlre.html#Modifiers">Modifiers in perlre</a> for more detail.</p>
<a id="Non-destructive-substitution"></a><h4 class='h4' >Non-destructive substitution</h4>
<p>The substitution (<code class="inline"><a class="l_k" href="functions/s.html">s///</a></code>) and transliteration
(<code class="inline"><a class="l_k" href="functions/y.html">y///</a></code>) operators now support an <code class="inline">/r</code> option that
copies the input variable, carries out the substitution on
the copy, and returns the result.  The original remains unmodified.</p>
<pre>
  <a class="l_k" href="functions/my.html">my</a> <span class="i">$old</span> = <span class="q">&quot;cat&quot;</span><span class="sc">;</span>
  <a class="l_k" href="functions/my.html">my</a> <span class="i">$new</span> = <span class="i">$old</span> =~ <span class="q">s/cat/dog/r</span><span class="sc">;</span>
  <span class="c"># $old is &quot;cat&quot; and $new is &quot;dog&quot;</span></pre>
<p>This is particularly useful with <code class="inline"><a class="l_k" href="functions/map.html">map</a></code>.  See <a href="perlop.html">perlop</a> for more examples.</p>
<a id="Re-entrant-regular-expression-engine"></a><h4 class='h4' >Re-entrant regular expression engine</h4>
<p>It is now safe to use regular expressions within <code class="inline">(?{...})</code> and
<pre>
<span class="s">(</span><span class="q">??</span><span class="s">{</span>...<span class="s">}</span><span class="s">)</span></code>
 code blocks inside regular expressions.</p>
<p>These blocks are still experimental, however, and still have problems with
lexical (<code class="inline"><a class="l_k" href="functions/my.html">my</a></code>) variables and abnormal exiting.</p>
<a id="use-re-'%2fflags'"></a><h4 class='h4' ><pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">re</span> <span class="q">&#39;/flags&#39;</span></code>
</h4>
<p>The <pre>
<span class="w">re</span></code>
 pragma now has the ability to turn on regular expression flags
till the end of the lexical scope:</p>
<pre>
    <a class="l_k" href="functions/use.html">use</a> <span class="w">re</span> <span class="q">&quot;/x&quot;</span><span class="sc">;</span>
    <span class="q">&quot;foo&quot;</span> =~ <span class="q">/ (.+) /</span><span class="sc">;</span>  <span class="c"># /x implied</span></pre>
<p>See <a href="re.html#'%2fflags'-mode">'/flags' mode in re</a> for details.</p>
<a id="%5co%7b...%7d-for-octals"></a><h4 class='h4' >\o{...} for octals</h4>
<p>There is a new octal escape sequence, <pre>
<span class="q">&quot;\o&quot;</span></code>
, in doublequote-like
contexts.  This construct allows large octal ordinals beyond the
current max of 0777 to be represented.  It also allows you to specify a
character in octal which can safely be concatenated with other regex
snippets and which won't be confused with being a backreference to
a regex capture group.  See <a href="perlre.html#Capture-groups">Capture groups in perlre</a>.</p>
<a id="Add-%5cp%7bTitlecase%7d-as-a-synonym-for-%5cp%7bTitle%7d"></a><h4 class='h4' >Add <pre>
\<span class="i">p</span><span class="s">{</span><span class="w">Titlecase</span><span class="s">}</span></code>
 as a synonym for <pre>
\<span class="i">p</span><span class="s">{</span><span class="w">Title</span><span class="s">}</span></code>
</h4>
<p>This synonym is added for symmetry with the Unicode property names
<pre>
\<span class="i">p</span><span class="s">{</span><span class="w">Uppercase</span><span class="s">}</span></code>
 and <pre>
\<span class="i">p</span><span class="s">{</span><span class="w">Lowercase</span><span class="s">}</span></code>
.</p>
<a id="Regular-expression-debugging-output-improvement"></a><h4 class='h4' >Regular expression debugging output improvement</h4>
<p>Regular expression debugging output (turned on by <pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">re</span> <span class="q">&#39;debug&#39;</span></code>
) now
uses hexadecimal when escaping non-ASCII characters, instead of octal.</p>
<a id="Return-value-of-delete-%24%2b%7b...%7d"></a><h4 class='h4' >Return value of <pre>
<a class="l_k" href="functions/delete.html">delete</a> <span class="i">$+</span>{...}</code>
</h4>
<p>Custom regular expression engines can now determine the return value of
<code class="inline"><a class="l_k" href="functions/delete.html">delete</a></code> on an entry of <pre>
<span class="i">%+</span></code>
 or <pre>
<span class="i">%-</span></code>
.</p>
<a id="Syntactical-Enhancements"></a><h3 class='h3' >Syntactical Enhancements</h3>
<a id="Array-and-hash-container-functions-accept-references"></a><h4 class='h4' >Array and hash container functions accept references</h4>
<p><strong>Warning:</strong> This feature is considered experimental, as the exact behaviour
may change in a future version of Perl.</p>
<p>All builtin functions that operate directly on array or hash
containers now also accept unblessed hard references to arrays
or hashes:</p>
<div class="verbatim"><ol><li>  |----------------------------+---------------------------|</li><li>  | Traditional syntax         | Terse syntax              |</li><li>  |----------------------------+---------------------------|</li><li>  | push @$arrayref, @stuff    | push $arrayref, @stuff    |</li><li>  | unshift @$arrayref, @stuff | unshift $arrayref, @stuff |</li><li>  | pop @$arrayref             | pop $arrayref             |</li><li>  | shift @$arrayref           | shift $arrayref           |</li><li>  | splice @$arrayref, 0, 2    | splice $arrayref, 0, 2    |</li><li>  | keys %$hashref             | keys $hashref             |</li><li>  | keys @$arrayref            | keys $arrayref            |</li><li>  | values %$hashref           | values $hashref           |</li><li>  | values @$arrayref          | values $arrayref          |</li><li>  | ($k,$v) = each %$hashref   | ($k,$v) = each $hashref   |</li><li>  | ($k,$v) = each @$arrayref  | ($k,$v) = each $arrayref  |</li><li>  |----------------------------+---------------------------|</li></ol></div><p>This allows these builtin functions to act on long dereferencing chains
or on the return value of subroutines without needing to wrap them in
<pre>
<span class="i">@</span>{}</code>
 or <pre>
<span class="i">%</span>{}</code>
:</p>
<pre>
  <a class="l_k" href="functions/push.html">push</a> <span class="i">@</span>{<span class="i">$obj</span><span class="i">-&gt;tags</span>}<span class="cm">,</span> <span class="i">$new_tag</span><span class="sc">;</span>  <span class="c"># old way</span>
  <a class="l_k" href="functions/push.html">push</a> <span class="i">$obj</span><span class="i">-&gt;tags</span><span class="cm">,</span>    <span class="i">$new_tag</span><span class="sc">;</span>  <span class="c"># new way</span>

  <a class="l_k" href="functions/for.html">for</a> <span class="s">(</span> <a class="l_k" href="functions/keys.html">keys</a> <span class="i">%</span>{<span class="i">$hoh</span>-&gt;{<span class="w">genres</span>}{<span class="w">artists</span>}} <span class="s">)</span> <span class="s">{</span>...<span class="s">}</span> <span class="c"># old way </span>
  <a class="l_k" href="functions/for.html">for</a> <span class="s">(</span> <a class="l_k" href="functions/keys.html">keys</a> <span class="i">$hoh</span>-&gt;{<span class="w">genres</span>}{<span class="w">artists</span>}    <span class="s">)</span> <span class="s">{</span>...<span class="s">}</span> <span class="c"># new way</span></pre>
<a id="Single-term-prototype"></a><h4 class='h4' >Single term prototype</h4>
<p>The <pre>
+</code>
 prototype is a special alternative to <pre>
<span class="i">$</span></code>
 that acts like
<pre>
\<span class="s">[</span><span class="i">@%</span><span class="s">]</span></code>
 when given a literal array or hash variable, but will otherwise
force scalar context on the argument.  See <a href="perlsub.html#Prototypes">Prototypes in perlsub</a>.</p>
<a id="package-block-syntax"></a><h4 class='h4' ><code class="inline"><a class="l_k" href="functions/package.html">package</a></code> block syntax</h4>
<p>A package declaration can now contain a code block, in which case the
declaration is in scope inside that block only.  So <pre>
<a name="package-Foo"></a>package <span class="i">Foo</span> <span class="s">{</span> ... <span class="s">}</span></code>

is precisely equivalent to <pre>
<a name="package-Foo"></a><a name="package-main"></a><span class="s">{</span> package <span class="i">Foo</span><span class="sc">;</span> ... <span class="s">}</span></code>
.  It also works with
a version number in the declaration, as in <pre>
<a name="package-Foo"></a>package <span class="i">Foo</span> <span class="n">1.2</span> <span class="s">{</span> ... <span class="s">}</span></code>
, 
which is its most attractive feature.  See <a href="perlfunc.html">perlfunc</a>.</p>
<a id="Statement-labels-can-appear-in-more-places"></a><h4 class='h4' >Statement labels can appear in more places</h4>
<p>Statement labels can now occur before any type of statement or declaration,
such as <code class="inline"><a class="l_k" href="functions/package.html">package</a></code>.</p>
<a id="Stacked-labels"></a><h4 class='h4' >Stacked labels</h4>
<p>Multiple statement labels can now appear before a single statement.</p>
<a id="Uppercase-X%2fB-allowed-in-hexadecimal%2fbinary-literals"></a><h4 class='h4' >Uppercase X/B allowed in hexadecimal/binary literals</h4>
<p>Literals may now use either upper case <code class="inline">0X...</code> or <code class="inline">0B...</code> prefixes,
in addition to the already supported <pre>
<span class="n">0</span>x...</code>
 and <code class="inline">0b...</code>
syntax [perl #76296].</p>
<p>C, Ruby, Python, and PHP already support this syntax, and it makes
Perl more internally consistent: a round-trip with <pre>
<a class="l_k" href="functions/eval.html">eval</a> <a class="l_k" href="functions/sprintf.html">sprintf</a>
<span class="q">&quot;%#X&quot;</span><span class="cm">,</span> <span class="n">0x10</span></code>
 now returns <pre>
<span class="n">16</span></code>
, just like <pre>
<a class="l_k" href="functions/eval.html">eval</a> <a class="l_k" href="functions/sprintf.html">sprintf</a> <span class="q">&quot;%#x&quot;</span><span class="cm">,</span> <span class="n">0x10</span></code>
.</p>
<a id="Overridable-tie-functions"></a><h4 class='h4' >Overridable tie functions</h4>
<p><code class="inline"><a class="l_k" href="functions/tie.html">tie</a></code>, <code class="inline"><a class="l_k" href="functions/tied.html">tied</a></code> and <code class="inline"><a class="l_k" href="functions/untie.html">untie</a></code> can now be overridden [perl #75902].</p>
<a id="Exception-Handling"></a><h3 class='h3' >Exception Handling</h3>
<p>To make them more reliable and consistent, several changes have been made
to how <code class="inline"><a class="l_k" href="functions/die.html">die</a></code>, <code class="inline"><a class="l_k" href="functions/warn.html">warn</a></code>, and <pre>
<span class="i">$@</span></code>
 behave.</p>
<ul>
<li>
<p>When an exception is thrown inside an <code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code>, the exception is no
longer at risk of being clobbered by destructor code running during unwinding.
Previously, the exception was written into <pre>
<span class="i">$@</span></code>

early in the throwing process, and would be overwritten if <code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code> was
used internally in the destructor for an object that had to be freed
while exiting from the outer <code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code>.  Now the exception is written
into <pre>
<span class="i">$@</span></code>
 last thing before exiting the outer <code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code>, so the code
running immediately thereafter can rely on the value in <pre>
<span class="i">$@</span></code>
 correctly
corresponding to that <code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code>.  (<pre>
<span class="i">$@</span></code>
 is still also set before exiting the
<code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code>, for the sake of destructors that rely on this.)</p>
<p>Likewise, a <pre>
<a class="l_k" href="functions/local.html">local</a> <span class="i">$@</span></code>
 inside an <code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code> no longer clobbers any
exception thrown in its scope.  Previously, the restoration of <pre>
<span class="i">$@</span></code>
 upon
unwinding would overwrite any exception being thrown.  Now the exception
gets to the <code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code> anyway.  So <pre>
<a class="l_k" href="functions/local.html">local</a> <span class="i">$@</span></code>
 is safe before a <code class="inline"><a class="l_k" href="functions/die.html">die</a></code>.</p>
<p>Exceptions thrown from object destructors no longer modify the <pre>
<span class="i">$@</span></code>

of the surrounding context.  (If the surrounding context was exception
unwinding, this used to be another way to clobber the exception being
thrown.)  Previously such an exception was
sometimes emitted as a warning, and then either was
string-appended to the surrounding <pre>
<span class="i">$@</span></code>
 or completely replaced the
surrounding <pre>
<span class="i">$@</span></code>
, depending on whether that exception and the surrounding
<pre>
<span class="i">$@</span></code>
 were strings or objects.  Now, an exception in this situation is
always emitted as a warning, leaving the surrounding <pre>
<span class="i">$@</span></code>
 untouched.
In addition to object destructors, this also affects any function call
run by XS code using the <pre>
<span class="w">G_KEEPERR</span></code>
 flag.</p>
</li>
<li>
<p>Warnings for <code class="inline"><a class="l_k" href="functions/warn.html">warn</a></code> can now be objects in the same way as exceptions
for <code class="inline"><a class="l_k" href="functions/die.html">die</a></code>.  If an object-based warning gets the default handling
of writing to standard error, it is stringified as before with the
filename and line number appended.  But a <pre>
<span class="i">$SIG</span>{<span class="w">__WARN__</span>}</code>
 handler now
receives an object-based warning as an object, where previously it
was passed the result of stringifying the object.</p>
</li>
</ul>
<a id="Other-Enhancements"></a><h3 class='h3' >Other Enhancements</h3>
<a id="Assignment-to-%240-sets-the-legacy-process-name-with-prctl()-on-Linux"></a><h4 class='h4' >Assignment to <pre>
<span class="i">$0</span></code>
 sets the legacy process name with prctl() on Linux</h4>
<p>On Linux the legacy process name is now set with <i>prctl(2)</i>, in
addition to altering the POSIX name via <pre>
<span class="w">argv</span><span class="s">[</span><span class="n">0</span><span class="s">]</span></code>
, as Perl has done
since version 4.000.  Now system utilities that read the legacy process
name such as <i>ps</i>, <i>top</i>, and <i>killall</i> recognize the name you set when
assigning to <pre>
<span class="i">$0</span></code>
.  The string you supply is truncated at 16 bytes;
this limitation is imposed by Linux.</p>
<a id="srand()-now-returns-the-seed"></a><h4 class='h4' >srand() now returns the seed</h4>
<p>This allows programs that need to have repeatable results not to have to come
up with their own seed-generating mechanism.  Instead, they can use srand()
and stash the return value for future use.  One example is a test program with
too many combinations to test comprehensively in the time available for
each run.  It can test a random subset each time and, should there be a failure,
log the seed used for that run so this can later be used to produce the same results.</p>
<a id="printf-like-functions-understand-post-1980-size-modifiers"></a><h4 class='h4' >printf-like functions understand post-1980 size modifiers</h4>
<p>Perl's printf and sprintf operators, and Perl's internal printf replacement
function, now understand the C90 size modifiers "hh" (<pre>
<span class="w">char</span></code>
), "z"
(<pre>
<span class="w">size_t</span></code>
), and "t" (<pre>
<span class="w">ptrdiff_t</span></code>
).  Also, when compiled with a C99
compiler, Perl now understands the size modifier "j" (<pre>
<span class="w">intmax_t</span></code>
) 
(but this is not portable).</p>
<p>So, for example, on any modern machine, <pre>
<a class="l_k" href="functions/sprintf.html">sprintf</a><span class="s">(</span><span class="q">&quot;%hhd&quot;</span><span class="cm">,</span> <span class="n">257</span><span class="s">)</span></code>
 returns "1".</p>
<a id="New-global-variable-%24%7b%5eGLOBAL_PHASE%7d"></a><h4 class='h4' >New global variable <pre>
<span class="i">$</span>{<span class="w">^GLOBAL_PHASE</span>}</code>
</h4>
<p>A new global variable, <pre>
<span class="i">$</span>{<span class="w">^GLOBAL_PHASE</span>}</code>
, has been added to allow
introspection of the current phase of the Perl interpreter.  It's explained in
detail in <a href="perlvar.html#%24%7b%5eGLOBAL_PHASE%7d">${^GLOBAL_PHASE} in perlvar</a> and in
<a href="perlmod.html#BEGIN%2c-UNITCHECK%2c-CHECK%2c-INIT-and-END">BEGIN, UNITCHECK, CHECK, INIT and END in perlmod</a>.</p>
<a id="-d%3a-foo-calls-Devel%3a%3afoo%3a%3aunimport"></a><h4 class='h4' ><code class="inline">-d:-foo</code> calls <pre>
<span class="w">Devel::foo::unimport</span></code>
</h4>
<p>The syntax <strong>-d:foo</strong> was extended in 5.6.1 to make <strong>-d:foo=bar</strong>
equivalent to <strong>-MDevel::foo=bar</strong>, which expands
internally to <pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">Devel::foo</span> <span class="q">&#39;bar&#39;</span></code>
.
Perl now allows prefixing the module name with <strong>-</strong>, with the same
semantics as <strong>-M</strong>; that is:</p>
<ul>
<li><a id="-d%3a-foo"></a><strong><code class="inline">-d:-foo</code></strong>
<p>Equivalent to <strong>-M-Devel::foo</strong>: expands to
<pre>
<a class="l_k" href="functions/no.html">no</a> <span class="w">Devel::foo</span></code>
 and calls <pre>
<span class="w">Devel::foo</span><span class="w">-&gt;unimport</span><span class="s">(</span><span class="s">)</span></code>

if that method exists.</p>
</li>
<li><a id="-d%3a-foo%3dbar"></a><strong><code class="inline">-d:-foo=bar</code></strong>
<p>Equivalent to <strong>-M-Devel::foo=bar</strong>: expands to <pre>
<a class="l_k" href="functions/no.html">no</a> <span class="w">Devel::foo</span> <span class="q">&#39;bar&#39;</span></code>
,
and calls <pre>
<span class="w">Devel::foo</span><span class="w">-&gt;unimport</span><span class="s">(</span><span class="q">&quot;bar&quot;</span><span class="s">)</span></code>
 if that method exists.</p>
</li>
</ul>
<p>This is particularly useful for suppressing the default actions of a
<pre>
<span class="w">Devel::</span>*</code>
 module's <code class="inline"><a class="l_k" href="functions/import.html">import</a></code> method whilst still loading it for debugging.</p>
<a id="Filehandle-method-calls-load-the-IO%3a%3aFile-manpage-on-demand"></a><h4 class='h4' >Filehandle method calls load <a href="IO/File.html">IO::File</a> on demand</h4>
<p>When a method call on a filehandle would die because the method cannot
be resolved and <a href="IO/File.html">IO::File</a> has not been loaded, Perl now loads <a href="IO/File.html">IO::File</a>
via <code class="inline"><a class="l_k" href="functions/require.html">require</a></code> and attempts method resolution again:</p>
<pre>
  <a class="l_k" href="functions/open.html">open</a> <a class="l_k" href="functions/my.html">my</a> <span class="i">$fh</span><span class="cm">,</span> <span class="q">&quot;&gt;&quot;</span><span class="cm">,</span> <span class="i">$file</span><span class="sc">;</span>
  <span class="i">$fh</span><span class="i">-&gt;binmode</span><span class="s">(</span><span class="q">&quot;:raw&quot;</span><span class="s">)</span><span class="sc">;</span>     <span class="c"># loads IO::File and succeeds</span></pre>
<p>This also works for globs like <pre>
<span class="w">STDOUT</span></code>
, <pre>
<span class="w">STDERR</span></code>
, and <pre>
<span class="w">STDIN</span></code>
:</p>
<pre>
  <span class="w">STDOUT</span><span class="w">-&gt;autoflush</span><span class="s">(</span><span class="n">1</span><span class="s">)</span><span class="sc">;</span></pre>
<p>Because this on-demand load happens only if method resolution fails, the
legacy approach of manually loading an <a href="IO/File.html">IO::File</a> parent class for partial
method support still works as expected:</p>
<pre>
  <a class="l_k" href="functions/use.html">use</a> <span class="w">IO::Handle</span><span class="sc">;</span>
  <a class="l_k" href="functions/open.html">open</a> <a class="l_k" href="functions/my.html">my</a> <span class="i">$fh</span><span class="cm">,</span> <span class="q">&quot;&gt;&quot;</span><span class="cm">,</span> <span class="i">$file</span><span class="sc">;</span>
  <span class="i">$fh</span><span class="i">-&gt;autoflush</span><span class="s">(</span><span class="n">1</span><span class="s">)</span><span class="sc">;</span>        <span class="c"># IO::File not loaded</span></pre>
<a id="Improved-IPv6-support"></a><h4 class='h4' >Improved IPv6 support</h4>
<p>The <pre>
<span class="w">Socket</span></code>
 module provides new affordances for IPv6,
including implementations of the <pre>
<span class="i">Socket::getaddrinfo</span><span class="s">(</span><span class="s">)</span></code>
 and
<pre>
<span class="i">Socket::getnameinfo</span><span class="s">(</span><span class="s">)</span></code>
 functions, along with related constants and a
handful of new functions.  See <a href="Socket.html">Socket</a>.</p>
<a id="DTrace-probes-now-include-package-name"></a><h4 class='h4' >DTrace probes now include package name</h4>
<p>The <pre>
<span class="w">DTrace</span></code>
 probes now include an additional argument, <pre>
<span class="w">arg3</span></code>
, which contains
the package the subroutine being entered or left was compiled in.</p>
<p>For example, using the following DTrace script:</p>
<div class="verbatim"><ol><li>  perl$target:::sub-entry</li><li>  {</li><li>      printf("%s::%s\n", copyinstr(arg0), copyinstr(arg3));</li><li>  }</li></ol></div><p>and then running:</p>
<pre>
  <span class="i">$ perl</span> -<span class="w">e</span> <span class="q">&#39;sub test { }; test&#39;</span></pre>
<p><pre>
<span class="w">DTrace</span></code>
 will print:</p>
<pre>
  <span class="w">main::test</span></pre>
<a id="New-C-APIs"></a><h3 class='h3' >New C APIs</h3>
<p>See <a href="#Internal-Changes">Internal Changes</a>.</p>
<a id="Security"></a><h2 class='h2' >Security</h2>
<a id="User-defined-regular-expression-properties"></a><h3 class='h3' >User-defined regular expression properties</h3>
<p><a href="perlunicode.html#User-Defined-Character-Properties">User-Defined Character Properties in perlunicode</a> documented that you can
create custom properties by defining subroutines whose names begin with
"In" or "Is".  However, Perl did not actually enforce that naming
restriction, so <pre>
\<span class="i">p</span><span class="s">{</span><span class="w">foo::bar</span><span class="s">}</span></code>
 could call foo::bar() if it existed.  The documented
convention is now enforced.</p>
<p>Also, Perl no longer allows tainted regular expressions to invoke a
user-defined property.  It simply dies instead [perl #82616].</p>
<a id="Incompatible-Changes"></a><h2 class='h2' >Incompatible Changes</h2>
<p>Perl 5.14.0 is not binary-compatible with any previous stable release.</p>
<p>In addition to the sections that follow, see <a href="#C-API-Changes">C API Changes</a>.</p>
<a id="Regular-Expressions-and-String-Escapes"></a><h3 class='h3' >Regular Expressions and String Escapes</h3>
<a id="Inverted-bracketed-character-classes-and-multi-character-folds"></a><h4 class='h4' >Inverted bracketed character classes and multi-character folds</h4>
<p>Some characters match a sequence of two or three characters in <code class="inline">/i</code>
regular expression matching under Unicode rules.  One example is
<pre>
<span class="w">LATIN</span> <span class="w">SMALL</span> <span class="w">LETTER</span> <span class="w">SHARP</span> <span class="w">S</span></code>
 which matches the sequence <pre>
<span class="w">ss</span></code>
.</p>
<pre>
 <span class="q">&#39;ss&#39;</span> =~ <span class="q">/\A[\N{LATIN SMALL LETTER SHARP S}]\z/i</span>  <span class="c"># Matches</span></pre>
<p>This, however, can lead to very counter-intuitive results, especially
when inverted.  Because of this, Perl 5.14 does not use multi-character <code class="inline">/i</code>
matching in inverted character classes.</p>
<pre>
 <span class="q">&#39;ss&#39;</span> =~ <span class="q">/\A[^\N{LATIN SMALL LETTER SHARP S}]+\z/i</span>  <span class="c"># ???</span></pre>
<p>This should match any sequences of characters that aren't the <pre>
<span class="w">SHARP</span> <span class="w">S</span></code>

nor what <pre>
<span class="w">SHARP</span> <span class="w">S</span></code>
 matches under <code class="inline">/i</code>.  <pre>
<span class="q">&quot;s&quot;</span></code>
 isn't <pre>
<span class="w">SHARP</span> <span class="w">S</span></code>
, but
Unicode says that <pre>
<span class="q">&quot;ss&quot;</span></code>
 is what <pre>
<span class="w">SHARP</span> <span class="w">S</span></code>
 matches under <code class="inline">/i</code>.  So
which one "wins"? Do you fail the match because the string has <pre>
<span class="w">ss</span></code>
 or
accept it because it has an <code class="inline"><a class="l_k" href="functions/s.html">s</a></code> followed by another <code class="inline"><a class="l_k" href="functions/s.html">s</a></code>?</p>
<p>Earlier releases of Perl did allow this multi-character matching,
but due to bugs, it mostly did not work.</p>
<a id="%5c400-%5c777"></a><h4 class='h4' >\400-\777</h4>
<p>In certain circumstances, <pre>
\<span class="n">400</span></code>
-<pre>
\<span class="n">777</span></code>
 in regexes have behaved
differently than they behave in all other doublequote-like contexts.
Since 5.10.1, Perl has issued a deprecation warning when this happens.
Now, these literals behave the same in all doublequote-like contexts,
namely to be equivalent to <pre>
\<span class="i">x</span><span class="s">{</span><span class="n">100</span><span class="s">}</span></code>
-<code class="inline">\x{1FF}</code>, with no deprecation
warning.</p>
<p>Use of <pre>
\<span class="n">400</span></code>
-<pre>
\<span class="n">777</span></code>
 in the command-line option <strong>-0</strong> retain their
conventional meaning.  They slurp whole input files; previously, this
was documented only for <strong>-0777</strong>.</p>
<p>Because of various ambiguities, you should use the new
<pre>
\<span class="i">o</span><span class="s">{</span>...<span class="s">}</span></code>
 construct to represent characters in octal instead.</p>
<a id="Most-%5cp%7b%7d-properties-are-now-immune-to-case-insensitive-matching"></a><h4 class='h4' >Most <pre>
\<span class="w">p</span><span class="s">{</span><span class="s">}</span></code>
 properties are now immune to case-insensitive matching</h4>
<p>For most Unicode properties, it doesn't make sense to have them match
differently under <code class="inline">/i</code> case-insensitive matching.  Doing so can lead
to unexpected results and potential security holes.  For example</p>
<pre>
 <span class="q">m/\p{ASCII_Hex_Digit}+/i</span></pre>
<p>could previously match non-ASCII characters because of the Unicode
matching rules (although there were several bugs with this).  Now
matching under <code class="inline">/i</code> gives the same results as non-<code class="inline">/i</code> matching except
for those few properties where people have come to expect differences,
namely the ones where casing is an integral part of their meaning, such
as <code class="inline"><a class="l_k" href="functions/m.html">m/\p{Uppercase}/i</a></code> and <code class="inline"><a class="l_k" href="functions/m.html">m/\p{Lowercase}/i</a></code>, both of which match
the same code points as matched by <code class="inline"><a class="l_k" href="functions/m.html">m/\p{Cased}/i</a></code>.
Details are in <a href="perlrecharclass.html#Unicode-Properties">Unicode Properties in perlrecharclass</a>.</p>
<p>User-defined property handlers that need to match differently under <code class="inline">/i</code>
must be changed to read the new boolean parameter passed to them, which
is non-zero if case-insensitive matching is in effect and 0 otherwise.
See <a href="perlunicode.html#User-Defined-Character-Properties">User-Defined Character Properties in perlunicode</a>.</p>
<a id="%5cp%7b%7d-implies-Unicode-semantics"></a><h4 class='h4' >\p{} implies Unicode semantics</h4>
<p>Specifying a Unicode property in the pattern indicates
that the pattern is meant for matching according to Unicode rules, the way
<code class="inline">\N{<i>NAME</i>}</code> does.</p>
<a id="Regular-expressions-retain-their-localeness-when-interpolated"></a><h4 class='h4' >Regular expressions retain their localeness when interpolated</h4>
<p>Regular expressions compiled under <pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">locale</span></code>
 now retain this when
interpolated into a new regular expression compiled outside a
<pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">locale</span></code>
, and vice-versa.</p>
<p>Previously, one regular expression interpolated into another inherited
the localeness of the surrounding regex, losing whatever state it
originally had.  This is considered a bug fix, but may trip up code that
has come to rely on the incorrect behaviour.</p>
<a id="Stringification-of-regexes-has-changed"></a><h4 class='h4' >Stringification of regexes has changed</h4>
<p>Default regular expression modifiers are now notated using
<code class="inline">(?^...)</code>.  Code relying on the old stringification will fail.  
This is so that when new modifiers are added, such code won't
have to keep changing each time this happens, because the stringification 
will automatically incorporate the new modifiers.</p>
<p>Code that needs to work properly with both old- and new-style regexes
can avoid the whole issue by using (for perls since 5.9.5; see <a href="re.html">re</a>):</p>
<pre>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">re</span> <span class="q">qw(regexp_pattern)</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$pat</span><span class="cm">,</span> <span class="i">$mods</span><span class="s">)</span> = <span class="i">regexp_pattern</span><span class="s">(</span><span class="i">$re_ref</span><span class="s">)</span><span class="sc">;</span></pre>
<p>If the actual stringification is important or older Perls need to be
supported, you can use something like the following:</p>
<pre>
    <span class="c"># Accept both old and new-style stringification</span>
    <a class="l_k" href="functions/my.html">my</a> <span class="i">$modifiers</span> = <span class="s">(</span><span class="q">qr/foobar/</span> =~ <span class="q">/\Q(?^/</span><span class="s">)</span> ? <span class="q">&quot;^&quot;</span> <span class="co">:</span> <span class="q">&quot;-xism&quot;</span><span class="sc">;</span></pre>
<p>And then use <pre>
<span class="i">$modifiers</span></code>
 instead of <pre>
-<span class="w">xism</span></code>
.</p>
<a id="Run-time-code-blocks-in-regular-expressions-inherit-pragmata"></a><h4 class='h4' >Run-time code blocks in regular expressions inherit pragmata</h4>
<p>Code blocks in regular expressions (<code class="inline">(?{...})</code> and <pre>
<span class="s">(</span><span class="q">??</span><span class="s">{</span>...<span class="s">}</span><span class="s">)</span></code>
) previously
did not inherit pragmata (strict, warnings, etc.) if the regular expression
was compiled at run time as happens in cases like these two:</p>
<pre>
  <a class="l_k" href="functions/use.html">use</a> <span class="w">re</span> <span class="q">&quot;eval&quot;</span><span class="sc">;</span>
  <span class="i">$foo</span> =~ <span class="i">$bar</span><span class="sc">;</span> <span class="c"># when $bar contains (?{...})</span>
  <span class="i">$foo</span> =~ <span class="q">/$bar(?{ $finished = 1 })/</span><span class="sc">;</span></pre>
<p>This bug has now been fixed, but code that relied on the buggy behaviour
may need to be fixed to account for the correct behaviour.</p>
<a id="Stashes-and-Package-Variables"></a><h3 class='h3' >Stashes and Package Variables</h3>
<a id="Localised-tied-hashes-and-arrays-are-no-longed-tied"></a><h4 class='h4' >Localised tied hashes and arrays are no longed tied</h4>
<p>In the following:</p>
<pre>
    <a class="l_k" href="functions/tie.html">tie</a> <span class="i">@a</span><span class="cm">,</span> ...<span class="sc">;</span>
    <span class="s">{</span>
	    <a class="l_k" href="functions/local.html">local</a> <span class="i">@a</span><span class="sc">;</span>
	    <span class="c"># here, @a is a now a new, untied array</span>
    <span class="s">}</span>
    <span class="c"># here, @a refers again to the old, tied array</span></pre>
<p>Earlier versions of Perl incorrectly tied the new local array.  This has
now been fixed.  This fix could however potentially cause a change in
behaviour of some code.</p>
<a id="Stashes-are-now-always-defined"></a><h4 class='h4' >Stashes are now always defined</h4>
<p><pre>
<a class="l_k" href="functions/defined.html">defined</a> <span class="i">%Foo::</span></code>
 now always returns true, even when no symbols have yet been
defined in that package.</p>
<p>This is a side-effect of removing a special-case kludge in the tokeniser,
added for 5.10.0, to hide side-effects of changes to the internal storage of
hashes.  The fix drastically reduces hashes' memory overhead.</p>
<p>Calling defined on a stash has been deprecated since 5.6.0, warned on
lexicals since 5.6.0, and warned for stashes and other package
variables since 5.12.0.  <pre>
<a class="l_k" href="functions/defined.html">defined</a> <span class="i">%hash</span></code>
 has always exposed an
implementation detail: emptying a hash by deleting all entries from it does
not make <pre>
<a class="l_k" href="functions/defined.html">defined</a> <span class="i">%hash</span></code>
 false.  Hence <pre>
<a class="l_k" href="functions/defined.html">defined</a> <span class="i">%hash</span></code>
 is not valid code to
determine whether an arbitrary hash is empty.  Instead, use the behaviour
of an empty <pre>
<span class="i">%hash</span></code>
 always returning false in scalar context.</p>
<a id="Clearing-stashes"></a><h4 class='h4' >Clearing stashes</h4>
<p>Stash list assignment <pre>
<span class="i">%foo::</span> = <span class="s">(</span><span class="s">)</span></code>
 used to make the stash temporarily 
anonymous while it was being emptied.  Consequently, any of its
subroutines referenced elsewhere would become anonymous,  showing up as
"(unknown)" in <code class="inline"><a class="l_k" href="functions/caller.html">caller</a></code>.  They now retain their package names such that
<code class="inline"><a class="l_k" href="functions/caller.html">caller</a></code> returns the original sub name if there is still a reference
to its typeglob and "foo::__ANON__" otherwise [perl #79208].</p>
<a id="Dereferencing-typeglobs"></a><h4 class='h4' >Dereferencing typeglobs</h4>
<p>If you assign a typeglob to a scalar variable:</p>
<pre>
    <span class="i">$glob</span> = <span class="i">*foo</span><span class="sc">;</span></pre>
<p>the glob that is copied to <pre>
<span class="i">$glob</span></code>
 is marked with a special flag
indicating that the glob is just a copy.  This allows subsequent
assignments to <pre>
<span class="i">$glob</span></code>
 to overwrite the glob.  The original glob,
however, is immutable.</p>
<p>Some Perl operators did not distinguish between these two types of globs.
This would result in strange behaviour in edge cases: <pre>
<a class="l_k" href="functions/untie.html">untie</a> <span class="i">$scalar</span></code>

would not untie the scalar if the last thing assigned to it was a glob
(because it treated it as <pre>
<a class="l_k" href="functions/untie.html">untie</a> <span class="i">*$scalar</span></code>
, which unties a handle).
Assignment to a glob slot (such as <pre>
<span class="i">*$glob</span> = \<span class="i">@some_array</span></code>
) would simply
assign <pre>
\<span class="i">@some_array</span></code>
 to <pre>
<span class="i">$glob</span></code>
.</p>
<p>To fix this, the <pre>
<span class="i">*</span>{}</code>
 operator (including its <pre>
<span class="i">*foo</span></code>
 and <pre>
<span class="i">*$foo</span></code>
 forms)
has been modified to make a new immutable glob if its operand is a glob
copy.  This allows operators that make a distinction between globs and
scalars to be modified to treat only immutable globs as globs.  (<code class="inline"><a class="l_k" href="functions/tie.html">tie</a></code>,
<code class="inline"><a class="l_k" href="functions/tied.html">tied</a></code> and <code class="inline"><a class="l_k" href="functions/untie.html">untie</a></code> have been left as they are for compatibility's sake,
but will warn.  See <a href="#Deprecations">Deprecations</a>.)</p>
<p>This causes an incompatible change in code that assigns a glob to the
return value of <pre>
<span class="i">*</span>{}</code>
 when that operator was passed a glob copy.  Take the
following code, for instance:</p>
<pre>
    <span class="i">$glob</span> = <span class="i">*foo</span><span class="sc">;</span>
    <span class="i">*$glob</span> = <span class="i">*bar</span><span class="sc">;</span></pre>
<p>The <pre>
<span class="i">*$glob</span></code>
 on the second line returns a new immutable glob.  That new
glob is made an alias to <pre>
<span class="i">*bar</span></code>
.  Then it is discarded.  So the second
assignment has no effect.</p>
<p>See <a href="http://rt.perl.org/rt3/Public/Bug/Display.html?id=77810">http://rt.perl.org/rt3/Public/Bug/Display.html?id=77810</a> for
more detail.</p>
<a id="Magic-variables-outside-the-main-package"></a><h4 class='h4' >Magic variables outside the main package</h4>
<p>In previous versions of Perl, magic variables like <pre>
<span class="i">$!</span></code>
, <pre>
<span class="i">%SIG</span></code>
, etc. would
"leak" into other packages.  So <pre>
<span class="i">%foo::SIG</span></code>
 could be used to access signals,
<pre>
<span class="i">$</span>{<span class="q">&quot;foo::!&quot;</span>}</code>
 (with strict mode off) to access C's <pre>
<span class="w">errno</span></code>
, etc.</p>
<p>This was a bug, or an "unintentional" feature, which caused various ill effects,
such as signal handlers being wiped when modules were loaded, etc.</p>
<p>This has been fixed (or the feature has been removed, depending on how you see
it).</p>
<a id="local(%24_)-strips-all-magic-from-%24_"></a><h4 class='h4' >local($_) strips all magic from $_</h4>
<p>local() on scalar variables gives them a new value but keeps all
their magic intact.  This has proven problematic for the default
scalar variable $_, where <a href="perlsub.html">perlsub</a> recommends that any subroutine
that assigns to $_ should first localize it.  This would throw an
exception if $_ is aliased to a read-only variable, and could in general have
various unintentional side-effects.</p>
<p>Therefore, as an exception to the general rule, local($_) will not
only assign a new value to $_, but also remove all existing magic from
it as well.</p>
<a id="Parsing-of-package-and-variable-names"></a><h4 class='h4' >Parsing of package and variable names</h4>
<p>Parsing the names of packages and package variables has changed: 
multiple adjacent pairs of colons, as in <pre>
<span class="w">foo::::bar</span></code>
, are now all 
treated as package separators.</p>
<p>Regardless of this change, the exact parsing of package separators has
never been guaranteed and is subject to change in future Perl versions.</p>
<a id="Changes-to-Syntax-or-to-Perl-Operators"></a><h3 class='h3' >Changes to Syntax or to Perl Operators</h3>
<a id="given-return-values"></a><h4 class='h4' ><code class="inline"><a class="l_k" href="functions/given.html">given</a></code> return values</h4>
<p><code class="inline"><a class="l_k" href="functions/given.html">given</a></code> blocks now return the last evaluated
expression, or an empty list if the block was exited by <code class="inline"><a class="l_k" href="functions/break.html">break</a></code>.  Thus you
can now write:</p>
<pre>
    <a class="l_k" href="functions/my.html">my</a> <span class="i">$type</span> = <a class="l_k" href="functions/do.html">do</a> <span class="s">{</span>
     <a class="l_k" href="functions/given.html">given</a> <span class="s">(</span><span class="i">$num</span><span class="s">)</span> <span class="s">{</span>
      <a class="l_k" href="functions/break.html">break</a>     <a class="l_k" href="functions/when.html">when</a> <a class="l_k" href="functions/undef.html">undef</a><span class="sc">;</span>
      <span class="q">&quot;integer&quot;</span> <a class="l_k" href="functions/when.html">when</a> <span class="q">/^[+-]?[0-9]+$/</span><span class="sc">;</span>
      <span class="q">&quot;float&quot;</span>   <a class="l_k" href="functions/when.html">when</a> <span class="q">/^[+-]?[0-9]+(?:\.[0-9]+)?$/</span><span class="sc">;</span>
      <span class="q">&quot;unknown&quot;</span><span class="sc">;</span>
     <span class="s">}</span>
    <span class="s">}</span><span class="sc">;</span></pre>
<p>See <a href="perlsyn.html#Return-value">Return value in perlsyn</a> for details.</p>
<a id="Change-in-parsing-of-certain-prototypes"></a><h4 class='h4' >Change in parsing of certain prototypes</h4>
<p>Functions declared with the following prototypes now behave correctly as unary
functions:</p>
<pre>
  <span class="i">*</span>
  \<span class="i">$ \</span>% \<span class="i">@ \</span>* \<span class="i">&amp;</span>
  \<span class="s">[</span>...<span class="s">]</span>
  <span class="sc">;</span><span class="i">$ ;</span>*
  <span class="sc">;</span>\<span class="i">$ ;</span>\<span class="i">% etc</span>.
  <span class="sc">;</span>\<span class="s">[</span>...<span class="s">]</span></pre>
<p>Due to this bug fix [perl #75904], functions
using the <code class="inline">(*)</code>, <code class="inline">(;$)</code> and <code class="inline">(;*)</code> prototypes
are parsed with higher precedence than before.  So
in the following example:</p>
<pre>
  sub <span class="m">foo(;$)</span><span class="sc">;</span>
  <span class="i">foo</span> <span class="i">$a</span> &lt; <span class="i">$b</span><span class="sc">;</span></pre>
<p>the second line is now parsed correctly as <pre>
<span class="i">foo</span><span class="s">(</span><span class="i">$a</span><span class="s">)</span> &lt; <span class="i">$b</span></code>
, rather than
<pre>
<span class="i">foo</span><span class="s">(</span><span class="i">$a</span> &lt; <span class="i">$b</span><span class="s">)</span></code>
.  This happens when one of these operators is used in
an unparenthesised argument:</p>
<div class="verbatim"><ol><li>  &lt; &gt; &lt;= &gt;= lt gt le ge</li><li>  == != &lt;=&gt; eq ne cmp ~~</li><li>  &amp;</li><li>  | ^</li><li>  &amp;&amp;</li><li>  || //</li><li>  .. ...</li><li>  ?:</li><li>  = += -= *= etc.</li><li>  , =&gt;</li></ol></div><a id="Smart-matching-against-array-slices"></a><h4 class='h4' >Smart-matching against array slices</h4>
<p>Previously, the following code resulted in a successful match:</p>
<pre>
    <a class="l_k" href="functions/my.html">my</a> <span class="i">@a</span> = <span class="q">qw(a y0 z)</span><span class="sc">;</span>
    <a class="l_k" href="functions/my.html">my</a> <span class="i">@b</span> = <span class="q">qw(a x0 z)</span><span class="sc">;</span>
    <span class="i">@a</span>[<span class="n">0</span> .. <span class="i">$#b</span>] ~~ <span class="i">@b</span><span class="sc">;</span></pre>
<p>This odd behaviour has now been fixed [perl #77468].</p>
<a id="Negation-treats-strings-differently-from-before"></a><h4 class='h4' >Negation treats strings differently from before</h4>
<p>The unary negation operator, <pre>
-</code>
, now treats strings that look like numbers
as numbers [perl #57706].</p>
<a id="Negative-zero"></a><h4 class='h4' >Negative zero</h4>
<p>Negative zero (-0.0), when converted to a string, now becomes "0" on all
platforms.  It used to become "-0" on some, but "0" on others.</p>
<p>If you still need to determine whether a zero is negative, use
<pre>
<a class="l_k" href="functions/sprintf.html">sprintf</a><span class="s">(</span><span class="q">&quot;%g&quot;</span><span class="cm">,</span> <span class="i">$zero</span><span class="s">)</span> =~ <span class="q">/^-/</span></code>
 or the <a href="https://search.cpan.org/perldoc/Data::Float">Data::Float</a> module on CPAN.</p>
<a id="%3a%3d-is-now-a-syntax-error"></a><h4 class='h4' ><pre>
<span class="j">:</span>=</code>
 is now a syntax error</h4>
<p>Previously <pre>
<a class="l_k" href="functions/my.html">my</a> <span class="i">$pi</span> <span class="co">:</span>= <span class="n">4</span></code>
 was exactly equivalent to <pre>
<a class="l_k" href="functions/my.html">my</a> <span class="i">$pi</span> <span class="co">:</span> = <span class="n">4</span></code>
,
with the <pre>
<span class="j">:</span></code>
 being treated as the start of an attribute list, ending before
the <pre>
=</code>
.  The use of <pre>
<span class="j">:</span>=</code>
 to mean <pre>
<span class="j">:</span> =</code>
 was deprecated in 5.12.0, and is
now a syntax error.  This allows future use of <pre>
<span class="j">:</span>=</code>
 as a new token.</p>
<p>Outside the core's tests for it, we find no Perl 5 code on CPAN
using this construction, so we believe that this change will have
little impact on real-world codebases.</p>
<p>If it is absolutely necessary to have empty attribute lists (for example,
because of a code generator), simply avoid the error by adding a space before
the <pre>
=</code>
.</p>
<a id="Change-in-the-parsing-of-identifiers"></a><h4 class='h4' >Change in the parsing of identifiers</h4>
<p>Characters outside the Unicode "XIDStart" set are no longer allowed at the
beginning of an identifier.  This means that certain accents and marks
that normally follow an alphabetic character may no longer be the first
character of an identifier.</p>
<a id="Threads-and-Processes"></a><h3 class='h3' >Threads and Processes</h3>
<a id="Directory-handles-not-copied-to-threads"></a><h4 class='h4' >Directory handles not copied to threads</h4>
<p>On systems other than Windows that do not have
a <pre>
<span class="w">fchdir</span></code>
 function, newly-created threads no
longer inherit directory handles from their parent threads.  Such programs
would usually have crashed anyway [perl #75154].</p>
<a id="close-on-shared-pipes"></a><h4 class='h4' ><code class="inline"><a class="l_k" href="functions/close.html">close</a></code> on shared pipes</h4>
<p>To avoid deadlocks, the <code class="inline"><a class="l_k" href="functions/close.html">close</a></code> function no longer waits for the
child process to exit if the underlying file descriptor is still
in use by another thread.  It returns true in such cases.</p>
<a id="fork()-emulation-will-not-wait-for-signalled-children"></a><h4 class='h4' >fork() emulation will not wait for signalled children</h4>
<p>On Windows parent processes would not terminate until all forked
children had terminated first.  However, <pre>
<a class="l_k" href="functions/kill.html">kill</a><span class="s">(</span><span class="q">&quot;KILL&quot;</span><span class="cm">,</span> ...<span class="s">)</span></code>
 is
inherently unstable on pseudo-processes, and <pre>
<a class="l_k" href="functions/kill.html">kill</a><span class="s">(</span><span class="q">&quot;TERM&quot;</span><span class="cm">,</span> ...<span class="s">)</span></code>

might not get delivered if the child is blocked in a system call.</p>
<p>To avoid the deadlock and still provide a safe mechanism to terminate
the hosting process, Perl now no longer waits for children that
have been sent a SIGTERM signal.  It is up to the parent process to
waitpid() for these children if child-cleanup processing must be
allowed to finish.  However, it is also then the responsibility of the
parent to avoid the deadlock by making sure the child process
can't be blocked on I/O.</p>
<p>See <a href="perlfork.html">perlfork</a> for more information about the fork() emulation on
Windows.</p>
<a id="Configuration"></a><h3 class='h3' >Configuration</h3>
<a id="Naming-fixes-in-Policy_sh.SH-may-invalidate-Policy.sh"></a><h4 class='h4' >Naming fixes in Policy_sh.SH may invalidate Policy.sh</h4>
<p>Several long-standing typos and naming confusions in <i>Policy_sh.SH</i> have
been fixed, standardizing on the variable names used in <i>config.sh</i>.</p>
<p>This will change the behaviour of <i>Policy.sh</i> if you happen to have been
accidentally relying on its incorrect behaviour.</p>
<a id="Perl-source-code-is-read-in-text-mode-on-Windows"></a><h4 class='h4' >Perl source code is read in text mode on Windows</h4>
<p>Perl scripts used to be read in binary mode on Windows for the benefit
of the <a href="https://search.cpan.org/perldoc/ByteLoader">ByteLoader</a> module (which is no longer part of core Perl).  This
had the side-effect of breaking various operations on the <pre>
<span class="w">DATA</span></code>
 filehandle,
including seek()/tell(), and even simply reading from <pre>
<span class="w">DATA</span></code>
 after filehandles
have been flushed by a call to system(), backticks, fork() etc.</p>
<p>The default build options for Windows have been changed to read Perl source
code on Windows in text mode now.  <a href="https://search.cpan.org/perldoc/ByteLoader">ByteLoader</a> will (hopefully) be updated on
CPAN to automatically handle this situation [perl #28106].</p>
<a id="Deprecations"></a><h2 class='h2' >Deprecations</h2>
<p>See also <a href="#Deprecated-C-APIs">Deprecated C APIs</a>.</p>
<a id="Omitting-a-space-between-a-regular-expression-and-subsequent-word"></a><h3 class='h3' >Omitting a space between a regular expression and subsequent word</h3>
<p>Omitting the space between a regular expression operator or
its modifiers and the following word is deprecated.  For
example, <code class="inline">m/foo/sand $bar</code> is for now still parsed
as <pre>
<span class="q">m/foo/s</span> <a class="l_k" href="functions/and.html">and</a> <span class="i">$bar</span></code>
, but will now issue a warning.</p>
<a id="%5cc_X_"></a><h3 class='h3' ><code class="inline">\c<i>X</i></code></h3>
<p>The backslash-c construct was designed as a way of specifying
non-printable characters, but there were no restrictions (on ASCII
platforms) on what the character following the <pre>
<span class="w">c</span></code>
 could be.  Now,
a deprecation warning is raised if that character isn't an ASCII character.
Also, a deprecation warning is raised for <pre>
<span class="q">&quot;\c{&quot;</span></code>
 (which is the same
as simply saying <pre>
<span class="q">&quot;;&quot;</span></code>
).</p>
<a id="%22%5cb%7b%22-and-%22%5cB%7b%22"></a><h3 class='h3' ><pre>
<span class="q">&quot;\b{&quot;</span></code>
 and <pre>
<span class="q">&quot;\B{&quot;</span></code>
</h3>
<p>In regular expressions, a literal <pre>
<span class="q">&quot;{&quot;</span></code>
 immediately following a <pre>
<span class="q">&quot;\b&quot;</span></code>

(not in a bracketed character class) or a <pre>
<span class="q">&quot;\B{&quot;</span></code>
 is now deprecated
to allow for its future use by Perl itself.</p>
<a id="Perl-4-era-.pl-libraries"></a><h3 class='h3' >Perl 4-era .pl libraries</h3>
<p>Perl bundles a handful of library files that predate Perl 5.
This bundling is now deprecated for most of these files, which are now
available from CPAN.  The affected files now warn when run, if they were
installed as part of the core.</p>
<p>This is a mandatory warning, not obeying <strong>-X</strong> or lexical warning bits.
The warning is modelled on that supplied by <i>deprecate.pm</i> for
deprecated-in-core <i>.pm</i> libraries.  It points to the specific CPAN
distribution that contains the <i>.pl</i> libraries.  The CPAN versions, of
course, do not generate the warning.</p>
<a id="List-assignment-to-%24%5b"></a><h3 class='h3' >List assignment to <pre>
<span class="i">$[</span></code>
</h3>
<p>Assignment to <pre>
<span class="i">$[</span></code>
 was deprecated and started to give warnings in
Perl version 5.12.0.  This version of Perl (5.14) now also emits a warning 
when assigning to <pre>
<span class="i">$[</span></code>
 in list context.  This fixes an oversight in 5.12.0.</p>
<a id="Use-of-qw(...)-as-parentheses"></a><h3 class='h3' >Use of qw(...) as parentheses</h3>
<p>Historically the parser fooled itself into thinking that <code class="inline"><a class="l_k" href="functions/qw.html">qw(...)</a></code> literals
were always enclosed in parentheses, and as a result you could sometimes omit
parentheses around them:</p>
<pre>
    <a class="l_k" href="functions/for.html">for</a> <span class="i">$x</span> <span class="q">qw(a b c)</span> <span class="s">{</span> ... <span class="s">}</span></pre>
<p>The parser no longer lies to itself in this way.  Wrap the list literal in
parentheses like this:</p>
<pre>
    <a class="l_k" href="functions/for.html">for</a> <span class="i">$x</span> <span class="s">(</span><span class="q">qw(a b c)</span><span class="s">)</span> <span class="s">{</span> ... <span class="s">}</span></pre>
<p>This is being deprecated because the parentheses in <pre>
<a class="l_k" href="functions/for.html">for</a> <span class="i">$i</span> <span class="s">(</span><span class="n">1</span><span class="cm">,</span><span class="n">2</span><span class="cm">,</span><span class="n">3</span><span class="s">)</span> <span class="s">{</span> ... <span class="s">}</span></code>

are not part of expression syntax.  They are part of the statement
syntax, with the <code class="inline"><a class="l_k" href="functions/for.html">for</a></code> statement wanting literal parentheses.
The synthetic parentheses that a <code class="inline"><a class="l_k" href="functions/qw.html">qw</a></code> expression acquired were only
intended to be treated as part of expression syntax.</p>
<p>Note that this does not change the behaviour of cases like:</p>
<pre>
    <a class="l_k" href="functions/use.html">use</a> <span class="w">POSIX</span> <span class="q">qw(setlocale localeconv)</span><span class="sc">;</span>
    <a class="l_k" href="functions/our.html">our</a> <span class="i">@EXPORT</span> = <span class="q">qw(foo bar baz)</span><span class="sc">;</span></pre>
<p>where parentheses were never required around the expression.</p>
<a id="%5cN%7bBELL%7d"></a><h3 class='h3' ><pre>
\<span class="i">N</span><span class="s">{</span><span class="w">BELL</span><span class="s">}</span></code>
</h3>
<p>This is because Unicode is using that name for a different character.
See <a href="#Unicode-Version-6.0-is-now-supported-(mostly)">Unicode Version 6.0 is now supported (mostly)</a> for more
explanation.</p>
<a id="%3fPATTERN%3f"></a><h3 class='h3' ><pre>
<span class="q">?PATTERN?</span></code>
</h3>
<p><pre>
<span class="q">?PATTERN?</span></code>
 (without the initial <code class="inline"><a class="l_k" href="functions/m.html">m</a></code>) has been deprecated and now produces
a warning.  This is to allow future use of <code class="inline">?</code> in new operators.
The match-once functionality is still available as <code class="inline"><a class="l_k" href="functions/m.html">m?PATTERN?</a></code>.</p>
<a id="Tie-functions-on-scalars-holding-typeglobs"></a><h3 class='h3' >Tie functions on scalars holding typeglobs</h3>
<p>Calling a tie function (<code class="inline"><a class="l_k" href="functions/tie.html">tie</a></code>, <code class="inline"><a class="l_k" href="functions/tied.html">tied</a></code>, <code class="inline"><a class="l_k" href="functions/untie.html">untie</a></code>) with a scalar argument
acts on a filehandle if the scalar happens to hold a typeglob.</p>
<p>This is a long-standing bug that will be removed in Perl 5.16, as
there is currently no way to tie the scalar itself when it holds
a typeglob, and no way to untie a scalar that has had a typeglob
assigned to it.</p>
<p>Now there is a deprecation warning whenever a tie
function is used on a handle without an explicit <pre>
<span class="i">*</span></code>
.</p>
<a id="User-defined-case-mapping"></a><h3 class='h3' >User-defined case-mapping</h3>
<p>This feature is being deprecated due to its many issues, as documented in
<a href="perlunicode.html#User-Defined-Case-Mappings-(for-serious-hackers-only)">User-Defined Case Mappings (for serious hackers only) in perlunicode</a>.
This feature will be removed in Perl 5.16.  Instead use the CPAN module
<a href="https://search.cpan.org/perldoc/Unicode::Casing">Unicode::Casing</a>, which provides improved functionality.</p>
<a id="Deprecated-modules"></a><h3 class='h3' >Deprecated modules</h3>
<p>The following module will be removed from the core distribution in a
future release, and should be installed from CPAN instead.  Distributions
on CPAN that require this should add it to their prerequisites.  The
core version of these module now issues a deprecation warning.</p>
<p>If you ship a packaged version of Perl, either alone or as part of a
larger system, then you should carefully consider the repercussions of
core module deprecations.  You may want to consider shipping your default
build of Perl with a package for the deprecated module that
installs into <pre>
<span class="w">vendor</span></code>
 or <pre>
<span class="w">site</span></code>
 Perl library directories.  This will
inhibit the deprecation warnings.</p>
<p>Alternatively, you may want to consider patching <i>lib/deprecate.pm</i>
to provide deprecation warnings specific to your packaging system
or distribution of Perl, consistent with how your packaging system
or distribution manages a staged transition from a release where the
installation of a single package provides the given functionality, to
a later release where the system administrator needs to know to install
multiple packages to get that same functionality.</p>
<p>You can silence these deprecation warnings by installing the module
in question from CPAN.  To install the latest version of it by role
rather than by name, just install <pre>
<span class="w">Task::Deprecations::5_14</span></code>
.</p>
<ul>
<li><a id="the-Devel%3a%3aDProf-manpage"></a><strong><a href="https://search.cpan.org/perldoc/Devel::DProf">Devel::DProf</a></strong>
<p>We strongly recommend that you install and use <a href="https://search.cpan.org/perldoc/Devel::NYTProf">Devel::NYTProf</a> instead
of <a href="https://search.cpan.org/perldoc/Devel::DProf">Devel::DProf</a>, as <a href="https://search.cpan.org/perldoc/Devel::NYTProf">Devel::NYTProf</a> offers significantly
improved profiling and reporting.</p>
</li>
</ul>
<a id="Performance-Enhancements"></a><h2 class='h2' >Performance Enhancements</h2>
<a id="%22Safe-signals%22-optimisation"></a><h3 class='h3' >"Safe signals" optimisation</h3>
<p>Signal dispatch has been moved from the runloop into control ops.
This should give a few percent speed increase, and eliminates nearly
all the speed penalty caused by the introduction of "safe signals"
in 5.8.0.  Signals should still be dispatched within the same
statement as they were previously.  If this does <i>not</i> happen, or
if you find it possible to create uninterruptible loops, this is a
bug, and reports are encouraged of how to recreate such issues.</p>
<a id="Optimisation-of-shift()-and-pop()-calls-without-arguments"></a><h3 class='h3' >Optimisation of shift() and pop() calls without arguments</h3>
<p>Two fewer OPs are used for shift() and pop() calls with no argument (with
implicit <pre>
<span class="i">@_</span></code>
).  This change makes shift() 5% faster than <pre>
<a class="l_k" href="functions/shift.html">shift</a> <span class="i">@_</span></code>

on non-threaded perls, and 25% faster on threaded ones.</p>
<a id="Optimisation-of-regexp-engine-string-comparison-work"></a><h3 class='h3' >Optimisation of regexp engine string comparison work</h3>
<p>The <pre>
<span class="w">foldEQ_utf8</span></code>
 API function for case-insensitive comparison of strings (which
is used heavily by the regexp engine) was substantially refactored and
optimised -- and its documentation much improved as a free bonus.</p>
<a id="Regular-expression-compilation-speed-up"></a><h3 class='h3' >Regular expression compilation speed-up</h3>
<p>Compiling regular expressions has been made faster when upgrading
the regex to utf8 is necessary but this isn't known when the compilation begins.</p>
<a id="String-appending-is-100-times-faster"></a><h3 class='h3' >String appending is 100 times faster</h3>
<p>When doing a lot of string appending, perls built to use the system's
<pre>
<span class="w">malloc</span></code>
 could end up allocating a lot more memory than needed in a
inefficient way.</p>
<p><pre>
<span class="w">sv_grow</span></code>
, the function used to allocate more memory if necessary
when appending to a string, has been taught to round up the memory
it requests to a certain geometric progression, making it much faster on
certain platforms and configurations.  On Win32, it's now about 100 times
faster.</p>
<a id="Eliminate-PL_*-accessor-functions-under-ithreads"></a><h3 class='h3' >Eliminate <pre>
<span class="w">PL_</span>*</code>
 accessor functions under ithreads</h3>
<p>When <pre>
<span class="w">MULTIPLICITY</span></code>
 was first developed, and interpreter state moved into
an interpreter struct, thread- and interpreter-local <pre>
<span class="w">PL_</span>*</code>
 variables
were defined as macros that called accessor functions (returning the
address of the value) outside the Perl core.  The intent was to allow
members within the interpreter struct to change size without breaking
binary compatibility, so that bug fixes could be merged to a maintenance
branch that necessitated such a size change.  This mechanism was redundant
and penalised well-behaved code.  It has been removed.</p>
<a id="Freeing-weak-references"></a><h3 class='h3' >Freeing weak references</h3>
<p>When there are many weak references to an object, freeing that object
can under some circumstances take O(<i>N*N</i>) time to free, where
<i>N</i> is the number of references.  The circumstances in which this can happen
have been reduced [perl #75254]</p>
<a id="Lexical-array-and-hash-assignments"></a><h3 class='h3' >Lexical array and hash assignments</h3>
<p>An earlier optimisation to speed up <pre>
<a class="l_k" href="functions/my.html">my</a> <span class="i">@array</span> = ...</code>
 and
<pre>
<a class="l_k" href="functions/my.html">my</a> <span class="i">%hash</span> = ...</code>
 assignments caused a bug and was disabled in Perl 5.12.0.</p>
<p>Now we have found another way to speed up these assignments [perl #82110].</p>
<a id="%40_-uses-less-memory"></a><h3 class='h3' ><pre>
<span class="i">@_</span></code>
 uses less memory</h3>
<p>Previously, <pre>
<span class="i">@_</span></code>
 was allocated for every subroutine at compile time with
enough space for four entries.  Now this allocation is done on demand when
the subroutine is called [perl #72416].</p>
<a id="Size-optimisations-to-SV-and-HV-structures"></a><h3 class='h3' >Size optimisations to SV and HV structures</h3>
<p><pre>
<span class="w">xhv_fill</span></code>
 has been eliminated from <pre>
<span class="w">struct</span> <span class="w">xpvhv</span></code>
, saving 1 IV per hash and
on some systems will cause <pre>
<span class="w">struct</span> <span class="w">xpvhv</span></code>
 to become cache-aligned.  To avoid
this memory saving causing a slowdown elsewhere, boolean use of <pre>
<span class="w">HvFILL</span></code>

now calls <pre>
<span class="w">HvTOTALKEYS</span></code>
 instead (which is equivalent), so while the fill
data when actually required are now calculated on demand, cases when
this needs to be done should be rare.</p>
<p>The order of structure elements in SV bodies has changed.  Effectively,
the NV slot has swapped location with STASH and MAGIC.  As all access to
SV members is via macros, this should be completely transparent.  This
change allows the space saving for PVHVs documented above, and may reduce
the memory allocation needed for PVIVs on some architectures.</p>
<p><pre>
<span class="w">XPV</span></code>
, <pre>
<span class="w">XPVIV</span></code>
, and <pre>
<span class="w">XPVNV</span></code>
 now allocate only the parts of the <pre>
<span class="w">SV</span></code>
 body
they actually use, saving some space.</p>
<p>Scalars containing regular expressions now allocate only the part of the <pre>
<span class="w">SV</span></code>

body they actually use, saving some space.</p>
<a id="Memory-consumption-improvements-to-Exporter"></a><h3 class='h3' >Memory consumption improvements to Exporter</h3>
<p>The <pre>
<span class="i">@EXPORT_FAIL</span></code>
 AV is no longer created unless needed, hence neither is
the typeglob backing it.  This saves about 200 bytes for every package that
uses Exporter but doesn't use this functionality.</p>
<a id="Memory-savings-for-weak-references"></a><h3 class='h3' >Memory savings for weak references</h3>
<p>For weak references, the common case of just a single weak reference
per referent has been optimised to reduce the storage required.  In this
case it saves the equivalent of one small Perl array per referent.</p>
<a id="%25%2b-and-%25--use-less-memory"></a><h3 class='h3' ><pre>
<span class="i">%+</span></code>
 and <pre>
<span class="i">%-</span></code>
 use less memory</h3>
<p>The bulk of the <pre>
<span class="w">Tie::Hash::NamedCapture</span></code>
 module used to be in the Perl
core.  It has now been moved to an XS module to reduce overhead for
programs that do not use <pre>
<span class="i">%+</span></code>
 or <pre>
<span class="i">%-</span></code>
.</p>
<a id="Multiple-small-improvements-to-threads"></a><h3 class='h3' >Multiple small improvements to threads</h3>
<p>The internal structures of threading now make fewer API calls and fewer
allocations, resulting in noticeably smaller object code.  Additionally,
many thread context checks have been deferred so they're done only 
as needed (although this is only possible for non-debugging builds).</p>
<a id="Adjacent-pairs-of-nextstate-opcodes-are-now-optimized-away"></a><h3 class='h3' >Adjacent pairs of nextstate opcodes are now optimized away</h3>
<p>Previously, in code such as</p>
<pre>
    <a class="l_k" href="functions/use.html">use</a> <span class="w">constant</span> <span class="i">DEBUG</span> <span class="cm">=&gt;</span> <span class="n">0</span><span class="sc">;</span>

<a name="GAK"></a>    sub <span class="m">GAK</span> <span class="s">{</span>
        <a class="l_k" href="functions/warn.html">warn</a> <a class="l_k" href="functions/if.html">if</a> <span class="i">DEBUG</span><span class="sc">;</span>
        <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;stuff\n&quot;</span><span class="sc">;</span>
    <span class="s">}</span></pre>
<p>the ops for <pre>
<a class="l_k" href="functions/warn.html">warn</a> <a class="l_k" href="functions/if.html">if</a> <span class="w">DEBUG</span></code>
 would be folded to a <pre>
<span class="w">null</span></code>
 op (<pre>
<span class="w">ex</span>-<span class="w">const</span></code>
), but
the <pre>
<span class="w">nextstate</span></code>
 op would remain, resulting in a runtime op dispatch of
<pre>
<span class="w">nextstate</span></code>
, <pre>
<span class="w">nextstate</span></code>
, etc.</p>
<p>The execution of a sequence of <pre>
<span class="w">nextstate</span></code>
 ops is indistinguishable from just
the last <pre>
<span class="w">nextstate</span></code>
 op so the peephole optimizer now eliminates the first of
a pair of <pre>
<span class="w">nextstate</span></code>
 ops except when the first carries a label, since labels
must not be eliminated by the optimizer, and label usage isn't conclusively known
at compile time.</p>
<a id="Modules-and-Pragmata"></a><h2 class='h2' >Modules and Pragmata</h2>
<a id="New-Modules-and-Pragmata"></a><h3 class='h3' >New Modules and Pragmata</h3>
<ul>
<li>
<p><a href="CPAN/Meta/YAML.html">CPAN::Meta::YAML</a> 0.003 has been added as a dual-life module.  It supports a
subset of YAML sufficient for reading and writing <i>META.yml</i> and <i>MYMETA.yml</i> files
included with CPAN distributions or generated by the module installation
toolchain.  It should not be used for any other general YAML parsing or
generation task.</p>
</li>
<li>
<p><a href="CPAN/Meta.html">CPAN::Meta</a> version 2.110440 has been added as a dual-life module.  It
provides a standard library to read, interpret and write CPAN distribution
metadata files (like <i>META.json</i> and <i>META.yml</i>) that describe a
distribution, its contents, and the requirements for building it and
installing it.  The latest CPAN distribution metadata specification is
included as <a href="CPAN/Meta/Spec.html">CPAN::Meta::Spec</a> and notes on changes in the specification
over time are given in <a href="CPAN/Meta/History.html">CPAN::Meta::History</a>.</p>
</li>
<li>
<p><a href="HTTP/Tiny.html">HTTP::Tiny</a> 0.012 has been added as a dual-life module.  It is a very
small, simple HTTP/1.1 client designed for simple GET requests and file
mirroring.  It has been added so that <i>CPAN.pm</i> and <a href="https://search.cpan.org/perldoc/CPANPLUS">CPANPLUS</a> can
"bootstrap" HTTP access to CPAN using pure Perl without relying on external
binaries like <i>curl(1)</i> or <i>wget(1)</i>.</p>
</li>
<li>
<p><a href="JSON/PP.html">JSON::PP</a> 2.27105 has been added as a dual-life module to allow CPAN
clients to read <i>META.json</i> files in CPAN distributions.</p>
</li>
<li>
<p><a href="Module/Metadata.html">Module::Metadata</a> 1.000004 has been added as a dual-life module.  It gathers
package and POD information from Perl module files.  It is a standalone module
based on <a href="https://search.cpan.org/perldoc/Module::Build::ModuleInfo">Module::Build::ModuleInfo</a> for use by other module installation
toolchain components.  <a href="https://search.cpan.org/perldoc/Module::Build::ModuleInfo">Module::Build::ModuleInfo</a> has been deprecated in
favor of this module instead.</p>
</li>
<li>
<p><a href="Perl/OSType.html">Perl::OSType</a> 1.002 has been added as a dual-life module.  It maps Perl
operating system names (like "dragonfly" or "MSWin32") to more generic types
with standardized names (like "Unix" or "Windows").  It has been refactored
out of <a href="https://search.cpan.org/perldoc/Module::Build">Module::Build</a> and <a href="ExtUtils/CBuilder.html">ExtUtils::CBuilder</a> and consolidates such mappings into
a single location for easier maintenance.</p>
</li>
<li>
<p>The following modules were added by the <a href="Unicode/Collate.html">Unicode::Collate</a> 
upgrade.  See below for details.</p>
<p><a href="Unicode/Collate/CJK/Big5.html">Unicode::Collate::CJK::Big5</a></p>
<p><a href="Unicode/Collate/CJK/GB2312.html">Unicode::Collate::CJK::GB2312</a></p>
<p><a href="Unicode/Collate/CJK/JISX0208.html">Unicode::Collate::CJK::JISX0208</a></p>
<p><a href="Unicode/Collate/CJK/Korean.html">Unicode::Collate::CJK::Korean</a></p>
<p><a href="Unicode/Collate/CJK/Pinyin.html">Unicode::Collate::CJK::Pinyin</a></p>
<p><a href="Unicode/Collate/CJK/Stroke.html">Unicode::Collate::CJK::Stroke</a></p>
</li>
<li>
<p><a href="https://search.cpan.org/perldoc/Version::Requirements">Version::Requirements</a> version 0.101020 has been added as a dual-life
module.  It provides a standard library to model and manipulates module
prerequisites and version constraints defined in <a href="CPAN/Meta/Spec.html">CPAN::Meta::Spec</a>.</p>
</li>
</ul>
<a id="Updated-Modules-and-Pragma"></a><h3 class='h3' >Updated Modules and Pragma</h3>
<ul>
<li>
<p><a href="attributes.html">attributes</a> has been upgraded from version 0.12 to 0.14.</p>
</li>
<li>
<p><a href="https://search.cpan.org/perldoc/Archive::Extract">Archive::Extract</a> has been upgraded from version 0.38 to 0.48.</p>
<p>Updates since 0.38 include: a safe print method that guards
<a href="https://search.cpan.org/perldoc/Archive::Extract">Archive::Extract</a> from changes to <pre>
<span class="i">$\</span></code>
; a fix to the tests when run in core
Perl; support for TZ files; a modification for the lzma
logic to favour <a href="https://search.cpan.org/perldoc/IO::Uncompress::Unlzma">IO::Uncompress::Unlzma</a>; and a fix
for an issue with NetBSD-current and its new <i>unzip(1)</i>
executable.</p>
</li>
<li>
<p><a href="Archive/Tar.html">Archive::Tar</a> has been upgraded from version 1.54 to 1.76.</p>
<p>Important changes since 1.54 include the following:</p>
<ul>
<li>
<p>Compatibility with busybox implementations of <i>tar(1)</i>.</p>
</li>
<li>
<p>A fix so that write() and create_archive()
close only filehandles they themselves opened.</p>
</li>
<li>
<p>A bug was fixed regarding the exit code of extract_archive.</p>
</li>
<li>
<p>The <i>ptar(1)</i> utility has a new option to allow safe creation of
tarballs without world-writable files on Windows, allowing those
archives to be uploaded to CPAN.</p>
</li>
<li>
<p>A new <i>ptargrep(1)</i> utility for using regular expressions against 
the contents of files in a tar archive.</p>
</li>
<li>
<p><a href="https://search.cpan.org/perldoc/pax">pax</a> extended headers are now skipped.</p>
</li>
</ul>
</li>
<li>
<p><a href="Attribute/Handlers.html">Attribute::Handlers</a> has been upgraded from version 0.87 to 0.89.</p>
</li>
<li>
<p><a href="autodie.html">autodie</a> has been upgraded from version 2.06_01 to 2.1001.</p>
</li>
<li>
<p><a href="AutoLoader.html">AutoLoader</a> has been upgraded from version 5.70 to 5.71.</p>
</li>
<li>
<p>The <a href="B.html">B</a> module has been upgraded from version 1.23 to 1.29.</p>
<p>It no longer crashes when taking apart a <code class="inline"><a class="l_k" href="functions/y.html">y///</a></code> containing characters
outside the octet range or compiled in a <pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">utf8</span></code>
 scope.</p>
<p>The size of the shared object has been reduced by about 40%, with no
reduction in functionality.</p>
</li>
<li>
<p><a href="B/Concise.html">B::Concise</a> has been upgraded from version 0.78 to 0.83.</p>
<p><a href="B/Concise.html">B::Concise</a> marks rv2sv(), rv2av(), and rv2hv() ops with the new
<pre>
<span class="w">OPpDEREF</span></code>
 flag as "DREFed".</p>
<p>It no longer produces mangled output with the <strong>-tree</strong> option
[perl #80632].</p>
</li>
<li>
<p><a href="B/Debug.html">B::Debug</a> has been upgraded from version 1.12 to 1.16.</p>
</li>
<li>
<p><a href="B/Deparse.html">B::Deparse</a> has been upgraded from version 0.96 to 1.03.</p>
<p>The deparsing of a <pre>
<span class="w">nextstate</span></code>
 op has changed when it has both a
change of package relative to the previous nextstate, or a change of
<pre>
<span class="i">%^H</span></code>
 or other state and a label.  The label was previously emitted
first, but is now emitted last (5.12.1).</p>
<p>The <pre>
<a class="l_k" href="functions/no.html">no</a> <span class="v">5.13.2</span></code>
 or similar form is now correctly handled by <a href="B/Deparse.html">B::Deparse</a>
(5.12.3).</p>
<p><a href="B/Deparse.html">B::Deparse</a> now properly handles the code that applies a conditional
pattern match against implicit <pre>
<span class="i">$_</span></code>
 as it was fixed in [perl #20444].</p>
<p>Deparsing of <code class="inline"><a class="l_k" href="functions/our.html">our</a></code> followed by a variable with funny characters
(as permitted under the <pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">utf8</span></code>
 pragma) has also been fixed [perl #33752].</p>
</li>
<li>
<p><a href="https://search.cpan.org/perldoc/B::Lint">B::Lint</a> has been upgraded from version 1.11_01 to 1.13.</p>
</li>
<li>
<p><a href="base.html">base</a> has been upgraded from version 2.15 to 2.16.</p>
</li>
<li>
<p><a href="Benchmark.html">Benchmark</a> has been upgraded from version 1.11 to 1.12.</p>
</li>
<li>
<p><a href="bignum.html">bignum</a> has been upgraded from version 0.23 to 0.27.</p>
</li>
<li>
<p><a href="Carp.html">Carp</a> has been upgraded from version 1.15 to 1.20.</p>
<p><a href="Carp.html">Carp</a> now detects incomplete <a href="functions/caller.html">caller EXPR</a>
overrides and avoids using bogus <pre>
<span class="i">@DB::args</span></code>
.  To provide backtraces,
Carp relies on particular behaviour of the caller() builtin.
<a href="Carp.html">Carp</a> now detects if other code has overridden this with an
incomplete implementation, and modifies its backtrace accordingly.
Previously incomplete overrides would cause incorrect values in
backtraces (best case), or obscure fatal errors (worst case).</p>
<p>This fixes certain cases of "Bizarre copy of ARRAY" caused by modules
overriding caller() incorrectly (5.12.2).</p>
<p>It now also avoids using regular expressions that cause Perl to
load its Unicode tables, so as to avoid the "BEGIN not safe after
errors" error that ensue if there has been a syntax error
[perl #82854].</p>
</li>
<li>
<p><a href="https://search.cpan.org/perldoc/CGI">CGI</a> has been upgraded from version 3.48 to 3.52.</p>
<p>This provides the following security fixes: the MIME boundary in 
multipart_init() is now random and the handling of 
newlines embedded in header values has been improved.</p>
</li>
<li>
<p><a href="Compress/Raw/Bzip2.html">Compress::Raw::Bzip2</a> has been upgraded from version 2.024 to 2.033.</p>
<p>It has been updated to use <i>bzip2(1)</i> 1.0.6.</p>
</li>
<li>
<p><a href="Compress/Raw/Zlib.html">Compress::Raw::Zlib</a> has been upgraded from version 2.024 to 2.033.</p>
</li>
<li>
<p><a href="constant.html">constant</a> has been upgraded from version 1.20 to 1.21.</p>
<p>Unicode constants work once more.  They have been broken since Perl 5.10.0
[CPAN RT #67525].</p>
</li>
<li>
<p><a href="CPAN.html">CPAN</a> has been upgraded from version 1.94_56 to 1.9600.</p>
<p>Major highlights:</p>
<ul>
<li><a id="*-much-less-configuration-dialog-hassle"></a><strong>much less configuration dialog hassle</strong>
</li>
<li><a id="*-support-for-_META%2fMYMETA.json_"></a><strong>support for <i>META/MYMETA.json</i></strong>
</li>
<li><a id="*-support-for-the-local%3a%3alib-manpage"></a><strong>support for <a href="https://search.cpan.org/perldoc/local::lib">local::lib</a></strong>
</li>
<li><a id="*-support-for-the-HTTP%3a%3aTiny-manpage-to-reduce-the-dependency-on-FTP-sites"></a><strong>support for <a href="HTTP/Tiny.html">HTTP::Tiny</a> to reduce the dependency on FTP sites</strong>
</li>
<li><a id="*-automatic-mirror-selection"></a><strong>automatic mirror selection</strong>
</li>
<li><a id="*-iron-out-all-known-bugs-in-configure_requires"></a><strong>iron out all known bugs in configure_requires</strong>
</li>
<li><a id="*-support-for-distributions-compressed-with-the-bzip2(1)-manpage"></a><strong>support for distributions compressed with <i>bzip2(1)</i></strong>
</li>
<li><a id="*-allow-_Foo%2fBar.pm_-on-the-command-line-to-mean-Foo%3a%3aBar"></a><strong>allow <i>Foo/Bar.pm</i> on the command line to mean <pre>
<span class="w">Foo::Bar</span></code>
</strong>
</li>
</ul>
</li>
<li>
<p><a href="https://search.cpan.org/perldoc/CPANPLUS">CPANPLUS</a> has been upgraded from version 0.90 to 0.9103.</p>
<p>A change to <i>cpanp-run-perl</i>
resolves <a href="http://rt.cpan.org/Public/Bug/Display.html?id=55964">RT #55964</a>
and <a href="http://rt.cpan.org/Public/Bug/Display.html?id=57106">RT #57106</a>, both
of which related to failures to install distributions that use
<pre>
<span class="w">Module::Install::DSL</span></code>
 (5.12.2).</p>
<p>A dependency on <a href="Config.html">Config</a> was not recognised as a
core module dependency.  This has been fixed.</p>
<p><a href="https://search.cpan.org/perldoc/CPANPLUS">CPANPLUS</a> now includes support for <i>META.json</i> and <i>MYMETA.json</i>.</p>
</li>
<li>
<p><a href="https://search.cpan.org/perldoc/CPANPLUS::Dist::Build">CPANPLUS::Dist::Build</a> has been upgraded from version 0.46 to 0.54.</p>
</li>
<li>
<p><a href="Data/Dumper.html">Data::Dumper</a> has been upgraded from version 2.125 to 2.130_02.</p>
<p>The indentation used to be off when <pre>
<span class="i">$Data::Dumper::Terse</span></code>
 was set.  This
has been fixed [perl #73604].</p>
<p>This upgrade also fixes a crash when using custom sort functions that might
cause the stack to change [perl #74170].</p>
<p><a href="https://search.cpan.org/perldoc/Dumpxs">Dumpxs</a> no longer crashes with globs returned by <pre>
<span class="i">*$io_ref</span></code>

[perl #72332].</p>
</li>
<li>
<p><a href="https://search.cpan.org/perldoc/DB_File">DB_File</a> has been upgraded from version 1.820 to 1.821.</p>
</li>
<li>
<p><a href="DBM_Filter.html">DBM_Filter</a> has been upgraded from version 0.03 to 0.04.</p>
</li>
<li>
<p><a href="https://search.cpan.org/perldoc/Devel::DProf">Devel::DProf</a> has been upgraded from version 20080331.00 to 20110228.00.</p>
<p>Merely loading <a href="https://search.cpan.org/perldoc/Devel::DProf">Devel::DProf</a> now no longer triggers profiling to start.
Both <pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">Devel::DProf</span></code>
 and <code class="inline">perl -d:DProf ...</code> behave as before and start
the profiler.</p>
<p><strong>NOTE</strong>: <a href="https://search.cpan.org/perldoc/Devel::DProf">Devel::DProf</a> is deprecated and will be removed from a future
version of Perl.  We strongly recommend that you install and use
<a href="https://search.cpan.org/perldoc/Devel::NYTProf">Devel::NYTProf</a> instead, as it offers significantly improved
profiling and reporting.</p>
</li>
<li>
<p><a href="Devel/Peek.html">Devel::Peek</a> has been upgraded from version 1.04 to 1.07.</p>
</li>
<li>
<p><a href="Devel/SelfStubber.html">Devel::SelfStubber</a> has been upgraded from version 1.03 to 1.05.</p>
</li>
<li>
<p><a href="diagnostics.html">diagnostics</a> has been upgraded from version 1.19 to 1.22.</p>
<p>It now renders pod links slightly better, and has been taught to find
descriptions for messages that share their descriptions with other
messages.</p>
</li>
<li>
<p><a href="Digest/MD5.html">Digest::MD5</a> has been upgraded from version 2.39 to 2.51.</p>
<p>It is now safe to use this module in combination with threads.</p>
</li>
<li>
<p><a href="Digest/SHA.html">Digest::SHA</a> has been upgraded from version 5.47 to 5.61.</p>
<p><pre>
<span class="w">shasum</span></code>
 now more closely mimics <i>sha1sum(1)</i>/<i>md5sum(1)</i>.</p>
<p><pre>
<span class="w">addfile</span></code>
 accepts all POSIX filenames.</p>
<p>New SHA-512/224 and SHA-512/256 transforms (ref. NIST Draft FIPS 180-4
[February 2011])</p>
</li>
<li>
<p><a href="DirHandle.html">DirHandle</a> has been upgraded from version 1.03 to 1.04.</p>
</li>
<li>
<p><a href="Dumpvalue.html">Dumpvalue</a> has been upgraded from version 1.13 to 1.16.</p>
</li>
<li>
<p><a href="DynaLoader.html">DynaLoader</a> has been upgraded from version 1.10 to 1.13.</p>
<p>It fixes a buffer overflow when passed a very long file name.</p>
<p>It no longer inherits from <a href="AutoLoader.html">AutoLoader</a>; hence it no longer
produces weird error messages for unsuccessful method calls on classes that
inherit from <a href="DynaLoader.html">DynaLoader</a> [perl #84358].</p>
</li>
<li>
<p><a href="Encode.html">Encode</a> has been upgraded from version 2.39 to 2.42.</p>
<p>Now, all 66 Unicode non-characters are treated the same way U+FFFF has
always been treated: in cases when it was disallowed, all 66 are
disallowed, and in cases where it warned, all 66 warn.</p>
</li>
<li>
<p><a href="Env.html">Env</a> has been upgraded from version 1.01 to 1.02.</p>
</li>
<li>
<p><a href="Errno.html">Errno</a> has been upgraded from version 1.11 to 1.13.</p>
<p>The implementation of <a href="Errno.html">Errno</a> has been refactored to use about 55% less memory.</p>
<p>On some platforms with unusual header files, like Win32 <i>gcc(1)</i> using <pre>
<span class="w">mingw64</span></code>

headers, some constants that weren't actually error numbers have been exposed
by <a href="Errno.html">Errno</a>.  This has been fixed [perl #77416].</p>
</li>
<li>
<p><a href="Exporter.html">Exporter</a> has been upgraded from version 5.64_01 to 5.64_03.</p>
<p>Exporter no longer overrides <pre>
<span class="i">$SIG</span>{<span class="w">__WARN__</span>}</code>
 [perl #74472]</p>
</li>
<li>
<p><a href="ExtUtils/CBuilder.html">ExtUtils::CBuilder</a> has been upgraded from version 0.27 to 0.280203.</p>
</li>
<li>
<p><a href="ExtUtils/Command.html">ExtUtils::Command</a> has been upgraded from version 1.16 to 1.17.</p>
</li>
<li>
<p><a href="ExtUtils/Constant.html">ExtUtils::Constant</a> has been upgraded from 0.22 to 0.23.</p>
<p>The <a href="functions/AUTOLOAD.html">AUTOLOAD</a> helper code generated by <pre>
<span class="w">ExtUtils::Constant::ProxySubs</span></code>

can now croak() for missing constants, or generate a complete <code class="inline"><a class="l_k" href="functions/AUTOLOAD.html">AUTOLOAD</a></code>
subroutine in XS, allowing simplification of many modules that use it
(<a href="Fcntl.html">Fcntl</a>, <a href="File/Glob.html">File::Glob</a>, <a href="https://search.cpan.org/perldoc/GDBM_File">GDBM_File</a>, <a href="I18N/Langinfo.html">I18N::Langinfo</a>, <a href="POSIX.html">POSIX</a>,
<a href="Socket.html">Socket</a>).</p>
<p><a href="https://search.cpan.org/perldoc/ExtUtils::Constant::ProxySubs">ExtUtils::Constant::ProxySubs</a> can now optionally push the names of all
constants onto the package's <pre>
<span class="i">@EXPORT_OK</span></code>
.</p>
</li>
<li>
<p><a href="ExtUtils/Install.html">ExtUtils::Install</a> has been upgraded from version 1.55 to 1.56.</p>
</li>
<li>
<p><a href="ExtUtils/MakeMaker.html">ExtUtils::MakeMaker</a> has been upgraded from version 6.56 to 6.57_05.</p>
</li>
<li>
<p><a href="ExtUtils/Manifest.html">ExtUtils::Manifest</a> has been upgraded from version 1.57 to 1.58.</p>
</li>
<li>
<p><a href="ExtUtils/ParseXS.html">ExtUtils::ParseXS</a> has been upgraded from version 2.21 to 2.2210.</p>
</li>
<li>
<p><a href="Fcntl.html">Fcntl</a> has been upgraded from version 1.06 to 1.11.</p>
</li>
<li>
<p><a href="File/Basename.html">File::Basename</a> has been upgraded from version 2.78 to 2.82.</p>
</li>
<li>
<p><a href="https://search.cpan.org/perldoc/File::CheckTree">File::CheckTree</a> has been upgraded from version 4.4 to 4.41.</p>
</li>
<li>
<p><a href="File/Copy.html">File::Copy</a> has been upgraded from version 2.17 to 2.21.</p>
</li>
<li>
<p><a href="File/DosGlob.html">File::DosGlob</a> has been upgraded from version 1.01 to 1.04.</p>
<p>It allows patterns containing literal parentheses: they no longer need to
be escaped.  On Windows, it no longer
adds an extra <i>./</i> to file names
returned when the pattern is a relative glob with a drive specification,
like <i>C:*.pl</i> [perl #71712].</p>
</li>
<li>
<p><a href="File/Fetch.html">File::Fetch</a> has been upgraded from version 0.24 to 0.32.</p>
<p><a href="https://search.cpan.org/perldoc/HTTP::Lite">HTTP::Lite</a> is now supported for the "http" scheme.</p>
<p>The <i>fetch(1)</i> utility is supported on FreeBSD, NetBSD, and
Dragonfly BSD for the <pre>
<span class="w">http</span></code>
 and <pre>
<span class="w">ftp</span></code>
 schemes.</p>
</li>
<li>
<p><a href="File/Find.html">File::Find</a> has been upgraded from version 1.15 to 1.19.</p>
<p>It improves handling of backslashes on Windows, so that paths like
<i>C:\dir\/file</i> are no longer generated [perl #71710].</p>
</li>
<li>
<p><a href="File/Glob.html">File::Glob</a> has been upgraded from version 1.07 to 1.12.</p>
</li>
<li>
<p><a href="File/Spec.html">File::Spec</a> has been upgraded from version 3.31 to 3.33.</p>
<p>Several portability fixes were made in <a href="File/Spec/VMS.html">File::Spec::VMS</a>: a colon is now
recognized as a delimiter in native filespecs; caret-escaped delimiters are
recognized for better handling of extended filespecs; catpath() returns
an empty directory rather than the current directory if the input directory
name is empty; and abs2rel() properly handles Unix-style input (5.12.2).</p>
</li>
<li>
<p><a href="File/stat.html">File::stat</a> has been upgraded from 1.02 to 1.05.</p>
<p>The <pre>
-x</code>
 and <code class="inline"><a class="l_k" href="functions/-X.html">-X</a></code> file test operators now work correctly when run
by the superuser.</p>
</li>
<li>
<p><a href="Filter/Simple.html">Filter::Simple</a> has been upgraded from version 0.84 to 0.86.</p>
</li>
<li>
<p><a href="https://search.cpan.org/perldoc/GDBM_File">GDBM_File</a> has been upgraded from 1.10 to 1.14.</p>
<p>This fixes a memory leak when DBM filters are used.</p>
</li>
<li>
<p><a href="Hash/Util.html">Hash::Util</a> has been upgraded from 0.07 to 0.11.</p>
<p><a href="Hash/Util.html">Hash::Util</a> no longer emits spurious "uninitialized" warnings when
recursively locking hashes that have undefined values [perl #74280].</p>
</li>
<li>
<p><a href="Hash/Util/FieldHash.html">Hash::Util::FieldHash</a> has been upgraded from version 1.04 to 1.09.</p>
</li>
<li>
<p><a href="I18N/Collate.html">I18N::Collate</a> has been upgraded from version 1.01 to 1.02.</p>
</li>
<li>
<p><a href="I18N/Langinfo.html">I18N::Langinfo</a> has been upgraded from version 0.03 to 0.08.</p>
<p>langinfo() now defaults to using <pre>
<span class="i">$_</span></code>
 if there is no argument given, just
as the documentation has always claimed.</p>
</li>
<li>
<p><a href="I18N/LangTags.html">I18N::LangTags</a> has been upgraded from version 0.35 to 0.35_01.</p>
</li>
<li>
<p><a href="if.html">if</a> has been upgraded from version 0.05 to 0.0601.</p>
</li>
<li>
<p><a href="IO.html">IO</a> has been upgraded from version 1.25_02 to 1.25_04.</p>
<p>This version of <a href="IO.html">IO</a> includes a new <a href="IO/Select.html">IO::Select</a>, which now allows <a href="IO/Handle.html">IO::Handle</a>
objects (and objects in derived classes) to be removed from an <a href="IO/Select.html">IO::Select</a> set
even if the underlying file descriptor is closed or invalid.</p>
</li>
<li>
<p><a href="IPC/Cmd.html">IPC::Cmd</a> has been upgraded from version 0.54 to 0.70.</p>
<p>Resolves an issue with splitting Win32 command lines.  An argument
consisting of the single character "0" used to be omitted (CPAN RT #62961).</p>
</li>
<li>
<p><a href="IPC/Open3.html">IPC::Open3</a> has been upgraded from 1.05 to 1.09.</p>
<p>open3() now produces an error if the <code class="inline"><a class="l_k" href="functions/exec.html">exec</a></code> call fails, allowing this
condition to be distinguished from a child process that exited with a
non-zero status [perl #72016].</p>
<p>The internal xclose() routine now knows how to handle file descriptors as
documented, so duplicating <pre>
<span class="w">STDIN</span></code>
 in a child process using its file
descriptor now works [perl #76474].</p>
</li>
<li>
<p><a href="IPC/SysV.html">IPC::SysV</a> has been upgraded from version 2.01 to 2.03.</p>
</li>
<li>
<p><a href="lib.html">lib</a> has been upgraded from version 0.62 to 0.63.</p>
</li>
<li>
<p><a href="Locale/Maketext.html">Locale::Maketext</a> has been upgraded from version 1.14 to 1.19.</p>
<p><a href="Locale/Maketext.html">Locale::Maketext</a> now supports external caches.</p>
<p>This upgrade also fixes an infinite loop in
<pre>
<span class="i">Locale::Maketext::Guts::_compile</span><span class="s">(</span><span class="s">)</span></code>
 when
working with tainted values (CPAN RT #40727).</p>
<p><pre>
<span class="i">-&gt;maketext</span></code>
 calls now back up and restore <pre>
<span class="i">$@</span></code>
 so error
messages are not suppressed (CPAN RT #34182).</p>
</li>
<li>
<p><a href="https://search.cpan.org/perldoc/Log::Message">Log::Message</a> has been upgraded from version 0.02 to 0.04.</p>
</li>
<li>
<p><a href="https://search.cpan.org/perldoc/Log::Message::Simple">Log::Message::Simple</a> has been upgraded from version 0.06 to 0.08.</p>
</li>
<li>
<p><a href="Math/BigInt.html">Math::BigInt</a> has been upgraded from version 1.89_01 to 1.994.</p>
<p>This fixes, among other things, incorrect results when computing binomial
coefficients [perl #77640].</p>
<p>It also prevents <code class="inline"><a class="l_k" href="functions/sqrt.html">sqrt($int)</a></code> from crashing under <pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">bigrat</span></code>
.
[perl #73534].</p>
</li>
<li>
<p><a href="Math/BigInt/FastCalc.html">Math::BigInt::FastCalc</a> has been upgraded from version 0.19 to 0.28.</p>
</li>
<li>
<p><a href="Math/BigRat.html">Math::BigRat</a> has been upgraded from version 0.24 to 0.26_02.</p>
</li>
<li>
<p><a href="Memoize.html">Memoize</a> has been upgraded from version 1.01_03 to 1.02.</p>
</li>
<li>
<p><a href="MIME/Base64.html">MIME::Base64</a> has been upgraded from 3.08 to 3.13.</p>
<p>Includes new functions to calculate the length of encoded and decoded
base64 strings.</p>
<p>Now provides encode_base64url() and decode_base64url() functions to process
the base64 scheme for "URL applications".</p>
</li>
<li>
<p><a href="https://search.cpan.org/perldoc/Module::Build">Module::Build</a> has been upgraded from version 0.3603 to 0.3800.</p>
<p>A notable change is the deprecation of several modules.
<a href="https://search.cpan.org/perldoc/Module::Build::Version">Module::Build::Version</a> has been deprecated and <a href="https://search.cpan.org/perldoc/Module::Build">Module::Build</a> now
relies on the <a href="version.html">version</a> pragma directly.  <a href="https://search.cpan.org/perldoc/Module::Build::ModuleInfo">Module::Build::ModuleInfo</a> has
been deprecated in favor of a standalone copy called <a href="Module/Metadata.html">Module::Metadata</a>.
<a href="https://search.cpan.org/perldoc/Module::Build::YAML">Module::Build::YAML</a> has been deprecated in favor of <a href="CPAN/Meta/YAML.html">CPAN::Meta::YAML</a>.</p>
<p><a href="https://search.cpan.org/perldoc/Module::Build">Module::Build</a> now also generates <i>META.json</i> and <i>MYMETA.json</i> files
in accordance with version 2 of the CPAN distribution metadata specification,
<a href="CPAN/Meta/Spec.html">CPAN::Meta::Spec</a>.  The older format <i>META.yml</i> and <i>MYMETA.yml</i> files are
still generated.</p>
</li>
<li>
<p><a href="Module/CoreList.html">Module::CoreList</a> has been upgraded from version 2.29 to 2.47.</p>
<p>Besides listing the updated core modules of this release, it also stops listing
the <pre>
<span class="w">Filespec</span></code>
 module.  That module never existed in core.  The scripts
generating <a href="Module/CoreList.html">Module::CoreList</a> confused it with <a href="https://search.cpan.org/perldoc/VMS::Filespec">VMS::Filespec</a>, which actually
is a core module as of Perl 5.8.7.</p>
</li>
<li>
<p><a href="Module/Load.html">Module::Load</a> has been upgraded from version 0.16 to 0.18.</p>
</li>
<li>
<p><a href="Module/Load/Conditional.html">Module::Load::Conditional</a> has been upgraded from version 0.34 to 0.44.</p>
</li>
<li>
<p>The <a href="mro.html">mro</a> pragma has been upgraded from version 1.02 to 1.07.</p>
</li>
<li>
<p><a href="https://search.cpan.org/perldoc/NDBM_File">NDBM_File</a> has been upgraded from version 1.08 to 1.12.</p>
<p>This fixes a memory leak when DBM filters are used.</p>
</li>
<li>
<p><a href="Net/Ping.html">Net::Ping</a> has been upgraded from version 2.36 to 2.38.</p>
</li>
<li>
<p><a href="NEXT.html">NEXT</a> has been upgraded from version 0.64 to 0.65.</p>
</li>
<li>
<p><a href="https://search.cpan.org/perldoc/Object::Accessor">Object::Accessor</a> has been upgraded from version 0.36 to 0.38.</p>
</li>
<li>
<p><a href="https://search.cpan.org/perldoc/ODBM_File">ODBM_File</a> has been upgraded from version 1.07 to 1.10.</p>
<p>This fixes a memory leak when DBM filters are used.</p>
</li>
<li>
<p><a href="Opcode.html">Opcode</a> has been upgraded from version 1.15 to 1.18.</p>
</li>
<li>
<p>The <a href="overload.html">overload</a> pragma has been upgraded from 1.10 to 1.13.</p>
<p><pre>
<span class="w">overload::Method</span></code>
 can now handle subroutines that are themselves blessed
into overloaded classes [perl #71998].</p>
<p>The documentation has greatly improved.  See <a href="#Documentation">Documentation</a> below.</p>
</li>
<li>
<p><a href="Params/Check.html">Params::Check</a> has been upgraded from version 0.26 to 0.28.</p>
</li>
<li>
<p>The <a href="parent.html">parent</a> pragma has been upgraded from version 0.223 to 0.225.</p>
</li>
<li>
<p><a href="Parse/CPAN/Meta.html">Parse::CPAN::Meta</a> has been upgraded from version 1.40 to 1.4401.</p>
<p>The latest Parse::CPAN::Meta can now read YAML and JSON files using
<a href="CPAN/Meta/YAML.html">CPAN::Meta::YAML</a> and <a href="JSON/PP.html">JSON::PP</a>, which are now part of the Perl core.</p>
</li>
<li>
<p><a href="PerlIO/encoding.html">PerlIO::encoding</a> has been upgraded from version 0.12 to 0.14.</p>
</li>
<li>
<p><a href="PerlIO/scalar.html">PerlIO::scalar</a> has been upgraded from 0.07 to 0.11.</p>
<p>A read() after a seek() beyond the end of the string no longer thinks it
has data to read [perl #78716].</p>
</li>
<li>
<p><a href="PerlIO/via.html">PerlIO::via</a> has been upgraded from version 0.09 to 0.11.</p>
</li>
<li>
<p><a href="Pod/Html.html">Pod::Html</a> has been upgraded from version 1.09 to 1.11.</p>
</li>
<li>
<p><a href="https://search.cpan.org/perldoc/Pod::LaTeX">Pod::LaTeX</a> has been upgraded from version 0.58 to 0.59.</p>
</li>
<li>
<p><a href="Pod/Perldoc.html">Pod::Perldoc</a> has been upgraded from version 3.15_02 to 3.15_03.</p>
</li>
<li>
<p><a href="Pod/Simple.html">Pod::Simple</a> has been upgraded from version 3.13 to 3.16.</p>
</li>
<li>
<p><a href="POSIX.html">POSIX</a> has been upgraded from 1.19 to 1.24.</p>
<p>It now includes constants for POSIX signal constants.</p>
</li>
<li>
<p>The <a href="re.html">re</a> pragma has been upgraded from version 0.11 to 0.18.</p>
<p>The <pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">re</span> <span class="q">&#39;/flags&#39;</span></code>
 subpragma is new.</p>
<p>The regmust() function used to crash when called on a regular expression
belonging to a pluggable engine.  Now it croaks instead.</p>
<p>regmust() no longer leaks memory.</p>
</li>
<li>
<p><a href="Safe.html">Safe</a> has been upgraded from version 2.25 to 2.29.</p>
<p>Coderefs returned by reval() and rdo() are now wrapped via
wrap_code_refs() (5.12.1).</p>
<p>This fixes a possible infinite loop when looking for coderefs.</p>
<p>It adds several <pre>
<span class="w">version::vxs::</span>*</code>
 routines to the default share.</p>
</li>
<li>
<p><a href="SDBM_File.html">SDBM_File</a> has been upgraded from version 1.06 to 1.09.</p>
</li>
<li>
<p><a href="SelfLoader.html">SelfLoader</a> has been upgraded from 1.17 to 1.18.</p>
<p>It now works in taint mode [perl #72062].</p>
</li>
<li>
<p>The <a href="sigtrap.html">sigtrap</a> pragma has been upgraded from version 1.04 to 1.05.</p>
<p>It no longer tries to modify read-only arguments when generating a
backtrace [perl #72340].</p>
</li>
<li>
<p><a href="Socket.html">Socket</a> has been upgraded from version 1.87 to 1.94.</p>
<p>See <a href="#Improved-IPv6-support">Improved IPv6 support</a> above.</p>
</li>
<li>
<p><a href="Storable.html">Storable</a> has been upgraded from version 2.22 to 2.27.</p>
<p>Includes performance improvement for overloaded classes.</p>
<p>This adds support for serialising code references that contain UTF-8 strings
correctly.  The <a href="Storable.html">Storable</a> minor version
number changed as a result, meaning that
<a href="Storable.html">Storable</a> users who set <pre>
<span class="i">$Storable::accept_future_minor</span></code>
 to a <pre>
<span class="w">FALSE</span></code>
 value
will see errors (see <a href="Storable.html#FORWARD-COMPATIBILITY">FORWARD COMPATIBILITY in Storable</a> for more details).</p>
<p>Freezing no longer gets confused if the Perl stack gets reallocated
during freezing [perl #80074].</p>
</li>
<li>
<p><a href="Sys/Hostname.html">Sys::Hostname</a> has been upgraded from version 1.11 to 1.16.</p>
</li>
<li>
<p><a href="Term/ANSIColor.html">Term::ANSIColor</a> has been upgraded from version 2.02 to 3.00.</p>
</li>
<li>
<p><a href="https://search.cpan.org/perldoc/Term::UI">Term::UI</a> has been upgraded from version 0.20 to 0.26.</p>
</li>
<li>
<p><a href="Test/Harness.html">Test::Harness</a> has been upgraded from version 3.17 to 3.23.</p>
</li>
<li>
<p><a href="Test/Simple.html">Test::Simple</a> has been upgraded from version 0.94 to 0.98.</p>
<p>Among many other things, subtests without a <pre>
<span class="w">plan</span></code>
 or <pre>
<span class="w">no_plan</span></code>
 now have an
implicit done_testing() added to them.</p>
</li>
<li>
<p><a href="Thread/Semaphore.html">Thread::Semaphore</a> has been upgraded from version 2.09 to 2.12.</p>
<p>It provides two new methods that give more control over the decrementing of
semaphores: <pre>
<span class="w">down_nb</span></code>
 and <pre>
<span class="w">down_force</span></code>
.</p>
</li>
<li>
<p><a href="Thread/Queue.html">Thread::Queue</a> has been upgraded from version 2.11 to 2.12.</p>
</li>
<li>
<p>The <a href="threads.html">threads</a> pragma has been upgraded from version 1.75 to 1.83.</p>
</li>
<li>
<p>The <a href="threads/shared.html">threads::shared</a> pragma has been upgraded from version 1.32 to 1.37.</p>
</li>
<li>
<p><a href="Tie/Hash.html">Tie::Hash</a> has been upgraded from version 1.03 to 1.04.</p>
<p>Calling <pre>
<span class="w">Tie::Hash</span><span class="w">-&gt;TIEHASH</span><span class="s">(</span><span class="s">)</span></code>
 used to loop forever.  Now it <pre>
<span class="w">croak</span></code>
s.</p>
</li>
<li>
<p><a href="Tie/Hash/NamedCapture.html">Tie::Hash::NamedCapture</a> has been upgraded from version 0.06 to 0.08.</p>
</li>
<li>
<p><a href="Tie/RefHash.html">Tie::RefHash</a> has been upgraded from version 1.38 to 1.39.</p>
</li>
<li>
<p><a href="Time/HiRes.html">Time::HiRes</a> has been upgraded from version 1.9719 to 1.9721_01.</p>
</li>
<li>
<p><a href="Time/Local.html">Time::Local</a> has been upgraded from version 1.1901_01 to 1.2000.</p>
</li>
<li>
<p><a href="Time/Piece.html">Time::Piece</a> has been upgraded from version 1.15_01 to 1.20_01.</p>
</li>
<li>
<p><a href="Unicode/Collate.html">Unicode::Collate</a> has been upgraded from version 0.52_01 to 0.73.</p>
<p><a href="Unicode/Collate.html">Unicode::Collate</a> has been updated to use Unicode 6.0.0.</p>
<p><a href="Unicode/Collate/Locale.html">Unicode::Collate::Locale</a> now supports a plethora of new locales: <i>ar, be,
bg, de__phonebook, hu, hy, kk, mk, nso, om, tn, vi, hr, ig, ja, ko, ru, sq, 
se, sr, to, uk, zh, zh__big5han, zh__gb2312han, zh__pinyin</i>, and <i>zh__stroke</i>.</p>
<p>The following modules have been added:</p>
<p><a href="Unicode/Collate/CJK/Big5.html">Unicode::Collate::CJK::Big5</a> for <pre>
<span class="w">zh__big5han</span></code>
 which makes 
tailoring of CJK Unified Ideographs in the order of CLDR's big5han ordering.</p>
<p><a href="Unicode/Collate/CJK/GB2312.html">Unicode::Collate::CJK::GB2312</a> for <pre>
<span class="w">zh__gb2312han</span></code>
 which makes
tailoring of CJK Unified Ideographs in the order of CLDR's gb2312han ordering.</p>
<p><a href="Unicode/Collate/CJK/JISX0208.html">Unicode::Collate::CJK::JISX0208</a> which makes tailoring of 6355 kanji 
(CJK Unified Ideographs) in the JIS X 0208 order.</p>
<p><a href="Unicode/Collate/CJK/Korean.html">Unicode::Collate::CJK::Korean</a> which makes tailoring of CJK Unified Ideographs 
in the order of CLDR's Korean ordering.</p>
<p><a href="Unicode/Collate/CJK/Pinyin.html">Unicode::Collate::CJK::Pinyin</a> for <pre>
<span class="w">zh__pinyin</span></code>
 which makes
tailoring of CJK Unified Ideographs in the order of CLDR's pinyin ordering.</p>
<p><a href="Unicode/Collate/CJK/Stroke.html">Unicode::Collate::CJK::Stroke</a> for <pre>
<span class="w">zh__stroke</span></code>
 which makes
tailoring of CJK Unified Ideographs in the order of CLDR's stroke ordering.</p>
<p>This also sees the switch from using the pure-Perl version of this
module to the XS version.</p>
</li>
<li>
<p><a href="Unicode/Normalize.html">Unicode::Normalize</a> has been upgraded from version 1.03 to 1.10.</p>
</li>
<li>
<p><a href="Unicode/UCD.html">Unicode::UCD</a> has been upgraded from version 0.27 to 0.32.</p>
<p>A new function, Unicode::UCD::num(), has been added.  This function
returns the numeric value of the string passed it or <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> if the string
in its entirety has no "safe" numeric value.  (For more detail, and for the
definition of "safe", see <a href="Unicode/UCD.html#num()">num() in Unicode::UCD</a>.)</p>
<p>This upgrade also includes several bug fixes:</p>
<ul>
<li><a id="charinfo()"></a><strong>charinfo()</strong>
<ul>
<li>
<p>It is now updated to Unicode Version 6.0.0 with <i>Corrigendum #8</i>, 
excepting that, just as with Perl 5.14, the code point at U+1F514 has no name.</p>
</li>
<li>
<p>Hangul syllable code points have the correct names, and their
decompositions are always output without requiring <a href="https://search.cpan.org/perldoc/Lingua::KO::Hangul::Util">Lingua::KO::Hangul::Util</a>
to be installed.</p>
</li>
<li>
<p>CJK (Chinese-Japanese-Korean) code points U+2A700 to U+2B734
and U+2B740 to U+2B81D are now properly handled.</p>
</li>
<li>
<p>Numeric values are now output for those CJK code points that have them.</p>
</li>
<li>
<p>Names output for code points with multiple aliases are now the
corrected ones.</p>
</li>
</ul>
</li>
<li><a id="charscript()"></a><strong>charscript()</strong>
<p>This now correctly returns "Unknown" instead of <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> for the script
of a code point that hasn't been assigned another one.</p>
</li>
<li><a id="charblock()"></a><strong>charblock()</strong>
<p>This now correctly returns "No_Block" instead of <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> for the block
of a code point that hasn't been assigned to another one.</p>
</li>
</ul>
</li>
<li>
<p>The <a href="version.html">version</a> pragma has been upgraded from 0.82 to 0.88.</p>
<p>Because of a bug, now fixed, the is_strict() and is_lax() functions did not
work when exported (5.12.1).</p>
</li>
<li>
<p>The <a href="warnings.html">warnings</a> pragma has been upgraded from version 1.09 to 1.12.</p>
<p>Calling <pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">warnings</span></code>
 without arguments is now significantly more efficient.</p>
</li>
<li>
<p>The <a href="warnings/register.html">warnings::register</a> pragma has been upgraded from version 1.01 to 1.02.</p>
<p>It is now possible to register warning categories other than the names of
packages using <a href="warnings/register.html">warnings::register</a>.  See <i>perllexwarn(1)</i> for more information.</p>
</li>
<li>
<p><a href="XSLoader.html">XSLoader</a> has been upgraded from version 0.10 to 0.13.</p>
</li>
<li>
<p><a href="https://search.cpan.org/perldoc/VMS::DCLsym">VMS::DCLsym</a> has been upgraded from version 1.03 to 1.05.</p>
<p>Two bugs have been fixed [perl #84086]:</p>
<p>The symbol table name was lost when tying a hash, due to a thinko in
<pre>
<span class="w">TIEHASH</span></code>
.  The result was that all tied hashes interacted with the
local symbol table.</p>
<p>Unless a symbol table name had been explicitly specified in the call
to the constructor, querying the special key <pre>
<span class="j">:</span><span class="w">LOCAL</span></code>
 failed to
identify objects connected to the local symbol table.</p>
</li>
<li>
<p>The <a href="https://search.cpan.org/perldoc/Win32">Win32</a> module has been upgraded from version 0.39 to 0.44.</p>
<p>This release has several new functions: Win32::GetSystemMetrics(),
Win32::GetProductInfo(), Win32::GetOSDisplayName().</p>
<p>The names returned by Win32::GetOSName() and Win32::GetOSDisplayName()
have been corrected.</p>
</li>
<li>
<p><a href="https://search.cpan.org/perldoc/XS::Typemap">XS::Typemap</a> has been upgraded from version 0.03 to 0.05.</p>
</li>
</ul>
<a id="Removed-Modules-and-Pragmata"></a><h3 class='h3' >Removed Modules and Pragmata</h3>
<p>As promised in Perl 5.12.0's release notes, the following modules have
been removed from the core distribution, and if needed should be installed
from CPAN instead.</p>
<ul>
<li>
<p><a href="https://search.cpan.org/perldoc/Class::ISA">Class::ISA</a> has been removed from the Perl core.  Prior version was 0.36.</p>
</li>
<li>
<p><a href="https://search.cpan.org/perldoc/Pod::Plainer">Pod::Plainer</a> has been removed from the Perl core.  Prior version was 1.02.</p>
</li>
<li>
<p><a href="https://search.cpan.org/perldoc/Switch">Switch</a> has been removed from the Perl core.  Prior version was 2.16.</p>
</li>
</ul>
<p>The removal of <a href="https://search.cpan.org/perldoc/Shell">Shell</a> has been deferred until after 5.14, as the
implementation of <a href="https://search.cpan.org/perldoc/Shell">Shell</a> shipped with 5.12.0 did not correctly issue the
warning that it was to be removed from core.</p>
<a id="Documentation"></a><h2 class='h2' >Documentation</h2>
<a id="New-Documentation"></a><h3 class='h3' >New Documentation</h3>
<a id="the-perlgpl-manpage"></a><h4 class='h4' ><a href="perlgpl.html">perlgpl</a></h4>
<p><a href="perlgpl.html">perlgpl</a> has been updated to contain GPL version 1, as is included in the
<i>README</i> distributed with Perl (5.12.1).</p>
<a id="Perl-5.12.x-delta-files"></a><h4 class='h4' >Perl 5.12.x delta files</h4>
<p>The perldelta files for Perl 5.12.1 to 5.12.3 have been added from the
maintenance branch: <a href="perl5121delta.html">perl5121delta</a>, <a href="perl5122delta.html">perl5122delta</a>, <a href="perl5123delta.html">perl5123delta</a>.</p>
<a id="the-perlpodstyle-manpage"></a><h4 class='h4' ><a href="perlpodstyle.html">perlpodstyle</a></h4>
<p>New style guide for POD documentation,
split mostly from the NOTES section of the <i>pod2man(1)</i> manpage.</p>
<a id="the-perlsource-manpage%2c-the-perlinterp-manpage%2c-the-perlhacktut-manpage%2c-and-the-perlhacktips-manpage"></a><h4 class='h4' ><a href="perlsource.html">perlsource</a>, <a href="perlinterp.html">perlinterp</a>, <a href="perlhacktut.html">perlhacktut</a>, and <a href="perlhacktips.html">perlhacktips</a></h4>
<p>See <a href="#perlhack-and-perlrepository-revamp">perlhack and perlrepository revamp</a>, below.</p>
<a id="Changes-to-Existing-Documentation"></a><h3 class='h3' >Changes to Existing Documentation</h3>
<a id="the-perlmodlib-manpage-is-now-complete"></a><h4 class='h4' ><a href="perlmodlib.html">perlmodlib</a> is now complete</h4>
<p>The <a href="perlmodlib.html">perlmodlib</a> manpage that came with Perl 5.12.0 was missing several
modules due to a bug in the script that generates the list.  This has been
fixed [perl #74332] (5.12.1).</p>
<a id="Replace-incorrect-tr%2f%2f%2f-table-in-the-perlebcdic-manpage"></a><h4 class='h4' >Replace incorrect tr/// table in <a href="perlebcdic.html">perlebcdic</a></h4>
<p><a href="perlebcdic.html">perlebcdic</a> contains a helpful table to use in <code class="inline"><a class="l_k" href="functions/tr.html">tr///</a></code> to convert
between EBCDIC and Latin1/ASCII.  The table was the inverse of the one
it describes, though the code that used the table worked correctly for
the specific example given.</p>
<p>The table has been corrected and the sample code changed to correspond.</p>
<p>The table has also been changed to hex from octal, and the recipes in the
pod have been altered to print out leading zeros to make all values
the same length.</p>
<a id="Tricks-for-user-defined-casing"></a><h4 class='h4' >Tricks for user-defined casing</h4>
<p><a href="perlunicode.html">perlunicode</a> now contains an explanation of how to override, mangle
and otherwise tweak the way Perl handles upper-, lower- and other-case
conversions on Unicode data, and how to provide scoped changes to alter
one's own code's behaviour without stomping on anybody else's.</p>
<a id="INSTALL-explicitly-states-that-Perl-requires-a-C89-compiler"></a><h4 class='h4' >INSTALL explicitly states that Perl requires a C89 compiler</h4>
<p>This was already true, but it's now Officially Stated For The Record
(5.12.2).</p>
<a id="Explanation-of-%5cx_HH_-and-%5co_OOO_-escapes"></a><h4 class='h4' >Explanation of <code class="inline">\x<i>HH</i></code> and <code class="inline">\o<i>OOO</i></code> escapes</h4>
<p><a href="perlop.html">perlop</a> has been updated with more detailed explanation of these two
character escapes.</p>
<a id="*-0_NNN_*-switch"></a><h4 class='h4' ><strong>-0<i>NNN</i></strong> switch</h4>
<p>In <a href="perlrun.html">perlrun</a>, the behaviour of the <strong>-0NNN</strong> switch for <strong>-0400</strong> or higher
has been clarified (5.12.2).</p>
<a id="Maintenance-policy"></a><h4 class='h4' >Maintenance policy</h4>
<p><a href="perlpolicy.html">perlpolicy</a> now contains the policy on what patches are acceptable for
maintenance branches (5.12.1).</p>
<a id="Deprecation-policy"></a><h4 class='h4' >Deprecation policy</h4>
<p><a href="perlpolicy.html">perlpolicy</a> now contains the policy on compatibility and deprecation
along with definitions of terms like "deprecation" (5.12.2).</p>
<a id="New-descriptions-in-the-perldiag-manpage"></a><h4 class='h4' >New descriptions in <a href="perldiag.html">perldiag</a></h4>
<p>The following existing diagnostics are now documented:</p>
<ul>
<li>
<p><a href="perldiag.html#Ambiguous-use-of-%25c-resolved-as-operator-%25c">Ambiguous use of %c resolved as operator %c</a></p>
</li>
<li>
<p><a href="perldiag.html#Ambiguous-use-of-%25c%7b%25s%7d-resolved-to-%25c%25s">Ambiguous use of %c{%s} resolved to %c%s</a></p>
</li>
<li>
<p><a href="perldiag.html#Ambiguous-use-of-%25c%7b%25s%5b...%5d%7d-resolved-to-%25c%25s%5b...%5d">Ambiguous use of %c{%s[...]} resolved to %c%s[...]</a></p>
</li>
<li>
<p><a href="perldiag.html#Ambiguous-use-of-%25c%7b%25s%7b...%7d%7d-resolved-to-%25c%25s%7b...%7d">Ambiguous use of %c{%s{...}} resolved to %c%s{...}</a></p>
</li>
<li>
<p><a href="perldiag.html#Ambiguous-use-of--%25s-resolved-as--%26%25s()">Ambiguous use of -%s resolved as -&amp;%s()</a></p>
</li>
<li>
<p><a href="perldiag.html#Invalid-strict-version-format-(%25s)">Invalid strict version format (%s)</a></p>
</li>
<li>
<p><a href="perldiag.html#Invalid-version-format-(%25s)">Invalid version format (%s)</a></p>
</li>
<li>
<p><a href="perldiag.html#Invalid-version-object">Invalid version object</a></p>
</li>
</ul>
<a id="the-perlbook-manpage"></a><h4 class='h4' ><a href="perlbook.html">perlbook</a></h4>
<p><a href="perlbook.html">perlbook</a> has been expanded to cover many more popular books.</p>
<a id="SvTRUE-macro"></a><h4 class='h4' ><pre>
<span class="w">SvTRUE</span></code>
 macro</h4>
<p>The documentation for the <pre>
<span class="w">SvTRUE</span></code>
 macro in
<a href="perlapi.html">perlapi</a> was simply wrong in stating that
get-magic is not processed.  It has been corrected.</p>
<a id="op-manipulation-functions"></a><h4 class='h4' >op manipulation functions</h4>
<p>Several API functions that process optrees have been newly documented.</p>
<a id="the-perlvar-manpage-revamp"></a><h4 class='h4' ><a href="perlvar.html">perlvar</a> revamp</h4>
<p><a href="perlvar.html">perlvar</a> reorders the variables and groups them by topic.  Each variable
introduced after Perl 5.000 notes the first version in which it is 
available.  <a href="perlvar.html">perlvar</a> also has a new section for deprecated variables to
note when they were removed.</p>
<a id="Array-and-hash-slices-in-scalar-context"></a><h4 class='h4' >Array and hash slices in scalar context</h4>
<p>These are now documented in <a href="perldata.html">perldata</a>.</p>
<a id="use-locale-and-formats"></a><h4 class='h4' ><pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">locale</span></code>
 and formats</h4>
<p><a href="perlform.html">perlform</a> and <a href="perllocale.html">perllocale</a> have been corrected to state that
<pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">locale</span></code>
 affects formats.</p>
<a id="the-overload-manpage"></a><h4 class='h4' ><a href="overload.html">overload</a></h4>
<p><a href="overload.html">overload</a>'s documentation has practically undergone a rewrite.  It
is now much more straightforward and clear.</p>
<a id="perlhack-and-perlrepository-revamp"></a><h4 class='h4' >perlhack and perlrepository revamp</h4>
<p>The <a href="perlhack.html">perlhack</a> document is now much shorter, and focuses on the Perl 5
development process and submitting patches to Perl.  The technical content
has been moved to several new documents, <a href="perlsource.html">perlsource</a>, <a href="perlinterp.html">perlinterp</a>,
<a href="perlhacktut.html">perlhacktut</a>, and <a href="perlhacktips.html">perlhacktips</a>.  This technical content has 
been only lightly edited.</p>
<p>The perlrepository document has been renamed to <a href="perlgit.html">perlgit</a>.  This new
document is just a how-to on using git with the Perl source code.
Any other content that used to be in perlrepository has been moved
to <a href="perlhack.html">perlhack</a>.</p>
<a id="Time%3a%3aPiece-examples"></a><h4 class='h4' >Time::Piece examples</h4>
<p>Examples in <a href="perlfaq4.html">perlfaq4</a> have been updated to show the use of
<a href="Time/Piece.html">Time::Piece</a>.</p>
<a id="Diagnostics"></a><h2 class='h2' >Diagnostics</h2>
<p>The following additions or changes have been made to diagnostic output,
including warnings and fatal error messages.  For the complete list of
diagnostic messages, see <a href="perldiag.html">perldiag</a>.</p>
<a id="New-Diagnostics"></a><h3 class='h3' >New Diagnostics</h3>
<a id="New-Errors"></a><h4 class='h4' >New Errors</h4>
<ul>
<li><a id="Closure-prototype-called"></a><strong>Closure prototype called</strong>
<p>This error occurs when a subroutine reference passed to an attribute
handler is called, if the subroutine is a closure [perl #68560].</p>
</li>
<li><a id="Insecure-user-defined-property-%25s"></a><strong>Insecure user-defined property %s</strong>
<p>Perl detected tainted data when trying to compile a regular
expression that contains a call to a user-defined character property
function, meaning <pre>
\<span class="i">p</span><span class="s">{</span><span class="w">IsFoo</span><span class="s">}</span></code>
 or <pre>
\<span class="i">p</span><span class="s">{</span><span class="w">InFoo</span><span class="s">}</span></code>
.
See <a href="perlunicode.html#User-Defined-Character-Properties">User-Defined Character Properties in perlunicode</a> and <a href="perlsec.html">perlsec</a>.</p>
</li>
<li><a id="panic%3a-gp_free-failed-to-free-glob-pointer---something-is-repeatedly-re-creating-entries"></a><strong>panic: gp_free failed to free glob pointer - something is repeatedly re-creating entries</strong>
<p>This new error is triggered if a destructor called on an object in a
typeglob that is being freed creates a new typeglob entry containing an
object with a destructor that creates a new entry containing an object etc.</p>
</li>
<li><a id="Parsing-code-internal-error-(%25s)"></a><strong>Parsing code internal error (%s)</strong>
<p>This new fatal error is produced when parsing
code supplied by an extension violates the
parser's API in a detectable way.</p>
</li>
<li><a id="refcnt%3a-fd-%25d%25s"></a><strong>refcnt: fd %d%s</strong>
<p>This new error only occurs if a internal consistency check fails when a
pipe is about to be closed.</p>
</li>
<li><a id="Regexp-modifier-%22%2f%25c%22-may-not-appear-twice"></a><strong>Regexp modifier "/%c" may not appear twice</strong>
<p>The regular expression pattern has one of the
mutually exclusive modifiers repeated.</p>
</li>
<li><a id="Regexp-modifiers-%22%2f%25c%22-and-%22%2f%25c%22-are-mutually-exclusive"></a><strong>Regexp modifiers "/%c" and "/%c" are mutually exclusive</strong>
<p>The regular expression pattern has more than one of the mutually
exclusive modifiers.</p>
</li>
<li><a id="Using-!~-with-%25s-doesn't-make-sense"></a><strong>Using !~ with %s doesn't make sense</strong>
<p>This error occurs when <pre>
!~</code>
 is used with <code class="inline"><a class="l_k" href="functions/s.html">s///r</a></code> or <code class="inline"><a class="l_k" href="functions/y.html">y///r</a></code>.</p>
</li>
</ul>
<a id="New-Warnings"></a><h4 class='h4' >New Warnings</h4>
<ul>
<li><a id="%22%5cb%7b%22-is-deprecated%3b-use-%22%5cb%5c%7b%22-instead"></a><strong>"\b{" is deprecated; use "\b\{" instead</strong>
</li>
<li><a id="%22%5cB%7b%22-is-deprecated%3b-use-%22%5cB%5c%7b%22-instead"></a><strong>"\B{" is deprecated; use "\B\{" instead</strong>
<p>Use of an unescaped "{" immediately following a <pre>
\<span class="w">b</span></code>
 or <pre>
\<span class="w">B</span></code>
 is now
deprecated in order to reserve its use for Perl itself in a future release.</p>
</li>
<li><a id="Operation-%22%25s%22-returns-its-argument-for-..."></a><strong>Operation "%s" returns its argument for ...</strong>
<p>Performing an operation requiring Unicode semantics (such as case-folding)
on a Unicode surrogate or a non-Unicode character now triggers this
warning.</p>
</li>
<li><a id="Use-of-qw(...)-as-parentheses-is-deprecated"></a><strong>Use of qw(...) as parentheses is deprecated</strong>
<p>See <a href="#Use-of-qw(...)-as-parentheses">Use of qw(...) as parentheses</a>, above, for details.</p>
</li>
</ul>
<a id="Changes-to-Existing-Diagnostics"></a><h3 class='h3' >Changes to Existing Diagnostics</h3>
<ul>
<li>
<p>The "Variable $foo is not imported" warning that precedes a
<pre>
<span class="w">strict</span> <span class="q">&#39;vars&#39;</span></code>
 error has now been assigned the "misc" category, so that
<pre>
<a class="l_k" href="functions/no.html">no</a> <span class="w">warnings</span></code>
 will suppress it [perl #73712].</p>
</li>
<li>
<p>warn() and die() now produce "Wide character" warnings when fed a
character outside the byte range if <pre>
<span class="w">STDERR</span></code>
 is a byte-sized handle.</p>
</li>
<li>
<p>The "Layer does not match this perl" error message has been replaced with
these more helpful messages [perl #73754]:</p>
<ul>
<li>
<p>PerlIO layer function table size (%d) does not match size expected by this
perl (%d)</p>
</li>
<li>
<p>PerlIO layer instance size (%d) does not match size expected by this perl
(%d)</p>
</li>
</ul>
</li>
<li>
<p>The "Found = in conditional" warning that is emitted when a constant is
assigned to a variable in a condition is now withheld if the constant is
actually a subroutine or one generated by <pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">constant</span></code>
, since the value
of the constant may not be known at the time the program is written
[perl #77762].</p>
</li>
<li>
<p>Previously, if none of the gethostbyaddr(), gethostbyname() and
gethostent() functions were implemented on a given platform, they would
all die with the message "Unsupported socket function 'gethostent' called",
with analogous messages for getnet*() and getserv*().  This has been
corrected.</p>
</li>
<li>
<p>The warning message about unrecognized regular expression escapes passed
through has been changed to include any literal "{" following the
two-character escape.  For example, "\q{" is now emitted instead of "\q".</p>
</li>
</ul>
<a id="Utility-Changes"></a><h2 class='h2' >Utility Changes</h2>
<a id="the-perlbug(1)-manpage"></a><h4 class='h4' ><i>perlbug(1)</i></h4>
<ul>
<li>
<p><a href="perlbug.html">perlbug</a> now looks in the EMAIL environment variable for a return address
if the REPLY-TO and REPLYTO variables are empty.</p>
</li>
<li>
<p><a href="perlbug.html">perlbug</a> did not previously generate a "From:" header, potentially
resulting in dropped mail; it now includes that header.</p>
</li>
<li>
<p>The user's address is now used as the Return-Path.</p>
<p>Many systems these days don't have a valid Internet domain name, and
perlbug@perl.org does not accept email with a return-path that does
not resolve.  So the user's address is now passed to sendmail so it's
less likely to get stuck in a mail queue somewhere [perl #82996].</p>
</li>
<li>
<p><a href="perlbug.html">perlbug</a> now always gives the reporter a chance to change the email
address it guesses for them (5.12.2).</p>
</li>
<li>
<p><a href="perlbug.html">perlbug</a> should no longer warn about uninitialized values when using the <strong>-d</strong>
and <strong>-v</strong> options (5.12.2).</p>
</li>
</ul>
<a id="the-perl5db.pl-manpage"></a><h4 class='h4' ><a href="https://search.cpan.org/perldoc/perl5db.pl">perl5db.pl</a></h4>
<ul>
<li>
<p>The remote terminal works after forking and spawns new sessions, one
per forked process.</p>
</li>
</ul>
<a id="the-ptargrep-manpage"></a><h4 class='h4' ><a href="ptargrep.html">ptargrep</a></h4>
<ul>
<li>
<p><a href="ptargrep.html">ptargrep</a> is a new utility to apply pattern matching to the contents of
files  in a tar archive.  It comes with <pre>
<span class="w">Archive::Tar</span></code>
.</p>
</li>
</ul>
<a id="Configuration-and-Compilation"></a><h2 class='h2' >Configuration and Compilation</h2>
<p>See also <a href="#Naming-fixes-in-Policy_sh.SH-may-invalidate-Policy.sh">Naming fixes in Policy_sh.SH may invalidate Policy.sh</a>,
above.</p>
<ul>
<li>
<p>CCINCDIR and CCLIBDIR for the mingw64 cross-compiler are now correctly
under <i>$(CCHOME)\mingw\include</i> and <i>\lib</i> rather than immediately below
<i>$(CCHOME)</i>.</p>
<p>This means the "incpath", "libpth", "ldflags", "lddlflags" and
"ldflags_nolargefiles" values in <i>Config.pm</i> and <i>Config_heavy.pl</i> are now
set correctly.</p>
</li>
<li>
<p><pre>
<span class="w">make</span> <span class="w">test</span>.<span class="w">valgrind</span></code>
 has been adjusted to account for <i>cpan/dist/ext</i>
separation.</p>
</li>
<li>
<p>On compilers that support it, <strong>-Wwrite-strings</strong> is now added to cflags by
default.</p>
</li>
<li>
<p>The <a href="Encode.html">Encode</a> module can now (once again) be included in a static Perl
build.  The special-case handling for this situation got broken in Perl
5.11.0, and has now been repaired.</p>
</li>
<li>
<p>The previous default size of a PerlIO buffer (4096 bytes) has been increased
to the larger of 8192 bytes and your local BUFSIZ.  Benchmarks show that doubling
this decade-old default increases read and write performance by around
25% to 50% when using the default layers of perlio on top of unix.  To choose
a non-default size, such as to get back the old value or to obtain an even
larger value, configure with:</p>
<div class="verbatim"><ol><li>     ./Configure -Accflags=-DPERLIOBUF_DEFAULT_BUFSIZ=N</li></ol></div><p>where N is the desired size in bytes; it should probably be a multiple of
your page size.</p>
</li>
<li>
<p>An "incompatible operand types" error in ternary expressions when building
with <pre>
<span class="w">clang</span></code>
 has been fixed (5.12.2).</p>
</li>
<li>
<p>Perl now skips setuid <a href="File/Copy.html">File::Copy</a> tests on partitions it detects mounted
as <pre>
<span class="w">nosuid</span></code>
 (5.12.2).</p>
</li>
</ul>
<a id="Platform-Support"></a><h2 class='h2' >Platform Support</h2>
<a id="New-Platforms"></a><h3 class='h3' >New Platforms</h3>
<ul>
<li><a id="AIX"></a><strong>AIX</strong>
<p>Perl now builds on AIX 4.2 (5.12.1).</p>
</li>
</ul>
<a id="Discontinued-Platforms"></a><h3 class='h3' >Discontinued Platforms</h3>
<ul>
<li><a id="Apollo-DomainOS"></a><strong>Apollo DomainOS</strong>
<p>The last vestiges of support for this platform have been excised from
the Perl distribution.  It was officially discontinued in version 5.12.0.
It had not worked for years before that.</p>
</li>
<li><a id="MacOS-Classic"></a><strong>MacOS Classic</strong>
<p>The last vestiges of support for this platform have been excised from the
Perl distribution.  It was officially discontinued in an earlier version.</p>
</li>
</ul>
<a id="Platform-Specific-Notes"></a><h3 class='h3' >Platform-Specific Notes</h3>
<a id="AIX"></a><h4 class='h4' >AIX</h4>
<ul>
<li>
<p><i>README.aix</i> has been updated with information about the XL C/C++ V11 compiler
suite (5.12.2).</p>
</li>
</ul>
<a id="ARM"></a><h4 class='h4' >ARM</h4>
<ul>
<li>
<p>The <pre>
<span class="w">d_u32align</span></code>
 configuration probe on ARM has been fixed (5.12.2).</p>
</li>
</ul>
<a id="Cygwin"></a><h4 class='h4' >Cygwin</h4>
<ul>
<li>
<p><a href="https://search.cpan.org/perldoc/MakeMaker">MakeMaker</a> has been updated to build manpages on cygwin.</p>
</li>
<li>
<p>Improved rebase behaviour</p>
<p>If a DLL is updated on cygwin the old imagebase address is reused.
This solves most rebase errors, especially when updating on core DLL's.
See <a href="http://www.tishler.net/jason/software/rebase/rebase-2.4.2.README">http://www.tishler.net/jason/software/rebase/rebase-2.4.2.README</a> 
for more information.</p>
</li>
<li>
<p>Support for the standard cygwin dll prefix (needed for FFIs)</p>
</li>
<li>
<p>Updated build hints file</p>
</li>
</ul>
<a id="FreeBSD-7"></a><h4 class='h4' >FreeBSD 7</h4>
<ul>
<li>
<p>FreeBSD 7 no longer contains <i>/usr/bin/objformat</i>.  At build time,
Perl now skips the <i>objformat</i> check for versions 7 and higher and
assumes ELF (5.12.1).</p>
</li>
</ul>
<a id="HP-UX"></a><h4 class='h4' >HP-UX</h4>
<ul>
<li>
<p>Perl now allows <strong>-Duse64bitint</strong> without promoting to <pre>
<span class="w">use64bitall</span></code>
 on HP-UX
(5.12.1).</p>
</li>
</ul>
<a id="IRIX"></a><h4 class='h4' >IRIX</h4>
<ul>
<li>
<p>Conversion of strings to floating-point numbers is now more accurate on
IRIX systems [perl #32380].</p>
</li>
</ul>
<a id="Mac-OS-X"></a><h4 class='h4' >Mac OS X</h4>
<ul>
<li>
<p>Early versions of Mac OS X (Darwin) had buggy implementations of the
setregid(), setreuid(), setrgid(,) and setruid() functions, so Perl
would pretend they did not exist.</p>
<p>These functions are now recognised on Mac OS 10.5 (Leopard; Darwin 9) and
higher, as they have been fixed [perl #72990].</p>
</li>
</ul>
<a id="MirBSD"></a><h4 class='h4' >MirBSD</h4>
<ul>
<li>
<p>Previously if you built Perl with a shared <i>libperl.so</i> on MirBSD (the
default config), it would work up to the installation; however, once
installed, it would be unable to find <i>libperl</i>.  Path handling is now
treated as in the other BSD dialects.</p>
</li>
</ul>
<a id="NetBSD"></a><h4 class='h4' >NetBSD</h4>
<ul>
<li>
<p>The NetBSD hints file has been changed to make the system malloc the
default.</p>
</li>
</ul>
<a id="OpenBSD"></a><h4 class='h4' >OpenBSD</h4>
<ul>
<li>
<p>OpenBSD &gt; 3.7 has a new malloc implementation which is <i>mmap</i>-based,
and as such can release memory back to the OS; however, Perl's use of
this malloc causes a substantial slowdown, so we now default to using
Perl's malloc instead [perl #75742].</p>
</li>
</ul>
<a id="OpenVOS"></a><h4 class='h4' >OpenVOS</h4>
<ul>
<li>
<p>Perl now builds again with OpenVOS (formerly known as Stratus VOS)
[perl #78132] (5.12.3).</p>
</li>
</ul>
<a id="Solaris"></a><h4 class='h4' >Solaris</h4>
<ul>
<li>
<p>DTrace is now supported on Solaris.  There used to be build failures, but
these have been fixed [perl #73630] (5.12.3).</p>
</li>
</ul>
<a id="VMS"></a><h4 class='h4' >VMS</h4>
<ul>
<li>
<p>Extension building on older (pre 7.3-2) VMS systems was broken because
configure.com hit the DCL symbol length limit of 1K.  We now work within
this limit when assembling the list of extensions in the core build (5.12.1).</p>
</li>
<li>
<p>We fixed configuring and building Perl with <strong>-Uuseperlio</strong> (5.12.1).</p>
</li>
<li>
<p><pre>
<span class="w">PerlIOUnix_open</span></code>
 now honours the default permissions on VMS.</p>
<p>When <pre>
<span class="w">perlio</span></code>
 became the default and <pre>
<span class="w">unix</span></code>
 became the default bottom layer,
the most common path for creating files from Perl became <pre>
<span class="w">PerlIOUnix_open</span></code>
,
which has always explicitly used <pre>
<span class="n">0666</span></code>
 as the permission mask.  This prevents
inheriting permissions from RMS defaults and ACLs, so to avoid that problem,
we now pass <pre>
<span class="n">0777</span></code>
 to open().  In the VMS CRTL, <pre>
<span class="n">0777</span></code>
 has a special
meaning over and above intersecting with the current umask; specifically, it
allows Unix syscalls to preserve native default permissions (5.12.3).</p>
</li>
<li>
<p>The shortening of symbols longer than 31 characters in the core C sources
and in extensions is now by default done by the C compiler rather than by
xsubpp (which could only do so for generated symbols in XS code).  You can
reenable xsubpp's symbol shortening by configuring with -Uuseshortenedsymbols,
but you'll have some work to do to get the core sources to compile.</p>
</li>
<li>
<p>Record-oriented files (record format variable or variable with fixed control)
opened for write by the <pre>
<span class="w">perlio</span></code>
 layer will now be line-buffered to prevent the
introduction of spurious line breaks whenever the perlio buffer fills up.</p>
</li>
<li>
<p><i>git_version.h</i> is now installed on VMS.  This was an oversight in v5.12.0 which
caused some extensions to fail to build (5.12.2).</p>
</li>
<li>
<p>Several memory leaks in <a href="functions/stat.html">stat FILEHANDLE</a> have been fixed (5.12.2).</p>
</li>
<li>
<p>A memory leak in Perl_rename() due to a double allocation has been
fixed (5.12.2).</p>
</li>
<li>
<p>A memory leak in vms_fid_to_name() (used by realpath() and
realname()&gt; has been fixed (5.12.2).</p>
</li>
</ul>
<a id="Windows"></a><h4 class='h4' >Windows</h4>
<p>See also <a href="#fork()-emulation-will-not-wait-for-signalled-children">fork() emulation will not wait for signalled children</a> and
<a href="#Perl-source-code-is-read-in-text-mode-on-Windows">Perl source code is read in text mode on Windows</a>, above.</p>
<ul>
<li>
<p>Fixed build process for SDK2003SP1 compilers.</p>
</li>
<li>
<p>Compilation with Visual Studio 2010 is now supported.</p>
</li>
<li>
<p>When using old 32-bit compilers, the define <pre>
<span class="w">_USE_32BIT_TIME_T</span></code>
 is now
set in <pre>
<span class="i">$Config</span>{<span class="w">ccflags</span>}</code>
.  This improves portability when compiling
XS extensions using new compilers, but for a Perl compiled with old 32-bit
compilers.</p>
</li>
<li>
<p><pre>
<span class="i">$Config</span>{<span class="w">gccversion</span>}</code>
 is now set correctly when Perl is built using the
mingw64 compiler from <a href="http://mingw64.org">http://mingw64.org</a> [perl #73754].</p>
</li>
<li>
<p>When building Perl with the mingw64 x64 cross-compiler <pre>
<span class="w">incpath</span></code>
,
<pre>
<span class="w">libpth</span></code>
, <pre>
<span class="w">ldflags</span></code>
, <pre>
<span class="w">lddlflags</span></code>
 and <pre>
<span class="w">ldflags_nolargefiles</span></code>
 values
in <i>Config.pm</i> and <i>Config_heavy.pl</i> were not previously being set
correctly because, with that compiler, the include and lib directories
are not immediately below <code class="inline">$(CCHOME)</code> (5.12.2).</p>
</li>
<li>
<p>The build process proceeds more smoothly with mingw and dmake when
<i>C:\MSYS\bin</i> is in the PATH, due to a <pre>
<span class="w">Cwd</span></code>
 fix.</p>
</li>
<li>
<p>Support for building with Visual C++ 2010 is now underway, but is not yet
complete.  See <i>README.win32</i> or <a href="perlwin32.html">perlwin32</a> for more details.</p>
</li>
<li>
<p>The option to use an externally-supplied crypt(), or to build with no
crypt() at all, has been removed.  Perl supplies its own crypt()
implementation for Windows, and the political situation that required
this part of the distribution to sometimes be omitted is long gone.</p>
</li>
</ul>
<a id="Internal-Changes"></a><h2 class='h2' >Internal Changes</h2>
<a id="New-APIs"></a><h3 class='h3' >New APIs</h3>
<a id="CLONE_PARAMS-structure-added-to-ease-correct-thread-creation"></a><h4 class='h4' >CLONE_PARAMS structure added to ease correct thread creation</h4>
<p>Modules that create threads should now create <pre>
<span class="w">CLONE_PARAMS</span></code>
 structures
by calling the new function Perl_clone_params_new(), and free them with
Perl_clone_params_del().  This will ensure compatibility with any future
changes to the internals of the <pre>
<span class="w">CLONE_PARAMS</span></code>
 structure layout, and that
it is correctly allocated and initialised.</p>
<a id="New-parsing-functions"></a><h4 class='h4' >New parsing functions</h4>
<p>Several functions have been added for parsing Perl statements and
expressions.  These functions are meant to be used by XS code invoked
during Perl parsing, in a recursive-descent manner, to allow modules to
augment the standard Perl syntax.</p>
<ul>
<li>
<p><a href="perlapi.html#parse_stmtseq">parse_stmtseq()</a>
parses a sequence of statements, up to closing brace or EOF.</p>
</li>
<li>
<p><a href="perlapi.html#parse_fullstmt">parse_fullstmt()</a>
parses a complete Perl statement, including optional label.</p>
</li>
<li>
<p><a href="perlapi.html#parse_barestmt">parse_barestmt()</a>
parses a statement without a label.</p>
</li>
<li>
<p><a href="perlapi.html#parse_block">parse_block()</a>
parses a code block.</p>
</li>
<li>
<p><a href="perlapi.html#parse_label">parse_label()</a>
parses a statement label, separate from statements.</p>
</li>
<li>
<p><a href="perlapi.html#parse_fullexpr"> parse_fullexpr() </a>,
<a href="perlapi.html#parse_listexpr"> parse_listexpr() </a>,
<a href="perlapi.html#parse_termexpr"> parse_termexpr() </a>, and
<a href="perlapi.html#parse_arithexpr"> parse_arithexpr() </a>
parse expressions at various precedence levels.</p>
</li>
</ul>
<a id="Hints-hash-API"></a><h4 class='h4' >Hints hash API</h4>
<p>A new C API for introspecting the hinthash <pre>
<span class="i">%^H</span></code>
 at runtime has been
added.  See <pre>
<span class="w">cop_hints_2hv</span></code>
, <pre>
<span class="w">cop_hints_fetchpvn</span></code>
, <pre>
<span class="w">cop_hints_fetchpvs</span></code>
,
<pre>
<span class="w">cop_hints_fetchsv</span></code>
, and <pre>
<span class="w">hv_copy_hints_hv</span></code>
 in <a href="perlapi.html">perlapi</a> for details.</p>
<p>A new, experimental API has been added for accessing the internal
structure that Perl uses for <pre>
<span class="i">%^H</span></code>
.  See the functions beginning with
<pre>
<span class="w">cophh_</span></code>
 in <a href="perlapi.html">perlapi</a>.</p>
<a id="C-interface-to-caller()"></a><h4 class='h4' >C interface to caller()</h4>
<p>The <pre>
<span class="w">caller_cx</span></code>
 function has been added as an XSUB-writer's equivalent of
caller().  See <a href="perlapi.html">perlapi</a> for details.</p>
<a id="Custom-per-subroutine-check-hooks"></a><h4 class='h4' >Custom per-subroutine check hooks</h4>
<p>XS code in an extension module can now annotate a subroutine (whether
implemented in XS or in Perl) so that nominated XS code will be called
at compile time (specifically as part of op checking) to change the op
tree of that subroutine.  The compile-time check function (supplied by
the extension module) can implement argument processing that can't be
expressed as a prototype, generate customised compile-time warnings,
perform constant folding for a pure function, inline a subroutine
consisting of sufficiently simple ops, replace the whole call with a
custom op, and so on.  This was previously all possible by hooking the
<pre>
<span class="w">entersub</span></code>
 op checker, but the new mechanism makes it easy to tie the
hook to a specific subroutine.  See <a href="perlapi.html#cv_set_call_checker">cv_set_call_checker in perlapi</a>.</p>
<p>To help in writing custom check hooks, several subtasks within standard
<pre>
<span class="w">entersub</span></code>
 op checking have been separated out and exposed in the API.</p>
<a id="Improved-support-for-custom-OPs"></a><h4 class='h4' >Improved support for custom OPs</h4>
<p>Custom ops can now be registered with the new <pre>
<span class="w">custom_op_register</span></code>
 C
function and the <pre>
<span class="w">XOP</span></code>
 structure.  This will make it easier to add new
properties of custom ops in the future.  Two new properties have been added
already, <pre>
<span class="w">xop_class</span></code>
 and <pre>
<span class="w">xop_peep</span></code>
.</p>
<p><pre>
<span class="w">xop_class</span></code>
 is one of the OA_*OP constants.  It allows <a href="B.html">B</a> and other
introspection mechanisms to work with custom ops
that aren't BASEOPs.  <pre>
<span class="w">xop_peep</span></code>
 is a pointer to
a function that will be called for ops of this
type from <pre>
<span class="w">Perl_rpeep</span></code>
.</p>
<p>See <a href="perlguts.html#Custom-Operators">Custom Operators in perlguts</a> and <a href="perlapi.html#Custom-Operators">Custom Operators in perlapi</a> for more
detail.</p>
<p>The old <pre>
<span class="w">PL_custom_op_names</span></code>
/<pre>
<span class="w">PL_custom_op_descs</span></code>
 interface is still
supported but discouraged.</p>
<a id="Scope-hooks"></a><h4 class='h4' >Scope hooks</h4>
<p>It is now possible for XS code to hook into Perl's lexical scope
mechanism at compile time, using the new <pre>
<span class="w">Perl_blockhook_register</span></code>

function.  See <a href="perlguts.html#Compile-time-scope-hooks">Compile-time scope hooks in perlguts</a>.</p>
<a id="The-recursive-part-of-the-peephole-optimizer-is-now-hookable"></a><h4 class='h4' >The recursive part of the peephole optimizer is now hookable</h4>
<p>In addition to <pre>
<span class="w">PL_peepp</span></code>
, for hooking into the toplevel peephole optimizer, a
<pre>
<span class="w">PL_rpeepp</span></code>
 is now available to hook into the optimizer recursing into
side-chains of the optree.</p>
<a id="New-non-magical-variants-of-existing-functions"></a><h4 class='h4' >New non-magical variants of existing functions</h4>
<p>The following functions/macros have been added to the API.  The <pre>
<span class="i">*_nomg</span></code>

macros are equivalent to their non-<pre>
<span class="w">_nomg</span></code>
 variants, except that they ignore
get-magic.  Those ending in <pre>
<span class="w">_flags</span></code>
 allow one to specify whether
get-magic is processed.</p>
<pre>
  <span class="w">sv_2bool_flags</span>
  <span class="w">SvTRUE_nomg</span>
  <span class="w">sv_2nv_flags</span>
  <span class="w">SvNV_nomg</span>
  <span class="w">sv_cmp_flags</span>
  <span class="w">sv_cmp_locale_flags</span>
  <span class="w">sv_eq_flags</span>
  <span class="w">sv_collxfrm_flags</span></pre>
<p>In some of these cases, the non-<pre>
<span class="w">_flags</span></code>
 functions have
been replaced with wrappers around the new functions.</p>
<a id="pv%2fpvs%2fsv-versions-of-existing-functions"></a><h4 class='h4' >pv/pvs/sv versions of existing functions</h4>
<p>Many functions ending with pvn now have equivalent <code class="inline">pv/pvs/sv</code> versions.</p>
<a id="List-op-building-functions"></a><h4 class='h4' >List op-building functions</h4>
<p>List op-building functions have been added to the
API.  See <a href="perlapi.html#op_append_elem">op_append_elem</a>,
<a href="perlapi.html#op_append_list">op_append_list</a>, and
<a href="perlapi.html#op_prepend_elem">op_prepend_elem</a> in <a href="perlapi.html">perlapi</a>.</p>
<a id="LINKLIST"></a><h4 class='h4' ><pre>
<span class="w">LINKLIST</span></code>
</h4>
<p>The <a href="perlapi.html#LINKLIST">LINKLIST</a> macro, part of op building that
constructs the execution-order op chain, has been added to the API.</p>
<a id="Localisation-functions"></a><h4 class='h4' >Localisation functions</h4>
<p>The <pre>
<span class="w">save_freeop</span></code>
, <pre>
<span class="w">save_op</span></code>
, <pre>
<span class="w">save_pushi32ptr</span></code>
 and <pre>
<span class="w">save_pushptrptr</span></code>

functions have been added to the API.</p>
<a id="Stash-names"></a><h4 class='h4' >Stash names</h4>
<p>A stash can now have a list of effective names in addition to its usual
name.  The first effective name can be accessed via the <pre>
<span class="w">HvENAME</span></code>
 macro,
which is now the recommended name to use in MRO linearisations (<pre>
<span class="w">HvNAME</span></code>

being a fallback if there is no <pre>
<span class="w">HvENAME</span></code>
).</p>
<p>These names are added and deleted via <pre>
<span class="w">hv_ename_add</span></code>
 and
<pre>
<span class="w">hv_ename_delete</span></code>
.  These two functions are <i>not</i> part of the API.</p>
<a id="New-functions-for-finding-and-removing-magic"></a><h4 class='h4' >New functions for finding and removing magic</h4>
<p>The <a href="perlapi.html#mg_findext"> mg_findext() </a> and
<a href="perlapi.html#sv_unmagicext"> sv_unmagicext() </a>
functions have been added to the API.
They allow extension authors to find and remove magic attached to
scalars based on both the magic type and the magic virtual table, similar to how
sv_magicext() attaches magic of a certain type and with a given virtual table
to a scalar.  This eliminates the need for extensions to walk the list of
<pre>
<span class="w">MAGIC</span></code>
 pointers of an <pre>
<span class="w">SV</span></code>
 to find the magic that belongs to them.</p>
<a id="find_rundefsv"></a><h4 class='h4' ><pre>
<span class="w">find_rundefsv</span></code>
</h4>
<p>This function returns the SV representing <pre>
<span class="i">$_</span></code>
, whether it's lexical
or dynamic.</p>
<a id="Perl_croak_no_modify"></a><h4 class='h4' ><pre>
<span class="w">Perl_croak_no_modify</span></code>
</h4>
<p>Perl_croak_no_modify() is short-hand for
<pre>
<span class="i">Perl_croak</span><span class="s">(</span><span class="q">&quot;%s&quot;</span><span class="cm">,</span> <span class="w">PL_no_modify</span><span class="s">)</span></code>
.</p>
<a id="PERL_STATIC_INLINE-define"></a><h4 class='h4' ><pre>
<span class="w">PERL_STATIC_INLINE</span></code>
 define</h4>
<p>The <pre>
<span class="w">PERL_STATIC_INLINE</span></code>
 define has been added to provide the best-guess
incantation to use for static inline functions, if the C compiler supports
C99-style static inline.  If it doesn't, it'll give a plain <pre>
<span class="w">static</span></code>
.</p>
<p><pre>
<span class="w">HAS_STATIC_INLINE</span></code>
 can be used to check if the compiler actually supports
inline functions.</p>
<a id="New-pv_escape-option-for-hexadecimal-escapes"></a><h4 class='h4' >New <pre>
<span class="w">pv_escape</span></code>
 option for hexadecimal escapes</h4>
<p>A new option, <pre>
<span class="w">PERL_PV_ESCAPE_NONASCII</span></code>
, has been added to <pre>
<span class="w">pv_escape</span></code>
 to
dump all characters above ASCII in hexadecimal.  Before, one could get all
characters as hexadecimal or the Latin1 non-ASCII as octal.</p>
<a id="lex_start"></a><h4 class='h4' ><pre>
<span class="w">lex_start</span></code>
</h4>
<p><pre>
<span class="w">lex_start</span></code>
 has been added to the API, but is considered experimental.</p>
<a id="op_scope()-and-op_lvalue()"></a><h4 class='h4' >op_scope() and op_lvalue()</h4>
<p>The op_scope() and op_lvalue() functions have been added to the API,
but are considered experimental.</p>
<a id="C-API-Changes"></a><h3 class='h3' >C API Changes</h3>
<a id="PERL_POLLUTE-has-been-removed"></a><h4 class='h4' ><pre>
<span class="w">PERL_POLLUTE</span></code>
 has been removed</h4>
<p>The option to define <pre>
<span class="w">PERL_POLLUTE</span></code>
 to expose older 5.005 symbols for
backwards compatibility has been removed.  Its use was always discouraged,
and MakeMaker contains a more specific escape hatch:</p>
<pre>
    <span class="w">perl</span> <span class="w">Makefile</span>.<span class="w">PL</span> <span class="w">POLLUTE</span>=<span class="n">1</span></pre>
<p>This can be used for modules that have not been upgraded to 5.6 naming
conventions (and really should be completely obsolete by now).</p>
<a id="Check-API-compatibility-when-loading-XS-modules"></a><h4 class='h4' >Check API compatibility when loading XS modules</h4>
<p>When Perl's API changes in incompatible ways (which usually happens between
major releases), XS modules compiled for previous versions of Perl will no
longer work.  They need to be recompiled against the new Perl.</p>
<p>The <pre>
<span class="w">XS_APIVERSION_BOOTCHECK</span></code>
 macro has been added to ensure that modules
are recompiled and to prevent users from accidentally loading modules
compiled for old perls into newer perls.  That macro, which is called when
loading every newly compiled extension, compares the API version of the
running perl with the version a module has been compiled for and raises an
exception if they don't match.</p>
<a id="Perl_fetch_cop_label"></a><h4 class='h4' >Perl_fetch_cop_label</h4>
<p>The first argument of the C API function <pre>
<span class="w">Perl_fetch_cop_label</span></code>
 has changed
from <pre>
<span class="w">struct</span> <span class="w">refcounted_he</span> *</code>
 to <pre>
<span class="w">COP</span> *</code>
, to insulate the user from
implementation details.</p>
<p>This API function was marked as "may change", and likely isn't in use outside
the core.  (Neither an unpacked CPAN nor Google's codesearch finds any other
references to it.)</p>
<a id="GvCV()-and-GvGP()-are-no-longer-lvalues"></a><h4 class='h4' >GvCV() and GvGP() are no longer lvalues</h4>
<p>The new GvCV_set() and GvGP_set() macros are now provided to replace
assignment to those two macros.</p>
<p>This allows a future commit to eliminate some backref magic between GV
and CVs, which will require complete control over assignment to the
<pre>
<span class="w">gp_cv</span></code>
 slot.</p>
<a id="CvGV()-is-no-longer-an-lvalue"></a><h4 class='h4' >CvGV() is no longer an lvalue</h4>
<p>Under some circumstances, the CvGV() field of a CV is now
reference-counted.  To ensure consistent behaviour, direct assignment to
it, for example <pre>
<span class="i">CvGV</span><span class="s">(</span><span class="w">cv</span><span class="s">)</span> = <span class="w">gv</span></code>
 is now a compile-time error.  A new macro,
<pre>
<span class="i">CvGV_set</span><span class="s">(</span><span class="w">cv</span><span class="cm">,</span><span class="w">gv</span><span class="s">)</span></code>
 has been introduced to run this operation
safely.  Note that modification of this field is not part of the public
API, regardless of this new macro (and despite its being listed in this section).</p>
<a id="CvSTASH()-is-no-longer-an-lvalue"></a><h4 class='h4' >CvSTASH() is no longer an lvalue</h4>
<p>The CvSTASH() macro can now only be used as an rvalue.  CvSTASH_set()
has been added to replace assignment to CvSTASH().  This is to ensure
that backreferences are handled properly.  These macros are not part of the
API.</p>
<a id="Calling-conventions-for-newFOROP-and-newWHILEOP"></a><h4 class='h4' >Calling conventions for <pre>
<span class="w">newFOROP</span></code>
 and <pre>
<span class="w">newWHILEOP</span></code>
</h4>
<p>The way the parser handles labels has been cleaned up and refactored.  As a
result, the newFOROP() constructor function no longer takes a parameter
stating what label is to go in the state op.</p>
<p>The newWHILEOP() and newFOROP() functions no longer accept a line
number as a parameter.</p>
<a id="Flags-passed-to-uvuni_to_utf8_flags-and-utf8n_to_uvuni"></a><h4 class='h4' >Flags passed to <pre>
<span class="w">uvuni_to_utf8_flags</span></code>
 and <pre>
<span class="w">utf8n_to_uvuni</span></code>
</h4>
<p>Some of the flags parameters to uvuni_to_utf8_flags() and
utf8n_to_uvuni() have changed.  This is a result of Perl's now allowing
internal storage and manipulation of code points that are problematic
in some situations.  Hence, the default actions for these functions has
been complemented to allow these code points.  The new flags are
documented in <a href="perlapi.html">perlapi</a>.  Code that requires the problematic code
points to be rejected needs to change to use the new flags.  Some flag
names are retained for backward source compatibility, though they do
nothing, as they are now the default.  However the flags
<pre>
<span class="w">UNICODE_ALLOW_FDD0</span></code>
, <pre>
<span class="w">UNICODE_ALLOW_FFFF</span></code>
, <pre>
<span class="w">UNICODE_ILLEGAL</span></code>
, and
<pre>
<span class="w">UNICODE_IS_ILLEGAL</span></code>
 have been removed, as they stem from a
fundamentally broken model of how the Unicode non-character code points
should be handled, which is now described in
<a href="perlunicode.html#Non-character-code-points">Non-character code points in perlunicode</a>.  See also the Unicode section
under <a href="#Selected-Bug-Fixes">Selected Bug Fixes</a>.</p>
<a id="Deprecated-C-APIs"></a><h3 class='h3' >Deprecated C APIs</h3>
<ul>
<li><a id="Perl_ptr_table_clear"></a><strong><pre>
<span class="w">Perl_ptr_table_clear</span></code>
</strong>
<p><pre>
<span class="w">Perl_ptr_table_clear</span></code>
 is no longer part of Perl's public API.  Calling it
now generates a deprecation warning, and it will be removed in a future
release.</p>
</li>
<li><a id="sv_compile_2op"></a><strong><pre>
<span class="w">sv_compile_2op</span></code>
</strong>
<p>The sv_compile_2op() API function is now deprecated.  Searches suggest
that nothing on CPAN is using it, so this should have zero impact.</p>
<p>It attempted to provide an API to compile code down to an optree, but failed
to bind correctly to lexicals in the enclosing scope.  It's not possible to
fix this problem within the constraints of its parameters and return value.</p>
</li>
<li><a id="find_rundefsvoffset"></a><strong><pre>
<span class="w">find_rundefsvoffset</span></code>
</strong>
<p>The <pre>
<span class="w">find_rundefsvoffset</span></code>
 function has been deprecated.  It appeared that
its design was insufficient for reliably getting the lexical <pre>
<span class="i">$_</span></code>
 at
run-time.</p>
<p>Use the new <pre>
<span class="w">find_rundefsv</span></code>
 function or the <pre>
<span class="w">UNDERBAR</span></code>
 macro
instead.  They directly return the right SV
representing <pre>
<span class="i">$_</span></code>
, whether it's
lexical or dynamic.</p>
</li>
<li><a id="CALL_FPTR-and-CPERLscope"></a><strong><pre>
<span class="w">CALL_FPTR</span></code>
 and <pre>
<span class="w">CPERLscope</span></code>
</strong>
<p>Those are left from an old implementation of <pre>
<span class="w">MULTIPLICITY</span></code>
 using C++ objects,
which was removed in Perl 5.8.  Nowadays these macros do exactly nothing, so
they shouldn't be used anymore.</p>
<p>For compatibility, they are still defined for external <pre>
<span class="w">XS</span></code>
 code.  Only
extensions defining <pre>
<span class="w">PERL_CORE</span></code>
 must be updated now.</p>
</li>
</ul>
<a id="Other-Internal-Changes"></a><h3 class='h3' >Other Internal Changes</h3>
<a id="Stack-unwinding"></a><h4 class='h4' >Stack unwinding</h4>
<p>The protocol for unwinding the C stack at the last stage of a <code class="inline"><a class="l_k" href="functions/die.html">die</a></code>
has changed how it identifies the target stack frame.  This now uses
a separate variable <pre>
<span class="w">PL_restartjmpenv</span></code>
, where previously it relied on
the <pre>
<span class="w">blk_eval</span>.<span class="w">cur_top_env</span></code>
 pointer in the <code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code> context frame that
has nominally just been discarded.  This change means that code running
during various stages of Perl-level unwinding no longer needs to take
care to avoid destroying the ghost frame.</p>
<a id="Scope-stack-entries"></a><h4 class='h4' >Scope stack entries</h4>
<p>The format of entries on the scope stack has been changed, resulting in a
reduction of memory usage of about 10%.  In particular, the memory used by
the scope stack to record each active lexical variable has been halved.</p>
<a id="Memory-allocation-for-pointer-tables"></a><h4 class='h4' >Memory allocation for pointer tables</h4>
<p>Memory allocation for pointer tables has been changed.  Previously
<pre>
<span class="w">Perl_ptr_table_store</span></code>
 allocated memory from the same arena system as
<pre>
<span class="w">SV</span></code>
 bodies and <pre>
<span class="w">HE</span></code>
s, with freed memory remaining bound to those arenas
until interpreter exit.  Now it allocates memory from arenas private to the
specific pointer table, and that memory is returned to the system when
<pre>
<span class="w">Perl_ptr_table_free</span></code>
 is called.  Additionally, allocation and release are
both less CPU intensive.</p>
<a id="UNDERBAR"></a><h4 class='h4' ><pre>
<span class="w">UNDERBAR</span></code>
</h4>
<p>The <pre>
<span class="w">UNDERBAR</span></code>
 macro now calls <pre>
<span class="w">find_rundefsv</span></code>
.  <pre>
<span class="w">dUNDERBAR</span></code>
 is now a
noop but should still be used to ensure past and future compatibility.</p>
<a id="String-comparison-routines-renamed"></a><h4 class='h4' >String comparison routines renamed</h4>
<p>The <pre>
<span class="w">ibcmp_</span>*</code>
 functions have been renamed and are now called <pre>
<span class="w">foldEQ</span></code>
,
<pre>
<span class="w">foldEQ_locale</span></code>
, and <pre>
<span class="w">foldEQ_utf8</span></code>
.  The old names are still available as
macros.</p>
<a id="chop-and-chomp-implementations-merged"></a><h4 class='h4' ><code class="inline"><a class="l_k" href="functions/chop.html">chop</a></code> and <code class="inline"><a class="l_k" href="functions/chomp.html">chomp</a></code> implementations merged</h4>
<p>The opcode bodies for <code class="inline"><a class="l_k" href="functions/chop.html">chop</a></code> and <code class="inline"><a class="l_k" href="functions/chomp.html">chomp</a></code> and for <pre>
<span class="w">schop</span></code>
 and <pre>
<span class="w">schomp</span></code>

have been merged.  The implementation functions Perl_do_chop() and
Perl_do_chomp(), never part of the public API, have been merged and
moved to a static function in <i>pp.c</i>.  This shrinks the Perl binary
slightly, and should not affect any code outside the core (unless it is
relying on the order of side-effects when <code class="inline"><a class="l_k" href="functions/chomp.html">chomp</a></code> is passed a <i>list</i> of
values).</p>
<a id="Selected-Bug-Fixes"></a><h2 class='h2' >Selected Bug Fixes</h2>
<a id="I%2fO"></a><h3 class='h3' >I/O</h3>
<ul>
<li>
<p>Perl no longer produces this warning:</p>
<div class="verbatim"><ol><li>    $ perl -we 'open(my $f, "&gt;", \my $x); binmode($f, "scalar")'</li><li>    Use of uninitialized value in binmode at -e line 1.</li></ol></div></li>
<li>
<p>Opening a glob reference via <pre>
<a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="i">$fh</span><span class="cm">,</span> <span class="q">&quot;&gt;&quot;</span><span class="cm">,</span> \<span class="i">*glob</span><span class="s">)</span></code>
 no longer
causes the glob to be corrupted when the filehandle is printed to.  This would
cause Perl to crash whenever the glob's contents were accessed
[perl #77492].</p>
</li>
<li>
<p>PerlIO no longer crashes when called recursively, such as from a signal
handler.  Now it just leaks memory [perl #75556].</p>
</li>
<li>
<p>Most I/O functions were not warning for unopened handles unless the
"closed" and "unopened" warnings categories were both enabled.  Now only
<pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">warnings</span> <span class="q">&#39;unopened&#39;</span></code>
 is necessary to trigger these warnings, as
had always been the intention.</p>
</li>
<li>
<p>There have been several fixes to PerlIO layers:</p>
<p>When <pre>
<a class="l_k" href="functions/binmode.html">binmode</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="q">&quot;:crlf&quot;</span><span class="s">)</span></code>
 pushes the <pre>
<span class="j">:</span><span class="w">crlf</span></code>
 layer on top of the stack,
it no longer enables crlf layers lower in the stack so as to avoid
unexpected results [perl #38456].</p>
<p>Opening a file in <pre>
<span class="j">:</span><span class="w">raw</span></code>
 mode now does what it advertises to do (first
open the file, then <code class="inline"><a class="l_k" href="functions/binmode.html">binmode</a></code> it), instead of simply leaving off the top
layer [perl #80764].</p>
<p>The three layers <pre>
<span class="j">:</span><a class="l_k" href="functions/pop.html">pop</a></code>
, <pre>
<span class="j">:</span><span class="w">utf8</span></code>
, and <pre>
<span class="j">:</span><span class="w">bytes</span></code>
 didn't allow stacking when
opening a file.  For example
this:</p>
<pre>
    <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="w">FH</span><span class="cm">,</span> <span class="q">&quot;&gt;:pop:perlio&quot;</span><span class="cm">,</span> <span class="q">&quot;some.file&quot;</span><span class="s">)</span> <a class="l_k" href="functions/or.html">or</a> <a class="l_k" href="functions/die.html">die</a> <span class="i">$!</span><span class="sc">;</span></pre>
<p>would throw an "Invalid argument" error.  This has been fixed in this
release [perl #82484].</p>
</li>
</ul>
<a id="Regular-Expression-Bug-Fixes"></a><h3 class='h3' >Regular Expression Bug Fixes</h3>
<ul>
<li>
<p>The regular expression engine no longer loops when matching
<pre>
<span class="q">&quot;\N{LATIN SMALL LIGATURE FF}&quot;</span> =~ <span class="q">/f+/i</span></code>
 and similar expressions
[perl #72998] (5.12.1).</p>
</li>
<li>
<p>The trie runtime code should no longer allocate massive amounts of memory,
fixing #74484.</p>
</li>
<li>
<p>Syntax errors in <code class="inline">(?{...})</code> blocks no longer cause panic messages
[perl #2353].</p>
</li>
<li>
<p>A pattern like <code class="inline">(?:(o){2})?</code> no longer causes a "panic" error
[perl #39233].</p>
</li>
<li>
<p>A fatal error in regular expressions containing <code class="inline">(.*?)</code> when processing
UTF-8 data has been fixed [perl #75680] (5.12.2).</p>
</li>
<li>
<p>An erroneous regular expression engine optimisation that caused regex verbs like
<pre>
<span class="i">*COMMIT</span></code>
 sometimes to be ignored has been removed.</p>
</li>
<li>
<p>The regular expression bracketed character class <pre>
<span class="s">[</span>\<span class="n">8</span>\<span class="n">9</span><span class="s">]</span></code>
 was effectively the
same as <pre>
<span class="s">[</span><span class="n">89</span>\<span class="n">000</span><span class="s">]</span></code>
, incorrectly matching a NULL character.  It also gave
incorrect warnings that the <pre>
<span class="n">8</span></code>
 and <pre>
<span class="n">9</span></code>
 were ignored.  Now <pre>
<span class="s">[</span>\<span class="n">8</span>\<span class="n">9</span><span class="s">]</span></code>
 is the
same as <pre>
<span class="s">[</span><span class="n">89</span><span class="s">]</span></code>
 and gives legitimate warnings that <pre>
\<span class="n">8</span></code>
 and <pre>
\<span class="n">9</span></code>
 are
unrecognized escape sequences, passed-through.</p>
</li>
<li>
<p>A regular expression match in the right-hand side of a global substitution
(<code class="inline"><a class="l_k" href="functions/s.html">s///g</a></code>) that is in the same scope will no longer cause match variables
to have the wrong values on subsequent iterations.  This can happen when an
array or hash subscript is interpolated in the right-hand side, as in
<pre>
<span class="q">s|(.)|@a{ print($1), /./ }|g</span></code>
 [perl #19078].</p>
</li>
<li>
<p>Several cases in which characters in the Latin-1 non-ASCII range (0x80 to
0xFF) used not to match themselves, or used to match both a character class
and its complement, have been fixed.  For instance, U+00E2 could match both
<pre>
\<span class="w">w</span></code>
 and <pre>
\<span class="w">W</span></code>
 [perl #78464] [perl #18281] [perl #60156].</p>
</li>
<li>
<p>Matching a Unicode character against an alternation containing characters
that happened to match continuation bytes in the former's UTF8
representation (like <pre>
<span class="q">qq{\x{30ab}}</span> =~ <span class="q">/\xab|\xa9/</span></code>
) would cause erroneous
warnings [perl #70998].</p>
</li>
<li>
<p>The trie optimisation was not taking empty groups into account, preventing
"foo" from matching <pre>
<span class="q">/\A(?:(?:)foo|bar|zot)\z/</span></code>
 [perl #78356].</p>
</li>
<li>
<p>A pattern containing a <pre>
+</code>
 inside a lookahead would sometimes cause an
incorrect match failure in a global match (for example, <pre>
<span class="q">/(?=(\S+))/g</span></code>
)
[perl #68564].</p>
</li>
<li>
<p>A regular expression optimisation would sometimes cause a match with a
<code class="inline">{n,m}</code> quantifier to fail when it should have matched [perl #79152].</p>
</li>
<li>
<p>Case-insensitive matching in regular expressions compiled under
<pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">locale</span></code>
 now works much more sanely when the pattern or target
string is internally encoded in UTF8.  Previously, under these
conditions the localeness was completely lost.  Now, code points
above 255 are treated as Unicode, but code points between 0 and 255
are treated using the current locale rules, regardless of whether
the pattern or the string is encoded in UTF8.  The few case-insensitive
matches that cross the 255/256 boundary are not allowed.  For
example, 0xFF does not caselessly match the character at 0x178,
LATIN CAPITAL LETTER Y WITH DIAERESIS, because 0xFF may not be LATIN
SMALL LETTER Y in the current locale, and Perl has no way of knowing
if that character even exists in the locale, much less what code
point it is.</p>
</li>
<li>
<p>The <code class="inline">(?|...)</code> regular expression construct no longer crashes if the final
branch has more sets of capturing parentheses than any other branch.  This
was fixed in Perl 5.10.1 for the case of a single branch, but that fix did
not take multiple branches into account [perl #84746].</p>
</li>
<li>
<p>A bug has been fixed in the implementation of <pre>
<span class="s">{</span>...<span class="s">}</span></code>
 quantifiers in
regular expressions that prevented the code block in
<pre>
<span class="q">/((\w+)(?{ print $2 })){2}/</span></code>
 from seeing the <pre>
<span class="i">$2</span></code>
 sometimes
[perl #84294].</p>
</li>
</ul>
<a id="Syntax%2fParsing-Bugs"></a><h3 class='h3' >Syntax/Parsing Bugs</h3>
<ul>
<li>
<p><pre>
<a class="l_k" href="functions/when.html">when</a> <span class="s">(</span><a class="l_k" href="functions/scalar.html">scalar</a><span class="s">)</span> <span class="s">{</span>...<span class="s">}</span></code>
 no longer crashes, but produces a syntax error
[perl #74114] (5.12.1).</p>
</li>
<li>
<p>A label right before a string eval (<pre>
<span class="j">foo:</span> <a class="l_k" href="functions/eval.html">eval</a> <span class="i">$string</span></code>
) no longer causes
the label to be associated also with the first statement inside the eval
[perl #74290] (5.12.1).</p>
</li>
<li>
<p>The <pre>
<a class="l_k" href="functions/no.html">no</a> <span class="v">5.13.2</span></code>
 form of <code class="inline"><a class="l_k" href="functions/no.html">no</a></code> no longer tries to turn on features or
pragmata (like <a href="strict.html">strict</a>) [perl #70075] (5.12.2).</p>
</li>
<li>
<p><pre>
<a class="l_k" href="functions/BEGIN.html">BEGIN</a> <span class="s">{</span><a class="l_k" href="functions/require.html">require</a> <span class="v">5.12.0</span><span class="s">}</span></code>
 now behaves as documented, rather than behaving
identically to <pre>
<a class="l_k" href="functions/use.html">use</a> <span class="v">5.12.0</span></code>
.  Previously, <code class="inline"><a class="l_k" href="functions/require.html">require</a></code> in a <code class="inline"><a class="l_k" href="functions/BEGIN.html">BEGIN</a></code> block
was erroneously executing the <pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">feature</span> <span class="q">&#39;:5.12.0&#39;</span></code>
 and
<pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">strict</span></code>
 behaviour, which only <code class="inline"><a class="l_k" href="functions/use.html">use</a></code> was documented to
provide [perl #69050].</p>
</li>
<li>
<p>A regression introduced in Perl 5.12.0, making
<pre>
<a class="l_k" href="functions/my.html">my</a> <span class="i">$x</span> = <span class="n">3</span><span class="sc">;</span> <span class="i">$x</span> = <a class="l_k" href="functions/length.html">length</a><span class="s">(</span><a class="l_k" href="functions/undef.html">undef</a><span class="s">)</span></code>
 result in <pre>
<span class="i">$x</span></code>
 set to <pre>
<span class="n">3</span></code>
 has been
fixed.  <pre>
<span class="i">$x</span></code>
 will now be <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> [perl #85508] (5.12.2).</p>
</li>
<li>
<p>When strict "refs" mode is off, <pre>
<span class="i">%</span>{...}</code>
 in rvalue context returns
<code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> if its argument is undefined.  An optimisation introduced in Perl
5.12.0 to make <pre>
<a class="l_k" href="functions/keys.html">keys</a> <span class="i">%</span>{...}</code>
 faster when used as a boolean did not take
this into account, causing <pre>
<a class="l_k" href="functions/keys.html">keys</a> <span class="i">%</span>{+<a class="l_k" href="functions/undef.html">undef</a>}</code>
 (and <pre>
<a class="l_k" href="functions/keys.html">keys</a> <span class="i">%$foo</span></code>
 when
<pre>
<span class="i">$foo</span></code>
 is undefined) to be an error, which it should be so in strict
mode only [perl #81750].</p>
</li>
<li>
<p>Constant-folding used to cause</p>
<pre>
  <span class="i">$text</span> =~ <span class="s">(</span> <span class="n">1</span> ? <span class="q">/phoo/</span> <span class="co">:</span> <span class="q">/bear/</span><span class="s">)</span></pre>
<p>to turn into</p>
<pre>
  <span class="i">$text</span> =~ <span class="q">/phoo/</span></pre>
<p>at compile time.  Now it correctly matches against <pre>
<span class="i">$_</span></code>
 [perl #20444].</p>
</li>
<li>
<p>Parsing Perl code (either with string <code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code> or by loading modules) from
within a <code class="inline"><a class="l_k" href="functions/UNITCHECK.html">UNITCHECK</a></code> block no longer causes the interpreter to crash
[perl #70614].</p>
</li>
<li>
<p>String <code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code>s no longer fail after 2 billion scopes have been
compiled [perl #83364].</p>
</li>
<li>
<p>The parser no longer hangs when encountering certain Unicode characters,
such as U+387 [perl #74022].</p>
</li>
<li>
<p>Defining a constant with the same name as one of Perl's special blocks
(like <code class="inline"><a class="l_k" href="functions/INIT.html">INIT</a></code>) stopped working in 5.12.0, but has now been fixed
[perl #78634].</p>
</li>
<li>
<p>A reference to a literal value used as a hash key (<pre>
<span class="i">$hash</span>{\<span class="q">&quot;foo&quot;</span>}</code>
) used
to be stringified, even if the hash was tied [perl #79178].</p>
</li>
<li>
<p>A closure containing an <code class="inline"><a class="l_k" href="functions/if.html">if</a></code> statement followed by a constant or variable
is no longer treated as a constant [perl #63540].</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/state.html">state</a></code> can now be used with attributes.  It
used to mean the same thing as
<code class="inline"><a class="l_k" href="functions/my.html">my</a></code> if any attributes were present [perl #68658].</p>
</li>
<li>
<p>Expressions like <pre>
<span class="i">@$a</span> &gt; <span class="n">3</span></code>
 no longer cause <pre>
<span class="i">$a</span></code>
 to be mentioned in
the "Use of uninitialized value in numeric gt" warning when <pre>
<span class="i">$a</span></code>
 is
undefined (since it is not part of the <code class="inline">&gt;</code> expression, but the operand
of the <pre>
<span class="i">@</span></code>
) [perl #72090].</p>
</li>
<li>
<p>Accessing an element of a package array with a hard-coded number (as
opposed to an arbitrary expression) would crash if the array did not exist.
Usually the array would be autovivified during compilation, but typeglob
manipulation could remove it, as in these two cases which used to crash:</p>
<pre>
  <span class="i">*d</span> = <span class="i">*a</span><span class="sc">;</span>  <a class="l_k" href="functions/print.html">print</a> <span class="i">$d</span>[<span class="n">0</span>]<span class="sc">;</span>
  <a class="l_k" href="functions/undef.html">undef</a> <span class="i">*d</span><span class="sc">;</span> <a class="l_k" href="functions/print.html">print</a> <span class="i">$d</span>[<span class="n">0</span>]<span class="sc">;</span></pre>
</li>
<li>
<p>The <strong>-C</strong> command-line option, when used on the shebang line, can now be
followed by other options [perl #72434].</p>
</li>
<li>
<p>The <pre>
<span class="w">B</span></code>
 module was returning <pre>
<span class="w">B::OP</span></code>
s instead of <pre>
<span class="w">B::LOGOP</span></code>
s for
<pre>
<span class="w">entertry</span></code>
 [perl #80622].  This was due to a bug in the Perl core,
not in <pre>
<span class="w">B</span></code>
 itself.</p>
</li>
</ul>
<a id="Stashes%2c-Globs-and-Method-Lookup"></a><h3 class='h3' >Stashes, Globs and Method Lookup</h3>
<p>Perl 5.10.0 introduced a new internal mechanism for caching MROs (method
resolution orders, or lists of parent classes; aka "isa" caches) to make
method lookup faster (so <pre>
<span class="i">@ISA</span></code>
 arrays would not have to be searched
repeatedly).  Unfortunately, this brought with it quite a few bugs.  Almost
all of these have been fixed now, along with a few MRO-related bugs that
existed before 5.10.0:</p>
<ul>
<li>
<p>The following used to have erratic effects on method resolution, because
the "isa" caches were not reset or otherwise ended up listing the wrong
classes.  These have been fixed.</p>
<ul>
<li><a id="Aliasing-packages-by-assigning-to-globs-%5bperl-%2377358%5d"></a><strong>Aliasing packages by assigning to globs [perl #77358]</strong>
</li>
<li><a id="Deleting-packages-by-deleting-their-containing-stash-elements"></a><strong>Deleting packages by deleting their containing stash elements</strong>
</li>
<li><a id="Undefining-the-glob-containing-a-package-(undef-*Foo%3a%3a)"></a><strong>Undefining the glob containing a package (<pre>
<a class="l_k" href="functions/undef.html">undef</a> <span class="i">*Foo::</span></code>
)</strong>
</li>
<li><a id="Undefining-an-ISA-glob-(undef-*Foo%3a%3aISA)"></a><strong>Undefining an ISA glob (<pre>
<a class="l_k" href="functions/undef.html">undef</a> <span class="i">*Foo::ISA</span></code>
)</strong>
</li>
<li><a id="Deleting-an-ISA-stash-element-(delete-%24Foo%3a%3a%7bISA%7d)"></a><strong>Deleting an ISA stash element (<pre>
<a class="l_k" href="functions/delete.html">delete</a> <span class="i">$Foo::</span>{<span class="w">ISA</span>}</code>
)</strong>
</li>
<li><a id="Sharing-%40ISA-arrays-between-classes-(via-*Foo%3a%3aISA-%3d-%5c%40Bar%3a%3aISA-or-*Foo%3a%3aISA-%3d-*Bar%3a%3aISA)-%5bperl-%2377238%5d"></a><strong>Sharing @ISA arrays between classes (via <pre>
<span class="i">*Foo::ISA</span> = \<span class="i">@Bar::ISA</span></code>
 or
<pre>
<span class="i">*Foo::ISA</span> = <span class="i">*Bar::ISA</span></code>
) [perl #77238]</strong>
</li>
</ul>
<p><pre>
<a class="l_k" href="functions/undef.html">undef</a> <span class="i">*Foo::ISA</span></code>
 would even stop a new <pre>
<span class="i">@Foo::ISA</span></code>
 array from updating
caches.</p>
</li>
<li>
<p>Typeglob assignments would crash if the glob's stash no longer existed, so
long as the glob assigned to were named <pre>
<span class="w">ISA</span></code>
 or the glob on either side of
the assignment contained a subroutine.</p>
</li>
<li>
<p><pre>
<span class="w">PL_isarev</span></code>
, which is accessible to Perl via <pre>
<span class="w">mro::get_isarev</span></code>
 is now
updated properly when packages are deleted or removed from the <pre>
<span class="i">@ISA</span></code>
 of
other classes.  This allows many packages to be created and deleted without
causing a memory leak [perl #75176].</p>
</li>
</ul>
<p>In addition, various other bugs related to typeglobs and stashes have been
fixed:</p>
<ul>
<li>
<p>Some work has been done on the internal pointers that link between symbol
tables (stashes), typeglobs, and subroutines.  This has the effect that
various edge cases related to deleting stashes or stash entries (for example,
&lt;%FOO:: = ()&gt;), and complex typeglob or code-reference aliasing, will no
longer crash the interpreter.</p>
</li>
<li>
<p>Assigning a reference to a glob copy now assigns to a glob slot instead of
overwriting the glob with a scalar [perl #1804] [perl #77508].</p>
</li>
<li>
<p>A bug when replacing the glob of a loop variable within the loop has been fixed
[perl #21469].  This
means the following code will no longer crash:</p>
<pre>
    <a class="l_k" href="functions/for.html">for</a> <span class="i">$x</span> <span class="s">(</span>...<span class="s">)</span> <span class="s">{</span>
        <span class="i">*x</span> = <span class="i">*y</span><span class="sc">;</span>
    <span class="s">}</span></pre>
</li>
<li>
<p>Assigning a glob to a PVLV used to convert it to a plain string.  Now it
works correctly, and a PVLV can hold a glob.  This would happen when a
nonexistent hash or array element was passed to a subroutine:</p>
<pre>
  <a class="l_k" href="functions/sub.html">sub</a> <span class="s">{</span> <span class="i">$_</span>[<span class="n">0</span>] = <span class="i">*foo</span> <span class="s">}</span>-&gt;<span class="s">(</span><span class="i">$hash</span>{<span class="w">key</span>}<span class="s">)</span><span class="sc">;</span>
  <span class="c"># $_[0] would have been the string &quot;*main::foo&quot;</span></pre>
<p>It also happened when a glob was assigned to, or returned from, an element
of a tied array or hash [perl #36051].</p>
</li>
<li>
<p>When trying to report <pre>
<span class="w">Use</span> <span class="w">of</span> <span class="w">uninitialized</span> <span class="w">value</span> <span class="i">$Foo::BAR</span></code>
, crashes could
occur if the glob holding the global variable in question had been detached
from its original stash by, for example, <pre>
<a class="l_k" href="functions/delete.html">delete</a> <span class="i">$::</span>{<span class="q">&quot;Foo::&quot;</span>}</code>
.  This has
been fixed by disabling the reporting of variable names in those
cases.</p>
</li>
<li>
<p>During the restoration of a localised typeglob on scope exit, any
destructors called as a result would be able to see the typeglob in an
inconsistent state, containing freed entries, which could result in a
crash.  This would affect code like this:</p>
<pre>
  <a class="l_k" href="functions/local.html">local</a> <span class="i">*@</span><span class="sc">;</span>
  <a class="l_k" href="functions/eval.html">eval</a> <span class="s">{</span> <a class="l_k" href="functions/die.html">die</a> <a class="l_k" href="functions/bless.html">bless</a> <span class="s">[</span><span class="s">]</span> <span class="s">}</span><span class="sc">;</span> <span class="c"># puts an object in $@</span>
<a name="DESTROY"></a>  sub <span class="m">DESTROY</span> <span class="s">{</span>
    <a class="l_k" href="functions/local.html">local</a> <span class="i">$@</span><span class="sc">;</span> <span class="c"># boom</span>
  <span class="s">}</span></pre>
<p>Now the glob entries are cleared before any destructors are called.  This
also means that destructors can vivify entries in the glob.  So Perl tries
again and, if the entries are re-created too many times, dies with a
"panic: gp_free ..." error message.</p>
</li>
<li>
<p>If a typeglob is freed while a subroutine attached to it is still
referenced elsewhere, the subroutine is renamed to <pre>
<span class="w">__ANON__</span></code>
 in the same
package, unless the package has been undefined, in which case the <pre>
<span class="w">__ANON__</span></code>

package is used.  This could cause packages to be sometimes autovivified,
such as if the package had been deleted.  Now this no longer occurs.
The <pre>
<span class="w">__ANON__</span></code>
 package is also now used when the original package is
no longer attached to the symbol table.  This avoids memory leaks in some
cases [perl #87664].</p>
</li>
<li>
<p>Subroutines and package variables inside a package whose name ends with
<pre>
<span class="w">::</span></code>
 can now be accessed with a fully qualified name.</p>
</li>
</ul>
<a id="Unicode"></a><h3 class='h3' >Unicode</h3>
<ul>
<li>
<p>What has become known as "the Unicode Bug" is almost completely resolved in
this release.  Under <pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">feature</span> <span class="q">&#39;unicode_strings&#39;</span></code>
 (which is
automatically selected by <pre>
<a class="l_k" href="functions/use.html">use</a> <span class="n">5.012</span></code>
 and above), the internal
storage format of a string no longer affects the external semantics.
[perl #58182].</p>
<p>There are two known exceptions:</p>
<dl>
<dt>1</dt><dd>
<p>The now-deprecated, user-defined case-changing
functions require utf8-encoded strings to operate.  The CPAN module
<a href="https://search.cpan.org/perldoc/Unicode::Casing">Unicode::Casing</a> has been written to replace this feature without its
drawbacks, and the feature is scheduled to be removed in 5.16.</p>
</dd>
<dt>2</dt><dd>
<p>quotemeta() (and its in-line equivalent <pre>
\<span class="w">Q</span></code>
) can also give different
results depending on whether a string is encoded in UTF-8.  See
<a href="perlunicode.html#The-%22Unicode-Bug%22">The Unicode Bug in perlunicode</a>.</p>
</dd>
</dl>
</li>
<li>
<p>Handling of Unicode non-character code points has changed.
Previously they were mostly considered illegal, except that in some
place only one of the 66 of them was known.  The Unicode Standard
considers them all legal, but forbids their "open interchange".
This is part of the change to allow internal use of any code
point (see <a href="#Core-Enhancements">Core Enhancements</a>).  Together, these changes resolve
[perl #38722], [perl #51918], [perl #51936], and [perl #63446].</p>
</li>
<li>
<p>Case-insensitive <pre>
<span class="q">&quot;/i&quot;</span></code>
 regular expression matching of Unicode
characters that match multiple characters now works much more as
intended.  For example</p>
<pre>
 <span class="q">&quot;\N{LATIN SMALL LIGATURE FFI}&quot;</span> =~ <span class="q">/ffi/ui</span></pre>
<p>and</p>
<pre>
 <span class="q">&quot;ffi&quot;</span> =~ <span class="q">/\N{LATIN SMALL LIGATURE FFI}/ui</span></pre>
<p>are both true.  Previously, there were many bugs with this feature.
What hasn't been fixed are the places where the pattern contains the
multiple characters, but the characters are split up by other things,
such as in</p>
<pre>
 <span class="q">&quot;\N{LATIN SMALL LIGATURE FFI}&quot;</span> =~ <span class="q">/(f)(f)i/ui</span></pre>
<p>or</p>
<pre>
 <span class="q">&quot;\N{LATIN SMALL LIGATURE FFI}&quot;</span> =~ <span class="q">/ffi*/ui</span></pre>
<p>or</p>
<pre>
 <span class="q">&quot;\N{LATIN SMALL LIGATURE FFI}&quot;</span> =~ <span class="q">/[a-f][f-m][g-z]/ui</span></pre>
<p>None of these match.</p>
<p>Also, this matching doesn't fully conform to the current Unicode
Standard, which asks that the matching be made upon the NFD
(Normalization Form Decomposed) of the text.  However, as of this
writing (April 2010), the Unicode Standard is currently in flux about
what they will recommend doing with regard in such scenarios.  It may be
that they will throw out the whole concept of multi-character matches.
[perl #71736].</p>
</li>
<li>
<p>Naming a deprecated character in <code class="inline">\N{<i>NAME</i>}</code> no longer leaks memory.</p>
</li>
<li>
<p>We fixed a bug that could cause <code class="inline">\N{<i>NAME</i>}</code> constructs followed by
a single <pre>
<span class="q">&quot;.&quot;</span></code>
 to be parsed incorrectly [perl #74978] (5.12.1).</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/chop.html">chop</a></code> now correctly handles characters above <pre>
<span class="q">&quot;\x{7fffffff}&quot;</span></code>

[perl #73246].</p>
</li>
<li>
<p>Passing to <code class="inline"><a class="l_k" href="functions/index.html">index</a></code> an offset beyond the end of the string when the string
is encoded internally in UTF8 no longer causes panics [perl #75898].</p>
</li>
<li>
<p>warn() and die() now respect utf8-encoded scalars [perl #45549].</p>
</li>
<li>
<p>Sometimes the UTF8 length cache would not be reset on a value
returned by substr, causing <pre>
<a class="l_k" href="functions/length.html">length</a><span class="s">(</span><a class="l_k" href="functions/substr.html">substr</a><span class="s">(</span><span class="i">$uni_string</span><span class="cm">,</span> ...<span class="s">)</span><span class="s">)</span></code>
 to give
wrong answers.  With <pre>
<span class="i">$</span>{<span class="w">^UTF8CACHE</span>}</code>
 set to -1, it would also produce
a "panic" error message [perl #77692].</p>
</li>
</ul>
<a id="Ties%2c-Overloading-and-Other-Magic"></a><h3 class='h3' >Ties, Overloading and Other Magic</h3>
<ul>
<li>
<p>Overloading now works properly in conjunction with tied
variables.  What formerly happened was that most ops checked their
arguments for overloading <i>before</i> checking for magic, so for example
an overloaded object returned by a tied array access would usually be
treated as not overloaded [RT #57012].</p>
</li>
<li>
<p>Various instances of magic (like tie methods) being called on tied variables
too many or too few times have been fixed:</p>
<ul>
<li>
<p><pre>
<span class="i">$tied</span>-&gt;<span class="s">(</span><span class="s">)</span></code>
 did not always call FETCH [perl #8438].</p>
</li>
<li>
<p>Filetest operators and <code class="inline"><a class="l_k" href="functions/y.html">y///</a></code> and <code class="inline"><a class="l_k" href="functions/tr.html">tr///</a></code> were calling FETCH too
many times.</p>
</li>
<li>
<p>The <pre>
=</code>
 operator used to ignore magic on its right-hand side if the
scalar happened to hold a typeglob (if a typeglob was the last thing
returned from or assigned to a tied scalar) [perl #77498].</p>
</li>
<li>
<p>Dereference operators used to ignore magic if the argument was a
reference already (such as from a previous FETCH) [perl #72144].</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/splice.html">splice</a></code> now calls set-magic (so changes made
by <pre>
<a class="l_k" href="functions/splice.html">splice</a> <span class="i">@ISA</span></code>
 are respected by method calls) [perl #78400].</p>
</li>
<li>
<p>In-memory files created by <pre>
<a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="i">$fh</span><span class="cm">,</span> <span class="q">&quot;&gt;&quot;</span><span class="cm">,</span> \<span class="i">$buffer</span><span class="s">)</span></code>
 were not calling
FETCH/STORE at all [perl #43789] (5.12.2).</p>
</li>
<li>
<p>utf8::is_utf8() now respects get-magic (like <pre>
<span class="i">$1</span></code>
) (5.12.1).</p>
</li>
</ul>
</li>
<li>
<p>Non-commutative binary operators used to swap their operands if the same
tied scalar was used for both operands and returned a different value for
each FETCH.  For instance, if <pre>
<span class="i">$t</span></code>
 returned 2 the first time and 3 the
second, then <pre>
<span class="i">$t</span>/<span class="i">$t</span></code>
 would evaluate to 1.5.  This has been fixed
[perl #87708].</p>
</li>
<li>
<p>String <code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code> now detects taintedness of overloaded or tied
arguments [perl #75716].</p>
</li>
<li>
<p>String <code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code> and regular expression matches against objects with string
overloading no longer cause memory corruption or crashes [perl #77084].</p>
</li>
<li>
<p><a href="functions/readline.html">readline EXPR</a> now honors <pre>
&lt;&gt;</code>
 overloading on tied
arguments.</p>
</li>
<li>
<p><pre>
<span class="q">&lt;expr&gt;</span></code>
 always respects overloading now if the expression is
overloaded.</p>
<p>Because "&lt;&gt; as glob" was parsed differently from
"&lt;&gt; as filehandle" from 5.6 onwards, something like <pre>
<span class="q">&lt;$foo[0]&gt;</span></code>
 did
not handle overloading, even if <pre>
<span class="i">$foo</span>[<span class="n">0</span>]</code>
 was an overloaded object.  This
was contrary to the documentation for <a href="overload.html">overload</a>, and meant that <pre>
&lt;&gt;</code>

could not be used as a general overloaded iterator operator.</p>
</li>
<li>
<p>The fallback behaviour of overloading on binary operators was asymmetric
[perl #71286].</p>
</li>
<li>
<p>Magic applied to variables in the main package no longer affects other packages.
See <a href="#Magic-variables-outside-the-main-package">Magic variables outside the main package</a> above [perl #76138].</p>
</li>
<li>
<p>Sometimes magic (ties, taintedness, etc.) attached to variables could cause
an object to last longer than it should, or cause a crash if a tied
variable were freed from within a tie method.  These have been fixed
[perl #81230].</p>
</li>
<li>
<p>DESTROY methods of objects implementing ties are no longer able to crash by
accessing the tied variable through a weak reference [perl #86328].</p>
</li>
<li>
<p>Fixed a regression of kill() when a match variable is used for the
process ID to kill [perl #75812].</p>
</li>
<li>
<p><pre>
<span class="i">$AUTOLOAD</span></code>
 used to remain tainted forever if it ever became tainted.  Now
it is correctly untainted if an autoloaded method is called and the method
name was not tainted.</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/sprintf.html">sprintf</a></code> now dies when passed a tainted scalar for the format.  It did
already die for arbitrary expressions, but not for simple scalars
[perl #82250].</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/lc.html">lc</a></code>, <code class="inline"><a class="l_k" href="functions/uc.html">uc</a></code>, <code class="inline"><a class="l_k" href="functions/lcfirst.html">lcfirst</a></code>, and <code class="inline"><a class="l_k" href="functions/ucfirst.html">ucfirst</a></code> no longer return untainted strings
when the argument is tainted.  This has been broken since perl 5.8.9
[perl #87336].</p>
</li>
</ul>
<a id="The-Debugger"></a><h3 class='h3' >The Debugger</h3>
<ul>
<li>
<p>The Perl debugger now also works in taint mode [perl #76872].</p>
</li>
<li>
<p>Subroutine redefinition works once more in the debugger [perl #48332].</p>
</li>
<li>
<p>When <strong>-d</strong> is used on the shebang (<pre>
<span class="c">#!</span></code>
) line, the debugger now has access
to the lines of the main program.  In the past, this sometimes worked and
sometimes did not, depending on the order in which things happened to be
arranged in memory [perl #71806].</p>
</li>
<li>
<p>A possible memory leak when using <a href="functions/caller.html">caller EXPR</a> to set
<pre>
<span class="i">@DB::args</span></code>
 has been fixed (5.12.2).</p>
</li>
<li>
<p>Perl no longer stomps on <pre>
<span class="i">$DB::single</span></code>
, <pre>
<span class="i">$DB::trace</span></code>
, and <pre>
<span class="i">$DB::signal</span></code>
 
if these variables already have values when <pre>
<span class="i">$^P</span></code>
 is assigned to [perl #72422].</p>
</li>
<li>
<p><pre>
<span class="c">#line</span></code>
 directives in string evals were not properly updating the arrays
of lines of code (<pre>
<span class="i">@</span>{<span class="q">&quot;_&lt; ...&quot;</span>}</code>
) that the debugger (or any debugging or
profiling module) uses.  In threaded builds, they were not being updated at
all.  In non-threaded builds, the line number was ignored, so any change to
the existing line number would cause the lines to be misnumbered
[perl #79442].</p>
</li>
</ul>
<a id="Threads"></a><h3 class='h3' >Threads</h3>
<ul>
<li>
<p>Perl no longer accidentally clones lexicals in scope within active stack
frames in the parent when creating a child thread [perl #73086].</p>
</li>
<li>
<p>Several memory leaks in cloning and freeing threaded Perl interpreters have been
fixed [perl #77352].</p>
</li>
<li>
<p>Creating a new thread when directory handles were open used to cause a
crash, because the handles were not cloned, but simply passed to the new
thread, resulting in a double free.</p>
<p>Now directory handles are cloned properly on Windows
and on systems that have a <pre>
<span class="w">fchdir</span></code>
 function.  On other
systems, new threads simply do not inherit directory
handles from their parent threads [perl #75154].</p>
</li>
<li>
<p>The typeglob <pre>
<span class="i">*,</span></code>
, which holds the scalar variable <pre>
<span class="i">$,</span></code>
 (output field
separator), had the wrong reference count in child threads.</p>
</li>
<li>
<p>[perl #78494] When pipes are shared between threads, the <code class="inline"><a class="l_k" href="functions/close.html">close</a></code> function
(and any implicit close, such as on thread exit) no longer blocks.</p>
</li>
<li>
<p>Perl now does a timely cleanup of SVs that are cloned into a new
thread but then discovered to be orphaned (that is, their owners
are <i>not</i> cloned).  This eliminates several "scalars leaked"
warnings when joining threads.</p>
</li>
</ul>
<a id="Scoping-and-Subroutines"></a><h3 class='h3' >Scoping and Subroutines</h3>
<ul>
<li>
<p>Lvalue subroutines are again able to return copy-on-write scalars.  This
had been broken since version 5.10.0 [perl #75656] (5.12.3).</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/require.html">require</a></code> no longer causes <code class="inline"><a class="l_k" href="functions/caller.html">caller</a></code> to return the wrong file name for
the scope that called <code class="inline"><a class="l_k" href="functions/require.html">require</a></code> and other scopes higher up that had the
same file name [perl #68712].</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/sort.html">sort</a></code> with a <pre>
<span class="s">(</span><span class="i">$$</span><span class="s">)</span></code>
-prototyped comparison routine used to cause the value
of <pre>
<span class="i">@_</span></code>
 to leak out of the sort.  Taking a reference to <pre>
<span class="i">@_</span></code>
 within the
sorting routine could cause a crash [perl #72334].</p>
</li>
<li>
<p>Match variables (like <pre>
<span class="i">$1</span></code>
) no longer persist between calls to a sort
subroutine [perl #76026].</p>
</li>
<li>
<p>Iterating with <code class="inline"><a class="l_k" href="functions/foreach.html">foreach</a></code> over an array returned by an lvalue sub now works
[perl #23790].</p>
</li>
<li>
<p><pre>
<span class="i">$@</span></code>
 is now localised during calls to <code class="inline"><a class="l_k" href="functions/binmode.html">binmode</a></code> to prevent action at a
distance [perl #78844].</p>
</li>
<li>
<p>Calling a closure prototype (what is passed to an attribute handler for a
closure) now results in a "Closure prototype called" error message instead
of a crash [perl #68560].</p>
</li>
<li>
<p>Mentioning a read-only lexical variable from the enclosing scope in a
string <code class="inline"><a class="l_k" href="functions/eval.html">eval</a></code> no longer causes the variable to become writable
[perl #19135].</p>
</li>
</ul>
<a id="Signals"></a><h3 class='h3' >Signals</h3>
<ul>
<li>
<p>Within signal handlers, <pre>
<span class="i">$!</span></code>
 is now implicitly localized.</p>
</li>
<li>
<p>CHLD signals are no longer unblocked after a signal handler is called if
they were blocked before by <pre>
<span class="w">POSIX::sigprocmask</span></code>
 [perl #82040].</p>
</li>
<li>
<p>A signal handler called within a signal handler could cause leaks or
double-frees.  Now fixed [perl #76248].</p>
</li>
</ul>
<a id="Miscellaneous-Memory-Leaks"></a><h3 class='h3' >Miscellaneous Memory Leaks</h3>
<ul>
<li>
<p>Several memory leaks when loading XS modules were fixed (5.12.2).</p>
</li>
<li>
<p><a href="functions/substr.html">substr EXPR,OFFSET,LENGTH,REPLACEMENT</a>,
<a href="functions/index.html">index STR,SUBSTR,POSITION</a>, <a href="functions/keys.html">keys HASH</a>,
and <a href="functions/vec.html">vec EXPR,OFFSET,BITS</a> could, when used in combination
with lvalues, result in leaking the scalar value they operate on, and cause its
destruction to happen too late.  This has now been fixed.</p>
</li>
<li>
<p>The postincrement and postdecrement operators, <pre>
++</code>
 and <pre>
--</code>
, used to cause
leaks when used on references.  This has now been fixed.</p>
</li>
<li>
<p>Nested <code class="inline"><a class="l_k" href="functions/map.html">map</a></code> and <code class="inline"><a class="l_k" href="functions/grep.html">grep</a></code> blocks no longer leak memory when processing
large lists [perl #48004].</p>
</li>
<li>
<p><code class="inline">use <i>VERSION</i></code> and <code class="inline">no <i>VERSION</i></code> no longer leak memory [perl #78436]
[perl #69050].</p>
</li>
<li>
<p><pre>
.=</code>
 followed by <pre>
&lt;&gt;</code>
 or <code class="inline"><a class="l_k" href="functions/readline.html">readline</a></code> would leak memory if <pre>
<span class="i">$/</span></code>

contained characters beyond the octet range and the scalar assigned to
happened to be encoded as UTF8 internally [perl #72246].</p>
</li>
<li>
<p><pre>
<a class="l_k" href="functions/eval.html">eval</a> <span class="q">&#39;BEGIN{die}&#39;</span></code>
 no longer leaks memory on non-threaded builds.</p>
</li>
</ul>
<a id="Memory-Corruption-and-Crashes"></a><h3 class='h3' >Memory Corruption and Crashes</h3>
<ul>
<li>
<p>glob() no longer crashes when <pre>
<span class="i">%File::Glob::</span></code>
 is empty and
<pre>
<span class="i">CORE::</span><span class="w">GLOBAL::glob</span></code>
 isn't present [perl #75464] (5.12.2).</p>
</li>
<li>
<p>readline() has been fixed when interrupted by signals so it no longer
returns the "same thing" as before or random memory.</p>
</li>
<li>
<p>When assigning a list with duplicated keys to a hash, the assignment used to
return garbage and/or freed values:</p>
<pre>
    <span class="i">@a</span> = <span class="i">%h</span> = <span class="s">(</span><span class="w">list</span> <span class="w">with</span> <span class="w">some</span> <span class="w">duplicate</span> <a class="l_k" href="functions/keys.html">keys</a><span class="s">)</span><span class="sc">;</span></pre>
<p>This has now been fixed [perl #31865].</p>
</li>
<li>
<p>The mechanism for freeing objects in globs used to leave dangling
pointers to freed SVs, meaning Perl users could see corrupted state
during destruction.</p>
<p>Perl now frees only the affected slots of the GV, rather than freeing
the GV itself.  This makes sure that there are no dangling refs or
corrupted state during destruction.</p>
</li>
<li>
<p>The interpreter no longer crashes when freeing deeply-nested arrays of
arrays.  Hashes have not been fixed yet [perl #44225].</p>
</li>
<li>
<p>Concatenating long strings under <pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">encoding</span></code>
 no longer causes Perl to
crash [perl #78674].</p>
</li>
<li>
<p>Calling <pre>
<span class="i">-&gt;import</span></code>
 on a class lacking an import method could corrupt
the stack, resulting in strange behaviour.  For instance,</p>
<pre>
  <a class="l_k" href="functions/push.html">push</a> <span class="i">@a</span><span class="cm">,</span> <span class="q">&quot;foo&quot;</span><span class="cm">,</span> <span class="i">$b</span> = <span class="w">bar</span><span class="w">-&gt;import</span><span class="sc">;</span></pre>
<p>would assign "foo" to <pre>
<span class="i">$b</span></code>
 [perl #63790].</p>
</li>
<li>
<p>The <code class="inline"><a class="l_k" href="functions/recv.html">recv</a></code> function could crash when called with the MSG_TRUNC flag
[perl #75082].</p>
</li>
<li>
<p><code class="inline"><a class="l_k" href="functions/formline.html">formline</a></code> no longer crashes when passed a tainted format picture.  It also
taints <pre>
<span class="i">$^A</span></code>
 now if its arguments are tainted [perl #79138].</p>
</li>
<li>
<p>A bug in how we process filetest operations could cause a segfault.
Filetests don't always expect an op on the stack, so we now use
TOPs only if we're sure that we're not <code class="inline"><a class="l_k" href="functions/stat.html">stat</a></code>ing the <pre>
<span class="w">_</span></code>
 filehandle.
This is indicated by <pre>
<span class="w">OPf_KIDS</span></code>
 (as checked in ck_ftst) [perl #74542]
(5.12.1).</p>
</li>
<li>
<p>unpack() now handles scalar context correctly for <pre>
<span class="i">%32H</span></code>
 and <pre>
<span class="i">%32u</span></code>
,
fixing a potential crash.  split() would crash because the third item
on the stack wasn't the regular expression it expected.  <pre>
<a class="l_k" href="functions/unpack.html">unpack</a><span class="s">(</span><span class="q">&quot;%2H&quot;</span><span class="cm">,</span>
...<span class="s">)</span></code>
 would return both the unpacked result and the checksum on the stack,
as would <pre>
<a class="l_k" href="functions/unpack.html">unpack</a><span class="s">(</span><span class="q">&quot;%2u&quot;</span><span class="cm">,</span> ...<span class="s">)</span></code>
 [perl #73814] (5.12.2).</p>
</li>
</ul>
<a id="Fixes-to-Various-Perl-Operators"></a><h3 class='h3' >Fixes to Various Perl Operators</h3>
<ul>
<li>
<p>The <pre>
<span class="i">&amp;</span></code>
, <code class="inline">|</code>, and <code class="inline">^</code> bitwise operators no longer coerce read-only arguments
[perl #20661].</p>
</li>
<li>
<p>Stringifying a scalar containing "-0.0" no longer has the effect of turning
false into true [perl #45133].</p>
</li>
<li>
<p>Some numeric operators were converting integers to floating point,
resulting in loss of precision on 64-bit platforms [perl #77456].</p>
</li>
<li>
<p>sprintf() was ignoring locales when called with constant arguments
[perl #78632].</p>
</li>
<li>
<p>Combining the vector (<pre>
<span class="i">%v</span></code>
) flag and dynamic precision would
cause <code class="inline"><a class="l_k" href="functions/sprintf.html">sprintf</a></code> to confuse the order of its arguments, making it 
treat the string as the precision and vice-versa [perl #83194].</p>
</li>
</ul>
<a id="Bugs-Relating-to-the-C-API"></a><h3 class='h3' >Bugs Relating to the C API</h3>
<ul>
<li>
<p>The C-level <pre>
<span class="w">lex_stuff_pvn</span></code>
 function would sometimes cause a spurious
syntax error on the last line of the file if it lacked a final semicolon
[perl #74006] (5.12.1).</p>
</li>
<li>
<p>The <pre>
<span class="w">eval_sv</span></code>
 and <pre>
<span class="w">eval_pv</span></code>
 C functions now set <pre>
<span class="i">$@</span></code>
 correctly when
there is a syntax error and no <pre>
<span class="w">G_KEEPERR</span></code>
 flag, and never set it if the
<pre>
<span class="w">G_KEEPERR</span></code>
 flag is present [perl #3719].</p>
</li>
<li>
<p>The XS multicall API no longer causes subroutines to lose reference counts
if called via the multicall interface from within those very subroutines.
This affects modules like <a href="List/Util.html">List::Util</a>.  Calling one of its functions with an
active subroutine as the first argument could cause a crash [perl #78070].</p>
</li>
<li>
<p>The <pre>
<span class="w">SvPVbyte</span></code>
 function available to XS modules now calls magic before
downgrading the SV, to avoid warnings about wide characters [perl #72398].</p>
</li>
<li>
<p>The ref types in the typemap for XS bindings now support magical variables
[perl #72684].</p>
</li>
<li>
<p><pre>
<span class="w">sv_catsv_flags</span></code>
 no longer calls <pre>
<span class="w">mg_get</span></code>
 on its second argument (the
source string) if the flags passed to it do not include SV_GMAGIC.  So it
now matches the documentation.</p>
</li>
<li>
<p><pre>
<span class="w">my_strftime</span></code>
 no longer leaks memory.  This fixes a memory leak in
<pre>
<span class="w">POSIX::strftime</span></code>
 [perl #73520].</p>
</li>
<li>
<p><i>XSUB.h</i> now correctly redefines fgets under PERL_IMPLICIT_SYS [perl #55049]
(5.12.1).</p>
</li>
<li>
<p>XS code using fputc() or fputs() on Windows could cause an error
due to their arguments being swapped [perl #72704] (5.12.1).</p>
</li>
<li>
<p>A possible segfault in the <pre>
<span class="w">T_PTROBJ</span></code>
 default typemap has been fixed
(5.12.2).</p>
</li>
<li>
<p>A bug that could cause "Unknown error" messages when
<pre>
<span class="i">call_sv</span><span class="s">(</span><span class="w">code</span><span class="cm">,</span> <span class="w">G_EVAL</span><span class="s">)</span></code>
 is called from an XS destructor has been fixed
(5.12.2).</p>
</li>
</ul>
<a id="Known-Problems"></a><h2 class='h2' >Known Problems</h2>
<p>This is a list of significant unresolved issues which are regressions
from earlier versions of Perl or which affect widely-used CPAN modules.</p>
<ul>
<li>
<p><pre>
<span class="w">List::Util::first</span></code>
 misbehaves in the presence of a lexical <pre>
<span class="i">$_</span></code>

(typically introduced by <pre>
<a class="l_k" href="functions/my.html">my</a> <span class="i">$_</span></code>
 or implicitly by <code class="inline"><a class="l_k" href="functions/given.html">given</a></code>).  The variable
that gets set for each iteration is the package variable <pre>
<span class="i">$_</span></code>
, not the
lexical <pre>
<span class="i">$_</span></code>
.</p>
<p>A similar issue may occur in other modules that provide functions which
take a block as their first argument, like</p>
<pre>
    <span class="i">foo</span> <span class="s">{</span> ... <span class="i">$_</span> ...<span class="s">}</span> <span class="w">list</span></pre>
<p>See also: <a href="http://rt.perl.org/rt3/Public/Bug/Display.html?id=67694">http://rt.perl.org/rt3/Public/Bug/Display.html?id=67694</a></p>
</li>
<li>
<p>readline() returns an empty string instead of a cached previous value
when it is interrupted by a signal</p>
</li>
<li>
<p>The changes in prototype handling break <a href="https://search.cpan.org/perldoc/Switch">Switch</a>.  A patch has been sent
upstream and will hopefully appear on CPAN soon.</p>
</li>
<li>
<p>The upgrade to <i>ExtUtils-MakeMaker-6.57_05</i> has caused
some tests in the <i>Module-Install</i> distribution on CPAN to
fail. (Specifically, <i>02_mymeta.t</i> tests 5 and 21; <i>18_all_from.t</i>
tests 6 and 15; <i>19_authors.t</i> tests 5, 13, 21, and 29; and
<i>20_authors_with_special_characters.t</i> tests 6, 15, and 23 in version
1.00 of that distribution now fail.)</p>
</li>
<li>
<p>On VMS, <pre>
<span class="w">Time::HiRes</span></code>
 tests will fail due to a bug in the CRTL's
implementation of <pre>
<span class="w">setitimer</span></code>
: previous timer values would be cleared
if a timer expired but not if the timer was reset before expiring.  HP
OpenVMS Engineering have corrected the problem and will release a patch
in due course (Quix case # QXCM1001115136).</p>
</li>
<li>
<p>On VMS, there were a handful of <pre>
<span class="w">Module::Build</span></code>
 test failures we didn't
get to before the release; please watch CPAN for updates.</p>
</li>
</ul>
<a id="Errata"></a><h2 class='h2' >Errata</h2>
<a id="keys()%2c-values()%2c-and-each()-work-on-arrays"></a><h3 class='h3' >keys(), values(), and each() work on arrays</h3>
<p>You can now use the keys(), values(), and each() builtins on arrays;
previously you could use them only on hashes.  See <a href="perlfunc.html">perlfunc</a> for details.
This is actually a change introduced in perl 5.12.0, but it was missed from
that release's <a href="perl5120delta.html">perl5120delta</a>.</p>
<a id="split()-and-%40_"></a><h3 class='h3' >split() and <pre>
<span class="i">@_</span></code>
</h3>
<p>split() no longer modifies <pre>
<span class="i">@_</span></code>
 when called in scalar or void context.
In void context it now produces a "Useless use of split" warning.
This was also a perl 5.12.0 change that missed the perldelta.</p>
<a id="Obituary"></a><h2 class='h2' >Obituary</h2>
<p>Randy Kobes, creator of <a href="http://kobesearch.cpan.org/">http://kobesearch.cpan.org/</a> and
contributor/maintainer to several core Perl toolchain modules, passed
away on September 18, 2010 after a battle with lung cancer.  The community
was richer for his involvement.  He will be missed.</p>
<a id="Acknowledgements"></a><h2 class='h2' >Acknowledgements</h2>
<p>Perl 5.14.0 represents one year of development since
Perl 5.12.0 and contains nearly 550,000 lines of changes across nearly
3,000 files from 150 authors and committers.</p>
<p>Perl continues to flourish into its third decade thanks to a vibrant
community of users and developers.  The following people are known to
have contributed the improvements that became Perl 5.14.0:</p>
<p>Aaron Crane, Abhijit Menon-Sen, Abigail, &#xc6;var Arnfj&#xf6;r&#xf0; Bjarmason,
Alastair Douglas, Alexander Alekseev, Alexander Hartmaier, Alexandr
Ciornii, Alex Davies, Alex Vandiver, Ali Polatel, Allen Smith, Andreas
K&#xf6;nig, Andrew Rodland, Andy Armstrong, Andy Dougherty, Aristotle
Pagaltzis, Arkturuz, Arvan, A. Sinan Unur, Ben Morrow, Bo Lindbergh,
Boris Ratner, Brad Gilbert, Bram, brian d foy, Brian Phillips, Casey
West, Charles Bailey, Chas. Owens, Chip Salzenberg, Chris 'BinGOs'
Williams, chromatic, Craig A. Berry, Curtis Jewell, Dagfinn Ilmari
Manns&#xe5;ker, Dan Dascalescu, Dave Rolsky, David Caldwell, David Cantrell,
David Golden, David Leadbeater, David Mitchell, David Wheeler, Eric
Brine, Father Chrysostomos, Fingle Nark, Florian Ragwitz, Frank Wiegand,
Franz Fasching, Gene Sullivan, George Greer, Gerard Goossen, Gisle Aas,
Goro Fuji, Grant McLean, gregor herrmann, H.Merijn Brand, Hongwen Qiu,
Hugo van der Sanden, Ian Goodacre, James E Keenan, James Mastros, Jan
Dubois, Jay Hannah, Jerry D. Hedden, Jesse Vincent, Jim Cromie, Jirka
Hru&#x161;ka, John Peacock, Joshua ben Jore, Joshua Pritikin, Karl Williamson,
Kevin Ryde, kmx, Lars D&#x26a;&#x1d07;&#x1d04;&#x1d0b;&#x1d0f;&#x1d21; &#x8fea;&#x62c9;&#x65af;, Larwan Berke, Leon Brocard, Leon
Timmermans, Lubomir Rintel, Lukas Mai, Maik Hentsche, Marty Pauley,
Marvin Humphrey, Matt Johnson, Matt S Trout, Max Maischein, Michael
Breen, Michael Fig, Michael G Schwern, Michael Parker, Michael Stevens,
Michael Witten, Mike Kelly, Moritz Lenz, Nicholas Clark, Nick Cleaton,
Nick Johnston, Nicolas Kaiser, Niko Tyni, Noirin Shirley, Nuno Carvalho,
Paul Evans, Paul Green, Paul Johnson, Paul Marquess, Peter J. Holzer,
Peter John Acklam, Peter Martini, Philippe Bruhat (BooK), Piotr Fusik,
Rafael Garcia-Suarez, Rainer Tammer, Reini Urban, Renee Baecker, Ricardo
Signes, Richard M&#xf6;hn, Richard Soderberg, Rob Hoelz, Robin Barker, Ruslan
Zakirov, Salvador Fandi&#xf1;o, Salvador Ortiz Garcia, Shlomi Fish, Sinan
Unur, Sisyphus, Slaven Rezic, Steffen M&#xfc;ller, Steve Hay, Steven
Schubiger, Steve Peters, Sullivan Beck, Tatsuhiko Miyagawa, Tim Bunce,
Todd Rinaldo, Tom Christiansen, Tom Hukins, Tony Cook, Tye McQueen,
Vadim Konovalov, Vernon Lyon, Vincent Pit, Walt Mankowski, Wolfram
Humann, Yves Orton, Zefram, and Zsb&#xe1;n Ambrus.</p>
<p>This is woefully incomplete as it's automatically generated from version
control history.  In particular, it doesn't include the names of the
(very much appreciated) contributors who reported issues in previous
versions of Perl that helped make Perl 5.14.0 better. For a more complete
list of all of Perl's historical contributors, please see the <pre>
<span class="w">AUTHORS</span></code>

file in the Perl 5.14.0 distribution.</p>
<p>Many of the changes included in this version originated in the CPAN
modules included in Perl's core. We're grateful to the entire CPAN
community for helping Perl to flourish.</p>
<a id="Reporting-Bugs"></a><h2 class='h2' >Reporting Bugs</h2>
<p>If you find what you think is a bug, you might check the articles
recently posted to the comp.lang.perl.misc newsgroup and the Perl
bug database at <a href="http://rt.perl.org/perlbug/">http://rt.perl.org/perlbug/</a> .  There may also be
information at <a href="http://www.perl.org/">http://www.perl.org/</a> , the Perl Home Page.</p>
<p>If you believe you have an unreported bug, please run the <a href="perlbug.html">perlbug</a>
program included with your release.  Be sure to trim your bug down
to a tiny but sufficient test case.  Your bug report, along with the
output of <pre>
<span class="w">perl</span> -<span class="w">V</span></code>
, will be sent off to perlbug@perl.org to be
analysed by the Perl porting team.</p>
<p>If the bug you are reporting has security implications, which make it
inappropriate to send to a publicly archived mailing list, then please send
it to perl5-security-report@perl.org.  This points to a closed subscription
unarchived mailing list, which includes all the core committers, who are able
to help assess the impact of issues, figure out a resolution, and help
co-ordinate the release of patches to mitigate or fix the problem across all
platforms on which Perl is supported.  Please use this address for
security issues in the Perl core <i>only</i>, not for modules independently
distributed on CPAN.</p>
<a id="SEE-ALSO"></a><h2 class='h2' >SEE ALSO</h2>
<p>The <i>Changes</i> file for an explanation of how to view exhaustive details
on what changed.</p>
<p>The <i>INSTALL</i> file for how to build Perl.</p>
<p>The <i>README</i> file for general stuff.</p>
<p>The <i>Artistic</i> and <i>Copying</i> files for copyright information.</p>




      <ul><li><a href="#NAME">NAME</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><li><a href="#Notice">Notice</a></li><li><a href="#Core-Enhancements">Core Enhancements</a></li><ul><li><a href="#Unicode">Unicode</a></li><li><a href="#Regular-Expressions">Regular Expressions</a></li><li><a href="#Syntactical-Enhancements">Syntactical Enhancements</a></li><li><a href="#Exception-Handling">Exception Handling</a></li><li><a href="#Other-Enhancements">Other Enhancements</a></li><li><a href="#New-C-APIs">New C APIs</a></li></ul><li><a href="#Security">Security</a></li><ul><li><a href="#User-defined-regular-expression-properties">User-defined regular expression properties</a></li></ul><li><a href="#Incompatible-Changes">Incompatible Changes</a></li><ul><li><a href="#Regular-Expressions-and-String-Escapes">Regular Expressions and String Escapes</a></li><li><a href="#Stashes-and-Package-Variables">Stashes and Package Variables</a></li><li><a href="#Changes-to-Syntax-or-to-Perl-Operators">Changes to Syntax or to Perl Operators</a></li><li><a href="#Threads-and-Processes">Threads and Processes</a></li><li><a href="#Configuration">Configuration</a></li></ul><li><a href="#Deprecations">Deprecations</a></li><ul><li><a href="#Omitting-a-space-between-a-regular-expression-and-subsequent-word">Omitting a space between a regular expression and subsequent word</a></li><li><a href="#%5cc_X_">\c_X_</a></li><li><a href="#%22%5cb%7b%22-and-%22%5cB%7b%22">"\b{" and "\B{"</a></li><li><a href="#Perl-4-era-.pl-libraries">Perl 4-era .pl libraries</a></li><li><a href="#List-assignment-to-%24%5b">List assignment to $[</a></li><li><a href="#Use-of-qw(...)-as-parentheses">Use of qw(...) as parentheses</a></li><li><a href="#%5cN%7bBELL%7d">\N{BELL}</a></li><li><a href="#%3fPATTERN%3f">?PATTERN?</a></li><li><a href="#Tie-functions-on-scalars-holding-typeglobs">Tie functions on scalars holding typeglobs</a></li><li><a href="#User-defined-case-mapping">User-defined case-mapping</a></li><li><a href="#Deprecated-modules">Deprecated modules</a></li></ul><li><a href="#Performance-Enhancements">Performance Enhancements</a></li><ul><li><a href="#%22Safe-signals%22-optimisation">"Safe signals" optimisation</a></li><li><a href="#Optimisation-of-shift()-and-pop()-calls-without-arguments">Optimisation of shift() and pop() calls without arguments</a></li><li><a href="#Optimisation-of-regexp-engine-string-comparison-work">Optimisation of regexp engine string comparison work</a></li><li><a href="#Regular-expression-compilation-speed-up">Regular expression compilation speed-up</a></li><li><a href="#String-appending-is-100-times-faster">String appending is 100 times faster</a></li><li><a href="#Eliminate-PL_*-accessor-functions-under-ithreads">Eliminate PL_* accessor functions under ithreads</a></li><li><a href="#Freeing-weak-references">Freeing weak references</a></li><li><a href="#Lexical-array-and-hash-assignments">Lexical array and hash assignments</a></li><li><a href="#%40_-uses-less-memory">@_ uses less memory</a></li><li><a href="#Size-optimisations-to-SV-and-HV-structures">Size optimisations to SV and HV structures</a></li><li><a href="#Memory-consumption-improvements-to-Exporter">Memory consumption improvements to Exporter</a></li><li><a href="#Memory-savings-for-weak-references">Memory savings for weak references</a></li><li><a href="#%25%2b-and-%25--use-less-memory">%+ and %- use less memory</a></li><li><a href="#Multiple-small-improvements-to-threads">Multiple small improvements to threads</a></li><li><a href="#Adjacent-pairs-of-nextstate-opcodes-are-now-optimized-away">Adjacent pairs of nextstate opcodes are now optimized away</a></li></ul><li><a href="#Modules-and-Pragmata">Modules and Pragmata</a></li><ul><li><a href="#New-Modules-and-Pragmata">New Modules and Pragmata</a></li><li><a href="#Updated-Modules-and-Pragma">Updated Modules and Pragma</a></li><li><a href="#Removed-Modules-and-Pragmata">Removed Modules and Pragmata</a></li></ul><li><a href="#Documentation">Documentation</a></li><ul><li><a href="#New-Documentation">New Documentation</a></li><li><a href="#Changes-to-Existing-Documentation">Changes to Existing Documentation</a></li></ul><li><a href="#Diagnostics">Diagnostics</a></li><ul><li><a href="#New-Diagnostics">New Diagnostics</a></li><li><a href="#Changes-to-Existing-Diagnostics">Changes to Existing Diagnostics</a></li></ul><li><a href="#Utility-Changes">Utility Changes</a></li><li><a href="#Configuration-and-Compilation">Configuration and Compilation</a></li><li><a href="#Platform-Support">Platform Support</a></li><ul><li><a href="#New-Platforms">New Platforms</a></li><li><a href="#Discontinued-Platforms">Discontinued Platforms</a></li><li><a href="#Platform-Specific-Notes">Platform-Specific Notes</a></li></ul><li><a href="#Internal-Changes">Internal Changes</a></li><ul><li><a href="#New-APIs">New APIs</a></li><li><a href="#C-API-Changes">C API Changes</a></li><li><a href="#Deprecated-C-APIs">Deprecated C APIs</a></li><li><a href="#Other-Internal-Changes">Other Internal Changes</a></li></ul><li><a href="#Selected-Bug-Fixes">Selected Bug Fixes</a></li><ul><li><a href="#I%2fO">I/O</a></li><li><a href="#Regular-Expression-Bug-Fixes">Regular Expression Bug Fixes</a></li><li><a href="#Syntax%2fParsing-Bugs">Syntax/Parsing Bugs</a></li><li><a href="#Stashes%2c-Globs-and-Method-Lookup">Stashes, Globs and Method Lookup</a></li><li><a href="#Unicode">Unicode</a></li><li><a href="#Ties%2c-Overloading-and-Other-Magic">Ties, Overloading and Other Magic</a></li><li><a href="#The-Debugger">The Debugger</a></li><li><a href="#Threads">Threads</a></li><li><a href="#Scoping-and-Subroutines">Scoping and Subroutines</a></li><li><a href="#Signals">Signals</a></li><li><a href="#Miscellaneous-Memory-Leaks">Miscellaneous Memory Leaks</a></li><li><a href="#Memory-Corruption-and-Crashes">Memory Corruption and Crashes</a></li><li><a href="#Fixes-to-Various-Perl-Operators">Fixes to Various Perl Operators</a></li><li><a href="#Bugs-Relating-to-the-C-API">Bugs Relating to the C API</a></li></ul><li><a href="#Known-Problems">Known Problems</a></li><li><a href="#Errata">Errata</a></li><ul><li><a href="#keys()%2c-values()%2c-and-each()-work-on-arrays">keys(), values(), and each() work on arrays</a></li><li><a href="#split()-and-%40_">split() and @_</a></li></ul><li><a href="#Obituary">Obituary</a></li><li><a href="#Acknowledgements">Acknowledgements</a></li><li><a href="#Reporting-Bugs">Reporting Bugs</a></li><li><a href="#SEE-ALSO">SEE ALSO</a></li></ul>


                </div>
              </article>
          </div>
        </div>
      </main>
    </div>
    <footer class="footer row bg-light pt-5 pb-5">
      <div class="col-sm-8 offset-sm-2">
        <div class="row">
          <div class="col-md-4">
            <ul class="list-unstyled">
              <li>
                <h4>Site info</h4>
              </li>
              <li>Docs mantained by
                <a href="//lists.cpan.org/showlist.cgi?name=perl5-porters" rel="noopener">Perl 5 Porters</a>
              </li>
              <li>Site development sponsored by
                <a href="//opusvl.com" rel="noopener"><img class="opus-logo" src="/public/img/opusvl_logo.svg" alt="OpusVL Logo"></a>
              </li>
            </ul>
          </div>
          <div class="col-md-8">
            <div class="row">
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Manual</h4>
                  </li>
                  <li>
                    <a href="/5/24/2/index-overview.html">Overview</a>
                  </li>
                  <li>
                    <a href="/5/24/2/index-tutorials.html">Tutorials</a>
                  </li>
                  <li>
                    <a href="/5/24/2/index-faq.html">FAQs</a>
                  </li>
                  <li>
                    <a href="/5/24/2/index-history.html">Changes</a>
                  </li>
                </ul>
              </div>
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Reference</h4>
                  </li>
                  <li>
                    <a href="/5/24/2/index-language.html">Language</a>
                  </li>
                  <li>
                    <a href="/5/24/2/index-functions.html">Functions</a>
                  </li>
                  <li>
                    <a href="/5/24/2/perlop.html">Operators</a>
                  </li>
                  <li>
                    <a href="/5/24/2/perlvar.html">Variables</a>
                  </li>
                </ul>
              </div>
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Modules</h4>
                  </li>
                  <li>
                    <a href="/5/24/2/index-modules-A.html">Modules</a>
                  </li>
                  <li>
                    <a href="/5/24/2/index-pragmas.html">Pragmas</a>
                  </li>
                  <li>
                    <a href="/5/24/2/index-utilities.html">Utilities</a>
                  </li>
                </ul>
              </div>
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Misc</h4>
                  </li>
                  <li>
                    <a href="/5/24/2/index-licence.html">License</a>
                  </li>
                  <li>
                    <a href="/5/24/2/index-internals.html">Internals</a>
                  </li>
                  <li>
                    <a href="/5/24/2/index-platforms.html">Platforms</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class=" col-12 footer-inf text-center">
            <small>perldoc.perl.org - Official documentation for the Perl programming language</small>
          </div>
        </div>
      </div>
    </footer>
    <div class="beta-wrapper beta-bottom-right ">
      <div class="beta beta-blue  ">
        <a class="beta-link " href="https://github.com/OpusVL/perldoc.perl.org/issues/new" rel="noopener">
          <span class="beta-text">
            This is a Beta release.
          </span>
          <span class="beta-text">
            For any issues please raise a ticket on GitHub
          </span>
        </a>
      </div>
    </div>
    <script src="/public/js/main.min.js"></script>
  </body>
</html>
