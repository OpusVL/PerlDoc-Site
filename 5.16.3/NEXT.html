<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="NEXT - perldoc.perl.org">
    <link rel="icon" href="/public/img/favicon.ico">
    <title>NEXT - perldoc.perl.org</title>
    <link href="/public/css/main.min.css" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Lato:400,100,300,700,900' rel='stylesheet' type='text/css'>
    <script>
            window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
            ga('create', 'UA-1892152-2', 'auto');  // JJ's account
            ga('create', 'UA-50555-3', 'auto', 'perlOrg');   // perl.org account
            ga('require', 'outboundLinkTracker', {
              events: ['click', 'auxclick', 'contextmenu'],
            });
            ga('require', 'maxScrollTracker');
            ga('send', 'pageview');
            ga('perlOrg.send', 'pageview');
    </script>
    <script async src="https://www.google-analytics.com/analytics.js"></script>
    <script async src="/public/js/tracking.min.js"></script>
  </head>
  <body class="body container-fluid ">
    <div class="wrapper">
        <nav class="navbar navbar-expand-md navbar-dark bg-primary bg-perl fixed-top justify-content-between">
          <a class="navbar-brand" href="/">
            <object class="logo" data="/public/img/logo_perl_doc.svg" type="image/svg+xml" name="Perl Documentation Logo">Perl Documentation Logo</object>
          </a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div id="navbar" class="collapse navbar-collapse justify-content-end">
            <ul class="nav navbar-nav navbar-right">
              <li class="nav-item dropdown">
                <a id="navbarDropdown" href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Perl versions</a>
                <div class="dropdown-menu" id="dropdown-menu-links" aria-labelledby="navbarDropdown">
                </div>
              </li>
              <li class="nav-item dropdown">
                <a id="navbarDropdown1" href="#" class="dropdown-toggle nav-link" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Manuals</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown1">
                  <a class="dropdown-item" href="/5.16.3/index-overview.html">Overview</a>
                  <a class="dropdown-item" href="/5.16.3/index-tutorials.html">Tutorials</a>
                  <a class="dropdown-item" href="/5.16.3/index-faq.html">FAQs</a>
                  <a class="dropdown-item" href="/5.16.3/index-history.html">History / Changes</a>
                  <a class="dropdown-item" href="/5.16.3/index-licence.html">License</a>
                  <a class="dropdown-item" href="/5.16.3/index-language.html">Language</a>
                  <a class="dropdown-item" href="/5.16.3/index-functions.html">Functions</a>
                  <a class="dropdown-item" href="/5.16.3/perlop.html">Operators</a>
                  <a class="dropdown-item" href="/5.16.3/perlvar.html">Special Variables</a>
                  <a class="dropdown-item" href="/5.16.3/index-pragmas.html">Pragmas</a>
                  <a class="dropdown-item" href="/5.16.3/index-utilities.html">Utilities</a>
                  <a class="dropdown-item" href="/5.16.3/index-internals.html">Internals</a>
                  <a class="dropdown-item" href="/5.16.3/index-platforms.html">Platform Specific</a>
                </div>
              </li>
              <li class="nav-item dropdown">
                <a id="navbarDropdown3" href="#" class="nav-link dropdown-toggle " data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Modules</a>
                <div aria-labelledby="navbarDropdown3" class="dropdown-menu letters-wrap">
                  <a class="dropdown-item" href="/5.16.3/index-functions.html">A-Z</a>
                  <a class="dropdown-item" href="/5.16.3/index-functions-by-cat.html">By Category</a>
                  <div class="dropdown-divider"></div>
                  <div class="letter-container">
                    <a class="dropdown-item letters" href="/5.16.3/index-modules-A.html">A</a>
                    <a class="dropdown-item letters" href="/5.16.3/index-modules-B.html">B</a>
                    <a class="dropdown-item letters" href="/5.16.3/index-modules-C.html">C</a>
                    <a class="dropdown-item letters" href="/5.16.3/index-modules-D.html">D</a>
                    <a class="dropdown-item letters" href="/5.16.3/index-modules-E.html">E</a>
                    <a class="dropdown-item letters" href="/5.16.3/index-modules-F.html">F</a>
                    <a class="dropdown-item letters" href="/5.16.3/index-modules-G.html">G</a>
                    <a class="dropdown-item letters" href="/5.16.3/index-modules-H.html">H</a>
                    <a class="dropdown-item letters" href="/5.16.3/index-modules-I.html">I</a>
                    <a class="dropdown-item letters" href="/5.16.3/index-modules-J.html">J</a>
                    <a class="dropdown-item letters" href="/5.16.3/index-modules-L.html">L</a>
                    <a class="dropdown-item letters" href="/5.16.3/index-modules-M.html">M</a>
                    <a class="dropdown-item letters" href="/5.16.3/index-modules-N.html">N</a>
                    <a class="dropdown-item letters" href="/5.16.3/index-modules-O.html">O</a>
                    <a class="dropdown-item letters" href="/5.16.3/index-modules-P.html">P</a>
                    <a class="dropdown-item letters" href="/5.16.3/index-modules-S.html">S</a>
                    <a class="dropdown-item letters" href="/5.16.3/index-modules-T.html">T</a>
                    <a class="dropdown-item letters" href="/5.16.3/index-modules-U.html">U</a>
                    <a class="dropdown-item letters" href="/5.16.3/index-modules-X.html">X</a>
                    </div>
                </div>
              </li>
            </ul>
          </div>
          <!--/.nav-collapse -->
        </nav>

      <main class="row main-content pb-5 pt-5">
        <div class="col-sm-8 offset-sm-2">
          <div class="row">
            <div class="col-sm-12">
                <div id="breadcrumbs">
                    
    <a href="index.html">Home</a>&nbsp; &gt;
    
      
        <a href="index-modules-N.html">Core modules (N)</a> &gt;
      
    
    NEXT
  

                </div>
            </div>
          </div>
          <div class="row">
              <article class="col-sm-12 content">
                <div class="documentation-wrapper">
                  <div id="perl_version">
                    <h1 class='page-title'> Perl 5 version 16.3 documentation</h1>
                  </div>
                  <h1>NEXT</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a></li><li><a href="#SYNOPSIS">SYNOPSIS</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><ul><li><a href="#Enforcing-redispatch">Enforcing redispatch</a></li><li><a href="#Avoiding-repetitions">Avoiding repetitions</a></li><li><a href="#Invoking-all-versions-of-a-method-with-a-single-call">Invoking all versions of a method with a single call</a></li><li><a href="#Using-EVERY-methods">Using EVERY methods</a></li></ul><li><a href="#AUTHOR">AUTHOR</a></li><li><a href="#BUGS-AND-IRRITATIONS">BUGS AND IRRITATIONS</a></li><li><a href="#COPYRIGHT">COPYRIGHT</a></li></ul><a id="NAME"></a><h2 class='h2' >NAME</h2>
<p>NEXT.pm - Provide a pseudo-class NEXT (et al) that allows method redispatch</p>
<a id="SYNOPSIS"></a><h2 class='h2' >SYNOPSIS</h2>
<pre>
    <a class="l_k" href="functions/use.html">use</a> <span class="w">NEXT</span><span class="sc">;</span>

<a name="package-A"></a>    package <span class="i">A</span><span class="sc">;</span>
<a name="A::method"></a>    sub <span class="m">A::method</span>   <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;$_[0]: A method\n&quot;</span><span class="sc">;</span>   <span class="i">$_</span>[<span class="n">0</span>]<span class="i">-&gt;NEXT::method</span><span class="s">(</span><span class="s">)</span> <span class="s">}</span>
<a name="A::DESTROY"></a>    sub <span class="m">A::DESTROY</span>  <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;$_[0]: A dtor\n&quot;</span><span class="sc">;</span>     <span class="i">$_</span>[<span class="n">0</span>]<span class="i">-&gt;NEXT::DESTROY</span><span class="s">(</span><span class="s">)</span> <span class="s">}</span>

<a name="package-B"></a>    package <span class="i">B</span><span class="sc">;</span>
    <a class="l_k" href="functions/use.html">use</a> <span class="w">base</span> <span class="q">qw( A )</span><span class="sc">;</span>
<a name="B::AUTOLOAD"></a>    sub <span class="m">B::AUTOLOAD</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;$_[0]: B AUTOLOAD\n&quot;</span><span class="sc">;</span> <span class="i">$_</span>[<span class="n">0</span>]<span class="i">-&gt;NEXT::AUTOLOAD</span><span class="s">(</span><span class="s">)</span> <span class="s">}</span>
<a name="B::DESTROY"></a>    sub <span class="m">B::DESTROY</span>  <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;$_[0]: B dtor\n&quot;</span><span class="sc">;</span>     <span class="i">$_</span>[<span class="n">0</span>]<span class="i">-&gt;NEXT::DESTROY</span><span class="s">(</span><span class="s">)</span> <span class="s">}</span>

<a name="package-C"></a>    package <span class="i">C</span><span class="sc">;</span>
<a name="C::method"></a>    sub <span class="m">C::method</span>   <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;$_[0]: C method\n&quot;</span><span class="sc">;</span>   <span class="i">$_</span>[<span class="n">0</span>]<span class="i">-&gt;NEXT::method</span><span class="s">(</span><span class="s">)</span> <span class="s">}</span>
<a name="C::AUTOLOAD"></a>    sub <span class="m">C::AUTOLOAD</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;$_[0]: C AUTOLOAD\n&quot;</span><span class="sc">;</span> <span class="i">$_</span>[<span class="n">0</span>]<span class="i">-&gt;NEXT::AUTOLOAD</span><span class="s">(</span><span class="s">)</span> <span class="s">}</span>
<a name="C::DESTROY"></a>    sub <span class="m">C::DESTROY</span>  <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;$_[0]: C dtor\n&quot;</span><span class="sc">;</span>     <span class="i">$_</span>[<span class="n">0</span>]<span class="i">-&gt;NEXT::DESTROY</span><span class="s">(</span><span class="s">)</span> <span class="s">}</span>

<a name="package-D"></a>    package <span class="i">D</span><span class="sc">;</span>
    <a class="l_k" href="functions/use.html">use</a> <span class="w">base</span> <span class="q">qw( B C )</span><span class="sc">;</span>
<a name="D::method"></a>    sub <span class="m">D::method</span>   <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;$_[0]: D method\n&quot;</span><span class="sc">;</span>   <span class="i">$_</span>[<span class="n">0</span>]<span class="i">-&gt;NEXT::method</span><span class="s">(</span><span class="s">)</span> <span class="s">}</span>
<a name="D::AUTOLOAD"></a>    sub <span class="m">D::AUTOLOAD</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;$_[0]: D AUTOLOAD\n&quot;</span><span class="sc">;</span> <span class="i">$_</span>[<span class="n">0</span>]<span class="i">-&gt;NEXT::AUTOLOAD</span><span class="s">(</span><span class="s">)</span> <span class="s">}</span>
<a name="D::DESTROY"></a>    sub <span class="m">D::DESTROY</span>  <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;$_[0]: D dtor\n&quot;</span><span class="sc">;</span>     <span class="i">$_</span>[<span class="n">0</span>]<span class="i">-&gt;NEXT::DESTROY</span><span class="s">(</span><span class="s">)</span> <span class="s">}</span>

<a name="package-main"></a>    package <span class="i">main</span><span class="sc">;</span>

    <a class="l_k" href="functions/my.html">my</a> <span class="i">$obj</span> = <a class="l_k" href="functions/bless.html">bless</a> <span class="s">{</span><span class="s">}</span><span class="cm">,</span> <span class="q">&quot;D&quot;</span><span class="sc">;</span>

    <span class="i">$obj</span><span class="i">-&gt;method</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>		<span class="c"># Calls D::method, A::method, C::method</span>
    <span class="i">$obj</span><span class="i">-&gt;missing_method</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span> <span class="c"># Calls D::AUTOLOAD, B::AUTOLOAD, C::AUTOLOAD</span>

    <span class="c"># Clean-up calls D::DESTROY, B::DESTROY, A::DESTROY, C::DESTROY</span></pre>
<a id="DESCRIPTION"></a><h2 class='h2' >DESCRIPTION</h2>
<p>NEXT.pm adds a pseudoclass named <pre>
<span class="w">NEXT</span></code>
 to any program
that uses it. If a method <code class="inline"><a class="l_k" href="functions/m.html">m</a></code> calls <pre>
<span class="i">$self</span><span class="i">-&gt;NEXT::m</span><span class="s">(</span><span class="s">)</span></code>
, the call to
<code class="inline"><a class="l_k" href="functions/m.html">m</a></code> is redispatched as if the calling method had not originally been found.</p>
<p>In other words, a call to <pre>
<span class="i">$self</span><span class="i">-&gt;NEXT::m</span><span class="s">(</span><span class="s">)</span></code>
 resumes the depth-first,
left-to-right search of <pre>
<span class="i">$self</span></code>
's class hierarchy that resulted in the
original call to <code class="inline"><a class="l_k" href="functions/m.html">m</a></code>.</p>
<p>Note that this is not the same thing as <pre>
<span class="i">$self</span><span class="i">-&gt;SUPER::m</span><span class="s">(</span><span class="s">)</span></code>
, which
begins a new dispatch that is restricted to searching the ancestors
of the current class. <pre>
<span class="i">$self</span><span class="i">-&gt;NEXT::m</span><span class="s">(</span><span class="s">)</span></code>
 can backtrack
past the current class -- to look for a suitable method in other
ancestors of <pre>
<span class="i">$self</span></code>
 -- whereas <pre>
<span class="i">$self</span><span class="i">-&gt;SUPER::m</span><span class="s">(</span><span class="s">)</span></code>
 cannot.</p>
<p>A typical use would be in the destructors of a class hierarchy,
as illustrated in the synopsis above. Each class in the hierarchy
has a DESTROY method that performs some class-specific action
and then redispatches the call up the hierarchy. As a result,
when an object of class D is destroyed, the destructors of <i>all</i>
its parent classes are called (in depth-first, left-to-right order).</p>
<p>Another typical use of redispatch would be in <code class="inline"><a class="l_k" href="functions/AUTOLOAD.html">AUTOLOAD</a></code>'ed methods.
If such a method determined that it was not able to handle a
particular call, it might choose to redispatch that call, in the
hope that some other <code class="inline"><a class="l_k" href="functions/AUTOLOAD.html">AUTOLOAD</a></code> (above it, or to its left) might
do better.</p>
<p>By default, if a redispatch attempt fails to find another method
elsewhere in the objects class hierarchy, it quietly gives up and does
nothing (but see <a href="#Enforcing-redispatch">Enforcing redispatch</a>). This gracious acquiescence
is also unlike the (generally annoying) behaviour of <pre>
<span class="w">SUPER</span></code>
, which
throws an exception if it cannot redispatch.</p>
<p>Note that it is a fatal error for any method (including <code class="inline"><a class="l_k" href="functions/AUTOLOAD.html">AUTOLOAD</a></code>)
to attempt to redispatch any method that does not have the
same name. For example:</p>
<pre>
<a name="D::oops"></a>        sub <span class="m">D::oops</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;oops!\n&quot;</span><span class="sc">;</span> <span class="i">$_</span>[<span class="n">0</span>]<span class="i">-&gt;NEXT::other_method</span><span class="s">(</span><span class="s">)</span> <span class="s">}</span></pre>
<a id="Enforcing-redispatch"></a><h3 class='h3' >Enforcing redispatch</h3>
<p>It is possible to make <pre>
<span class="w">NEXT</span></code>
 redispatch more demandingly (i.e. like
<pre>
<span class="w">SUPER</span></code>
 does), so that the redispatch throws an exception if it cannot
find a "next" method to call.</p>
<p>To do this, simple invoke the redispatch as:</p>
<pre>
	<span class="i">$self</span><span class="i">-&gt;NEXT::ACTUAL::method</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></pre>
<p>rather than:</p>
<pre>
	<span class="i">$self</span><span class="i">-&gt;NEXT::method</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></pre>
<p>The <pre>
<span class="w">ACTUAL</span></code>
 tells <pre>
<span class="w">NEXT</span></code>
 that there must actually be a next method to call,
or it should throw an exception.</p>
<p><pre>
<span class="w">NEXT::ACTUAL</span></code>
 is most commonly used in <code class="inline"><a class="l_k" href="functions/AUTOLOAD.html">AUTOLOAD</a></code> methods, as a means to
decline an <code class="inline"><a class="l_k" href="functions/AUTOLOAD.html">AUTOLOAD</a></code> request, but preserve the normal exception-on-failure 
semantics:</p>
<pre>
<a name="AUTOLOAD"></a>	sub <span class="m">AUTOLOAD</span> <span class="s">{</span>
		<a class="l_k" href="functions/if.html">if</a> <span class="s">(</span><span class="i">$AUTOLOAD</span> =~ <span class="q">/foo|bar/</span><span class="s">)</span> <span class="s">{</span>
			<span class="c"># handle here</span>
		<span class="s">}</span>
		<a class="l_k" href="functions/else.html">else</a> <span class="s">{</span>  <span class="c"># try elsewhere</span>
			<a class="l_k" href="functions/shift.html">shift</a><span class="s">(</span><span class="s">)</span><span class="i">-&gt;NEXT::ACTUAL::AUTOLOAD</span><span class="s">(</span><span class="i">@_</span><span class="s">)</span><span class="sc">;</span>
		<span class="s">}</span>
	<span class="s">}</span></pre>
<p>By using <pre>
<span class="w">NEXT::ACTUAL</span></code>
, if there is no other <code class="inline"><a class="l_k" href="functions/AUTOLOAD.html">AUTOLOAD</a></code> to handle the
method call, an exception will be thrown (as usually happens in the absence of
a suitable <code class="inline"><a class="l_k" href="functions/AUTOLOAD.html">AUTOLOAD</a></code>).</p>
<a id="Avoiding-repetitions"></a><h3 class='h3' >Avoiding repetitions</h3>
<p>If <pre>
<span class="w">NEXT</span></code>
 redispatching is used in the methods of a "diamond" class hierarchy:</p>
<pre>
	<span class="c">#     A   B</span>
	<span class="c">#    / \ /</span>
	<span class="c">#   C   D</span>
	<span class="c">#    \ /</span>
	<span class="c">#     E</span>

	<a class="l_k" href="functions/use.html">use</a> <span class="w">NEXT</span><span class="sc">;</span>

<a name="package-A"></a>	package <span class="i">A</span><span class="sc">;</span>                 
<a name="foo"></a>	sub <span class="m">foo</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;called A::foo\n&quot;</span><span class="sc">;</span> <a class="l_k" href="functions/shift.html">shift</a><span class="i">-&gt;NEXT::foo</span><span class="s">(</span><span class="s">)</span> <span class="s">}</span>

<a name="package-B"></a>	package <span class="i">B</span><span class="sc">;</span>                 
<a name="foo-1"></a>	sub <span class="m">foo</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;called B::foo\n&quot;</span><span class="sc">;</span> <a class="l_k" href="functions/shift.html">shift</a><span class="i">-&gt;NEXT::foo</span><span class="s">(</span><span class="s">)</span> <span class="s">}</span>

<a name="package-C"></a>	package <span class="i">C</span><span class="sc">;</span> <span class="i">@ISA</span> = <span class="q">qw( A )</span><span class="sc">;</span>
<a name="foo-2"></a>	sub <span class="m">foo</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;called C::foo\n&quot;</span><span class="sc">;</span> <a class="l_k" href="functions/shift.html">shift</a><span class="i">-&gt;NEXT::foo</span><span class="s">(</span><span class="s">)</span> <span class="s">}</span>

<a name="package-D"></a>	package <span class="i">D</span><span class="sc">;</span> <span class="i">@ISA</span> = <span class="q">qw(A B)</span><span class="sc">;</span>
<a name="foo-3"></a>	sub <span class="m">foo</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;called D::foo\n&quot;</span><span class="sc">;</span> <a class="l_k" href="functions/shift.html">shift</a><span class="i">-&gt;NEXT::foo</span><span class="s">(</span><span class="s">)</span> <span class="s">}</span>

<a name="package-E"></a>	package <span class="i">E</span><span class="sc">;</span> <span class="i">@ISA</span> = <span class="q">qw(C D)</span><span class="sc">;</span>
<a name="foo-4"></a>	sub <span class="m">foo</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;called E::foo\n&quot;</span><span class="sc">;</span> <a class="l_k" href="functions/shift.html">shift</a><span class="i">-&gt;NEXT::foo</span><span class="s">(</span><span class="s">)</span> <span class="s">}</span>

	<span class="w">E</span><span class="w">-&gt;foo</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></pre>
<p>then derived classes may (re-)inherit base-class methods through two or
more distinct paths (e.g. in the way <pre>
<span class="w">E</span></code>
 inherits <pre>
<span class="w">A::foo</span></code>
 twice --
through <pre>
<span class="w">C</span></code>
 and <pre>
<span class="w">D</span></code>
). In such cases, a sequence of <pre>
<span class="w">NEXT</span></code>
 redispatches
will invoke the multiply inherited method as many times as it is
inherited. For example, the above code prints:</p>
<pre>
        <span class="w">called</span> <span class="w">E::foo</span>
        <span class="w">called</span> <span class="w">C::foo</span>
        <span class="w">called</span> <span class="w">A::foo</span>
        <span class="w">called</span> <span class="w">D::foo</span>
        <span class="w">called</span> <span class="w">A::foo</span>
        <span class="w">called</span> <span class="w">B::foo</span></pre>
<p>(i.e. <pre>
<span class="w">A::foo</span></code>
 is called twice).</p>
<p>In some cases this <i>may</i> be the desired effect within a diamond hierarchy,
but in others (e.g. for destructors) it may be more appropriate to 
call each method only once during a sequence of redispatches.</p>
<p>To cover such cases, you can redispatch methods via:</p>
<pre>
        <span class="i">$self</span><span class="i">-&gt;NEXT::DISTINCT::method</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></pre>
<p>rather than:</p>
<pre>
        <span class="i">$self</span><span class="i">-&gt;NEXT::method</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></pre>
<p>This causes the redispatcher to only visit each distinct <pre>
<span class="w">method</span></code>
 method
once. That is, to skip any classes in the hierarchy that it has
already visited during redispatch. So, for example, if the
previous example were rewritten:</p>
<pre>
<a name="package-A"></a>        package <span class="i">A</span><span class="sc">;</span>                 
<a name="foo"></a>        sub <span class="m">foo</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;called A::foo\n&quot;</span><span class="sc">;</span> <a class="l_k" href="functions/shift.html">shift</a><span class="i">-&gt;NEXT::DISTINCT::foo</span><span class="s">(</span><span class="s">)</span> <span class="s">}</span>

<a name="package-B"></a>        package <span class="i">B</span><span class="sc">;</span>                 
<a name="foo-1"></a>        sub <span class="m">foo</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;called B::foo\n&quot;</span><span class="sc">;</span> <a class="l_k" href="functions/shift.html">shift</a><span class="i">-&gt;NEXT::DISTINCT::foo</span><span class="s">(</span><span class="s">)</span> <span class="s">}</span>

<a name="package-C"></a>        package <span class="i">C</span><span class="sc">;</span> <span class="i">@ISA</span> = <span class="q">qw( A )</span><span class="sc">;</span>
<a name="foo-2"></a>        sub <span class="m">foo</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;called C::foo\n&quot;</span><span class="sc">;</span> <a class="l_k" href="functions/shift.html">shift</a><span class="i">-&gt;NEXT::DISTINCT::foo</span><span class="s">(</span><span class="s">)</span> <span class="s">}</span>

<a name="package-D"></a>        package <span class="i">D</span><span class="sc">;</span> <span class="i">@ISA</span> = <span class="q">qw(A B)</span><span class="sc">;</span>
<a name="foo-3"></a>        sub <span class="m">foo</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;called D::foo\n&quot;</span><span class="sc">;</span> <a class="l_k" href="functions/shift.html">shift</a><span class="i">-&gt;NEXT::DISTINCT::foo</span><span class="s">(</span><span class="s">)</span> <span class="s">}</span>

<a name="package-E"></a>        package <span class="i">E</span><span class="sc">;</span> <span class="i">@ISA</span> = <span class="q">qw(C D)</span><span class="sc">;</span>
<a name="foo-4"></a>        sub <span class="m">foo</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;called E::foo\n&quot;</span><span class="sc">;</span> <a class="l_k" href="functions/shift.html">shift</a><span class="i">-&gt;NEXT::DISTINCT::foo</span><span class="s">(</span><span class="s">)</span> <span class="s">}</span>

        <span class="w">E</span><span class="w">-&gt;foo</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></pre>
<p>then it would print:</p>
<pre>
        <span class="w">called</span> <span class="w">E::foo</span>
        <span class="w">called</span> <span class="w">C::foo</span>
        <span class="w">called</span> <span class="w">A::foo</span>
        <span class="w">called</span> <span class="w">D::foo</span>
        <span class="w">called</span> <span class="w">B::foo</span></pre>
<p>and omit the second call to <pre>
<span class="w">A::foo</span></code>
 (since it would not be distinct
from the first call to <pre>
<span class="w">A::foo</span></code>
).</p>
<p>Note that you can also use:</p>
<pre>
        <span class="i">$self</span><span class="i">-&gt;NEXT::DISTINCT::ACTUAL::method</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></pre>
<p>or:</p>
<pre>
        <span class="i">$self</span><span class="i">-&gt;NEXT::ACTUAL::DISTINCT::method</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></pre>
<p>to get both unique invocation <i>and</i> exception-on-failure.</p>
<p>Note that, for historical compatibility, you can also use
<pre>
<span class="w">NEXT::UNSEEN</span></code>
 instead of <pre>
<span class="w">NEXT::DISTINCT</span></code>
.</p>
<a id="Invoking-all-versions-of-a-method-with-a-single-call"></a><h3 class='h3' >Invoking all versions of a method with a single call</h3>
<p>Yet another pseudo-class that NEXT.pm provides is <pre>
<span class="w">EVERY</span></code>
.
Its behaviour is considerably simpler than that of the <pre>
<span class="w">NEXT</span></code>
 family.
A call to:</p>
<pre>
	<span class="i">$obj</span><span class="i">-&gt;EVERY::foo</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span></pre>
<p>calls <i>every</i> method named <pre>
<span class="w">foo</span></code>
 that the object in <pre>
<span class="i">$obj</span></code>
 has inherited.
That is:</p>
<pre>
	<a class="l_k" href="functions/use.html">use</a> <span class="w">NEXT</span><span class="sc">;</span>

<a name="package-A"></a>	package <span class="i">A</span><span class="sc">;</span> <span class="i">@ISA</span> = <span class="q">qw(B D X)</span><span class="sc">;</span>
<a name="foo"></a>	sub <span class="m">foo</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;A::foo &quot;</span> <span class="s">}</span>

<a name="package-B"></a>	package <span class="i">B</span><span class="sc">;</span> <span class="i">@ISA</span> = <span class="q">qw(D X)</span><span class="sc">;</span>
<a name="foo-1"></a>	sub <span class="m">foo</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;B::foo &quot;</span> <span class="s">}</span>

<a name="package-X"></a>	package <span class="i">X</span><span class="sc">;</span> <span class="i">@ISA</span> = <span class="q">qw(D)</span><span class="sc">;</span>
<a name="foo-2"></a>	sub <span class="m">foo</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;X::foo &quot;</span> <span class="s">}</span>

<a name="package-D"></a>	package <span class="i">D</span><span class="sc">;</span>
<a name="foo-3"></a>	sub <span class="m">foo</span> <span class="s">{</span> <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;D::foo &quot;</span> <span class="s">}</span>

<a name="package-main"></a>	package <span class="i">main</span><span class="sc">;</span>

	<a class="l_k" href="functions/my.html">my</a> <span class="i">$obj</span> = <a class="l_k" href="functions/bless.html">bless</a> <span class="s">{</span><span class="s">}</span><span class="cm">,</span> <span class="q">&#39;A&#39;</span><span class="sc">;</span>
	<span class="i">$obj</span><span class="i">-&gt;EVERY::foo</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>        <span class="c"># prints&quot; A::foo B::foo X::foo D::foo</span></pre>
<p>Prefixing a method call with <pre>
<span class="w">EVERY::</span></code>
 causes every method in the
object's hierarchy with that name to be invoked. As the above example
illustrates, they are not called in Perl's usual "left-most-depth-first"
order. Instead, they are called "breadth-first-dependency-wise".</p>
<p>That means that the inheritance tree of the object is traversed breadth-first
and the resulting order of classes is used as the sequence in which methods
are called. However, that sequence is modified by imposing a rule that the
appropriate method of a derived class must be called before the same method of
any ancestral class. That's why, in the above example, <pre>
<span class="w">X::foo</span></code>
 is called
before <pre>
<span class="w">D::foo</span></code>
, even though <pre>
<span class="w">D</span></code>
 comes before <pre>
<span class="w">X</span></code>
 in <pre>
<span class="i">@B::ISA</span></code>
.</p>
<p>In general, there's no need to worry about the order of calls. They will be
left-to-right, breadth-first, most-derived-first. This works perfectly for
most inherited methods (including destructors), but is inappropriate for
some kinds of methods (such as constructors, cloners, debuggers, and
initializers) where it's more appropriate that the least-derived methods be
called first (as more-derived methods may rely on the behaviour of their
"ancestors"). In that case, instead of using the <pre>
<span class="w">EVERY</span></code>
 pseudo-class:</p>
<pre>
	<span class="i">$obj</span><span class="i">-&gt;EVERY::foo</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>        <span class="c"># prints&quot; A::foo B::foo X::foo D::foo</span></pre>
<p>you can use the <pre>
<span class="w">EVERY::LAST</span></code>
 pseudo-class:</p>
<pre>
	<span class="i">$obj</span><span class="i">-&gt;EVERY::LAST::foo</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>  <span class="c"># prints&quot; D::foo X::foo B::foo A::foo</span></pre>
<p>which reverses the order of method call.</p>
<p>Whichever version is used, the actual methods are called in the same
context (list, scalar, or void) as the original call via <pre>
<span class="w">EVERY</span></code>
, and return:</p>
<ul>
<li>
<p>A hash of array references in list context. Each entry of the hash has the
fully qualified method name as its key and a reference to an array containing
the method's list-context return values as its value.</p>
</li>
<li>
<p>A reference to a hash of scalar values in scalar context. Each entry of the hash has the
fully qualified method name as its key and the method's scalar-context return values as its value.</p>
</li>
<li>
<p>Nothing in void context (obviously).</p>
</li>
</ul>
<a id="Using-EVERY-methods"></a><h3 class='h3' >Using <pre>
<span class="w">EVERY</span></code>
 methods</h3>
<p>The typical way to use an <pre>
<span class="w">EVERY</span></code>
 call is to wrap it in another base
method, that all classes inherit. For example, to ensure that every
destructor an object inherits is actually called (as opposed to just the
left-most-depth-first-est one):</p>
<pre>
<a name="package-Base"></a>        package <span class="i">Base</span><span class="sc">;</span>
<a name="DESTROY"></a>        sub <span class="m">DESTROY</span> <span class="s">{</span> <span class="i">$_</span>[<span class="n">0</span>]<span class="i">-&gt;EVERY::Destroy</span> <span class="s">}</span>

<a name="package-Derived1"></a>        package <span class="i">Derived1</span><span class="sc">;</span> 
        <a class="l_k" href="functions/use.html">use</a> <span class="w">base</span> <span class="q">&#39;Base&#39;</span><span class="sc">;</span>
<a name="Destroy-1"></a>        sub <span class="m">Destroy</span> <span class="s">{</span>...<span class="s">}</span>

<a name="package-Derived2"></a>        package <span class="i">Derived2</span><span class="sc">;</span> 
        <a class="l_k" href="functions/use.html">use</a> <span class="w">base</span> <span class="q">&#39;Base&#39;</span><span class="cm">,</span> <span class="q">&#39;Derived1&#39;</span><span class="sc">;</span>
<a name="Destroy-2"></a>        sub <span class="m">Destroy</span> <span class="s">{</span>...<span class="s">}</span></pre>
<p>et cetera. Every derived class than needs its own clean-up
behaviour simply adds its own <pre>
<span class="w">Destroy</span></code>
 method (<i>not</i> a <code class="inline"><a class="l_k" href="functions/DESTROY.html">DESTROY</a></code> method),
which the call to <pre>
<span class="w">EVERY::LAST::Destroy</span></code>
 in the inherited destructor
then correctly picks up.</p>
<p>Likewise, to create a class hierarchy in which every initializer inherited by
a new object is invoked:</p>
<pre>
<a name="package-Base"></a>        package <span class="i">Base</span><span class="sc">;</span>
<a name="new"></a>        sub <span class="m">new</span> <span class="s">{</span>
		<a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$class</span><span class="cm">,</span> <span class="i">%args</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
		<a class="l_k" href="functions/my.html">my</a> <span class="i">$obj</span> = <a class="l_k" href="functions/bless.html">bless</a> <span class="s">{</span><span class="s">}</span><span class="cm">,</span> <span class="i">$class</span><span class="sc">;</span>
		<span class="i">$obj</span><span class="i">-&gt;EVERY::LAST::Init</span><span class="s">(</span>\<span class="i">%args</span><span class="s">)</span><span class="sc">;</span>
	<span class="s">}</span>

<a name="package-Derived1"></a>        package <span class="i">Derived1</span><span class="sc">;</span> 
        <a class="l_k" href="functions/use.html">use</a> <span class="w">base</span> <span class="q">&#39;Base&#39;</span><span class="sc">;</span>
<a name="Init"></a>        sub <span class="m">Init</span> <span class="s">{</span>
		<a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$argsref</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
		...
	<span class="s">}</span>

<a name="package-Derived2"></a>        package <span class="i">Derived2</span><span class="sc">;</span> 
        <a class="l_k" href="functions/use.html">use</a> <span class="w">base</span> <span class="q">&#39;Base&#39;</span><span class="cm">,</span> <span class="q">&#39;Derived1&#39;</span><span class="sc">;</span>
<a name="Init-1"></a>        sub <span class="m">Init</span> <span class="s">{</span>
		<a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$argsref</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
		...
	<span class="s">}</span></pre>
<p>et cetera. Every derived class than needs some additional initialization
behaviour simply adds its own <pre>
<span class="w">Init</span></code>
 method (<i>not</i> a <pre>
<span class="w">new</span></code>
 method),
which the call to <pre>
<span class="w">EVERY::LAST::Init</span></code>
 in the inherited constructor
then correctly picks up.</p>
<a id="AUTHOR"></a><h2 class='h2' >AUTHOR</h2>
<p>Damian Conway (damian@conway.org)</p>
<a id="BUGS-AND-IRRITATIONS"></a><h2 class='h2' >BUGS AND IRRITATIONS</h2>
<p>Because it's a module, not an integral part of the interpreter, NEXT.pm
has to guess where the surrounding call was found in the method
look-up sequence. In the presence of diamond inheritance patterns
it occasionally guesses wrong.</p>
<p>It's also too slow (despite caching).</p>
<p>Comment, suggestions, and patches welcome.</p>
<a id="COPYRIGHT"></a><h2 class='h2' >COPYRIGHT</h2>
<div class="verbatim"><ol><li> Copyright (c) 2000-2001, Damian Conway. All Rights Reserved.</li><li> This module is free software. It may be used, redistributed</li><li>    and/or modified under the same terms as Perl itself.</li></ol></div>



      <ul><li><a href="#NAME">NAME</a></li><li><a href="#SYNOPSIS">SYNOPSIS</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><ul><li><a href="#Enforcing-redispatch">Enforcing redispatch</a></li><li><a href="#Avoiding-repetitions">Avoiding repetitions</a></li><li><a href="#Invoking-all-versions-of-a-method-with-a-single-call">Invoking all versions of a method with a single call</a></li><li><a href="#Using-EVERY-methods">Using EVERY methods</a></li></ul><li><a href="#AUTHOR">AUTHOR</a></li><li><a href="#BUGS-AND-IRRITATIONS">BUGS AND IRRITATIONS</a></li><li><a href="#COPYRIGHT">COPYRIGHT</a></li></ul>


                </div>
              </article>
          </div>
        </div>
      </main>
    </div>
    <footer class="footer row bg-light pt-5 pb-5">
      <div class="col-sm-8 offset-sm-2">
        <div class="row">
          <div class="col-md-4">
            <ul class="list-unstyled">
              <li>
                <h4>Site info</h4>
              </li>
              <li>Docs mantained by
                <a href="//lists.cpan.org/showlist.cgi?name=perl5-porters" rel="noopener">Perl 5 Porters</a>
              </li>
              <li>Site development sponsored by
                <a href="//opusvl.com" rel="noopener"><img class="opus-logo" src="/public/img/opusvl_logo.svg" alt="OpusVL Logo"></a>
              </li>
            </ul>
          </div>
          <div class="col-md-8">
            <div class="row">
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Manual</h4>
                  </li>
                  <li>
                    <a href="/5/16/3/index-overview.html">Overview</a>
                  </li>
                  <li>
                    <a href="/5/16/3/index-tutorials.html">Tutorials</a>
                  </li>
                  <li>
                    <a href="/5/16/3/index-faq.html">FAQs</a>
                  </li>
                  <li>
                    <a href="/5/16/3/index-history.html">Changes</a>
                  </li>
                </ul>
              </div>
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Reference</h4>
                  </li>
                  <li>
                    <a href="/5/16/3/index-language.html">Language</a>
                  </li>
                  <li>
                    <a href="/5/16/3/index-functions.html">Functions</a>
                  </li>
                  <li>
                    <a href="/5/16/3/perlop.html">Operators</a>
                  </li>
                  <li>
                    <a href="/5/16/3/perlvar.html">Variables</a>
                  </li>
                </ul>
              </div>
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Modules</h4>
                  </li>
                  <li>
                    <a href="/5/16/3/index-modules-A.html">Modules</a>
                  </li>
                  <li>
                    <a href="/5/16/3/index-pragmas.html">Pragmas</a>
                  </li>
                  <li>
                    <a href="/5/16/3/index-utilities.html">Utilities</a>
                  </li>
                </ul>
              </div>
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Misc</h4>
                  </li>
                  <li>
                    <a href="/5/16/3/index-licence.html">License</a>
                  </li>
                  <li>
                    <a href="/5/16/3/index-internals.html">Internals</a>
                  </li>
                  <li>
                    <a href="/5/16/3/index-platforms.html">Platforms</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class=" col-12 footer-inf text-center">
            <small>perldoc.perl.org - Official documentation for the Perl programming language</small>
          </div>
        </div>
      </div>
    </footer>
    <div class="beta-wrapper beta-bottom-right ">
      <div class="beta beta-blue  ">
        <a class="beta-link " href="https://github.com/OpusVL/perldoc.perl.org/issues/new" rel="noopener">
          <span class="beta-text">
            This is a Beta release.
          </span>
          <span class="beta-text">
            For any issues please raise a ticket on GitHub
          </span>
        </a>
      </div>
    </div>
    <script src="/public/js/main.min.js"></script>
  </body>
</html>
