<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="perlunicook - perldoc.perl.org">
    <link rel="icon" href="/public/img/favicon.ico">
    <title>perlunicook - perldoc.perl.org</title>
    <link href="/public/css/main.min.css" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Lato:400,100,300,700,900' rel='stylesheet' type='text/css'>
    <script>
            window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
            ga('create', 'UA-1892152-2', 'auto');  // JJ's account
            ga('create', 'UA-50555-3', 'auto', 'perlOrg');   // perl.org account
            ga('require', 'outboundLinkTracker', {
              events: ['click', 'auxclick', 'contextmenu'],
            });
            ga('require', 'maxScrollTracker');
            ga('send', 'pageview');
            ga('perlOrg.send', 'pageview');
    </script>
    <script async src="https://www.google-analytics.com/analytics.js"></script>
    <script async src="/public/js/tracking.min.js"></script>
  </head>
  <body class="body container-fluid ">
    <div class="wrapper">
        <nav class="navbar navbar-expand-md navbar-dark bg-primary bg-perl fixed-top justify-content-between">
          <a class="navbar-brand" href="/">
            <object class="logo" data="/public/img/logo_perl_doc.svg" type="image/svg+xml" name="Perl Documentation Logo">Perl Documentation Logo</object>
          </a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div id="navbar" class="collapse navbar-collapse justify-content-end">
            <ul class="nav navbar-nav navbar-right">
              <li class="nav-item dropdown">
                <a id="navbarDropdown" href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Perl versions</a>
                <div class="dropdown-menu" id="dropdown-menu-links" aria-labelledby="navbarDropdown">
                </div>
              </li>
              <li class="nav-item dropdown">
                <a id="navbarDropdown1" href="#" class="dropdown-toggle nav-link" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Manuals</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown1">
                  <a class="dropdown-item" href="/5.20.2/index-overview.html">Overview</a>
                  <a class="dropdown-item" href="/5.20.2/index-tutorials.html">Tutorials</a>
                  <a class="dropdown-item" href="/5.20.2/index-faq.html">FAQs</a>
                  <a class="dropdown-item" href="/5.20.2/index-history.html">History / Changes</a>
                  <a class="dropdown-item" href="/5.20.2/index-licence.html">License</a>
                  <a class="dropdown-item" href="/5.20.2/index-language.html">Language</a>
                  <a class="dropdown-item" href="/5.20.2/index-functions.html">Functions</a>
                  <a class="dropdown-item" href="/5.20.2/perlop.html">Operators</a>
                  <a class="dropdown-item" href="/5.20.2/perlvar.html">Special Variables</a>
                  <a class="dropdown-item" href="/5.20.2/index-pragmas.html">Pragmas</a>
                  <a class="dropdown-item" href="/5.20.2/index-utilities.html">Utilities</a>
                  <a class="dropdown-item" href="/5.20.2/index-internals.html">Internals</a>
                  <a class="dropdown-item" href="/5.20.2/index-platforms.html">Platform Specific</a>
                </div>
              </li>
              <li class="nav-item dropdown">
                <a id="navbarDropdown3" href="#" class="nav-link dropdown-toggle " data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Modules</a>
                <div aria-labelledby="navbarDropdown3" class="dropdown-menu letters-wrap">
                  <a class="dropdown-item" href="/5.20.2/index-functions.html">A-Z</a>
                  <a class="dropdown-item" href="/5.20.2/index-functions-by-cat.html">By Category</a>
                  <div class="dropdown-divider"></div>
                  <div class="letter-container">
                    <a class="dropdown-item letters" href="/5.20.2/index-modules-A.html">A</a>
                    <a class="dropdown-item letters" href="/5.20.2/index-modules-B.html">B</a>
                    <a class="dropdown-item letters" href="/5.20.2/index-modules-C.html">C</a>
                    <a class="dropdown-item letters" href="/5.20.2/index-modules-D.html">D</a>
                    <a class="dropdown-item letters" href="/5.20.2/index-modules-E.html">E</a>
                    <a class="dropdown-item letters" href="/5.20.2/index-modules-F.html">F</a>
                    <a class="dropdown-item letters" href="/5.20.2/index-modules-G.html">G</a>
                    <a class="dropdown-item letters" href="/5.20.2/index-modules-H.html">H</a>
                    <a class="dropdown-item letters" href="/5.20.2/index-modules-I.html">I</a>
                    <a class="dropdown-item letters" href="/5.20.2/index-modules-J.html">J</a>
                    <a class="dropdown-item letters" href="/5.20.2/index-modules-L.html">L</a>
                    <a class="dropdown-item letters" href="/5.20.2/index-modules-M.html">M</a>
                    <a class="dropdown-item letters" href="/5.20.2/index-modules-N.html">N</a>
                    <a class="dropdown-item letters" href="/5.20.2/index-modules-O.html">O</a>
                    <a class="dropdown-item letters" href="/5.20.2/index-modules-P.html">P</a>
                    <a class="dropdown-item letters" href="/5.20.2/index-modules-S.html">S</a>
                    <a class="dropdown-item letters" href="/5.20.2/index-modules-T.html">T</a>
                    <a class="dropdown-item letters" href="/5.20.2/index-modules-U.html">U</a>
                    <a class="dropdown-item letters" href="/5.20.2/index-modules-X.html">X</a>
                    </div>
                </div>
              </li>
            </ul>
          </div>
          <!--/.nav-collapse -->
        </nav>

      <main class="row main-content pb-5 pt-5">
        <div class="col-sm-8 offset-sm-2">
          <div class="row">
            <div class="col-sm-12">
                <div id="breadcrumbs">
                    
    <a href="index.html">Home</a>&nbsp; &gt;
    
      
        <a href="index-language.html">Language reference</a> &gt;
      
    
    perlunicook
  

                </div>
            </div>
          </div>
          <div class="row">
              <article class="col-sm-12 content">
                <div class="documentation-wrapper">
                  <div id="perl_version">
                    <h1 class='page-title'> Perl 5 version 20.2 documentation</h1>
                  </div>
                  <h1>perlunicook</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><li><a href="#EXAMPLES">EXAMPLES</a></li><ul><li><a href="#%211e-0%3a-Standard-preamble">℞ 0: Standard preamble</a></li><li><a href="#%211e-1%3a-Generic-Unicode-savvy-filter">℞ 1: Generic Unicode-savvy filter</a></li><li><a href="#%211e-2%3a-Fine-tuning-Unicode-warnings">℞ 2: Fine-tuning Unicode warnings</a></li><li><a href="#%211e-3%3a-Declare-source-in-utf8-for-identifiers-and-literals">℞ 3: Declare source in utf8 for identifiers and literals</a></li><li><a href="#%211e-4%3a-Characters-and-their-numbers">℞ 4: Characters and their numbers</a></li><li><a href="#%211e-5%3a-Unicode-literals-by-character-number">℞ 5: Unicode literals by character number</a></li><li><a href="#%211e-6%3a-Get-character-name-by-number">℞ 6: Get character name by number</a></li><li><a href="#%211e-7%3a-Get-character-number-by-name">℞ 7: Get character number by name</a></li><li><a href="#%211e-8%3a-Unicode-named-characters">℞ 8: Unicode named characters</a></li><li><a href="#%211e-9%3a-Unicode-named-sequences">℞ 9: Unicode named sequences</a></li><li><a href="#%211e-10%3a-Custom-named-characters">℞ 10: Custom named characters</a></li><li><a href="#%211e-11%3a-Names-of-CJK-codepoints">℞ 11: Names of CJK codepoints</a></li><li><a href="#%211e-12%3a-Explicit-encode%2fdecode">℞ 12: Explicit encode/decode</a></li><li><a href="#%211e-13%3a-Decode-program-arguments-as-utf8">℞ 13: Decode program arguments as utf8</a></li><li><a href="#%211e-14%3a-Decode-program-arguments-as-locale-encoding">℞ 14: Decode program arguments as locale encoding</a></li><li><a href="#%211e-15%3a-Declare-STD%7bIN%2cOUT%2cERR%7d-to-be-utf8">℞ 15: Declare STD{IN,OUT,ERR} to be utf8</a></li><li><a href="#%211e-16%3a-Declare-STD%7bIN%2cOUT%2cERR%7d-to-be-in-locale-encoding">℞ 16: Declare STD{IN,OUT,ERR} to be in locale encoding</a></li><li><a href="#%211e-17%3a-Make-file-I%2fO-default-to-utf8">℞ 17: Make file I/O default to utf8</a></li><li><a href="#%211e-18%3a-Make-all-I%2fO-and-args-default-to-utf8">℞ 18: Make all I/O and args default to utf8</a></li><li><a href="#%211e-19%3a-Open-file-with-specific-encoding">℞ 19: Open file with specific encoding</a></li><li><a href="#%211e-20%3a-Unicode-casing">℞ 20: Unicode casing</a></li><li><a href="#%211e-21%3a-Unicode-case-insensitive-comparisons">℞ 21: Unicode case-insensitive comparisons</a></li><li><a href="#%211e-22%3a-Match-Unicode-linebreak-sequence-in-regex">℞ 22: Match Unicode linebreak sequence in regex</a></li><li><a href="#%211e-23%3a-Get-character-category">℞ 23: Get character category</a></li><li><a href="#%211e-24%3a-Disabling-Unicode-awareness-in-builtin-charclasses">℞ 24: Disabling Unicode-awareness in builtin charclasses</a></li><li><a href="#%211e-25%3a-Match-Unicode-properties-in-regex-with-%5cp%2c-%5cP">℞ 25: Match Unicode properties in regex with \p, \P</a></li><li><a href="#%211e-26%3a-Custom-character-properties">℞ 26: Custom character properties</a></li><li><a href="#%211e-27%3a-Unicode-normalization">℞ 27: Unicode normalization</a></li><li><a href="#%211e-28%3a-Convert-non-ASCII-Unicode-numerics">℞ 28: Convert non-ASCII Unicode numerics</a></li><li><a href="#%211e-29%3a-Match-Unicode-grapheme-cluster-in-regex">℞ 29: Match Unicode grapheme cluster in regex</a></li><li><a href="#%211e-30%3a-Extract-by-grapheme-instead-of-by-codepoint-(regex)">℞ 30: Extract by grapheme instead of by codepoint (regex)</a></li><li><a href="#%211e-31%3a-Extract-by-grapheme-instead-of-by-codepoint-(substr)">℞ 31: Extract by grapheme instead of by codepoint (substr)</a></li><li><a href="#%211e-32%3a-Reverse-string-by-grapheme">℞ 32: Reverse string by grapheme</a></li><li><a href="#%211e-33%3a-String-length-in-graphemes">℞ 33: String length in graphemes</a></li><li><a href="#%211e-34%3a-Unicode-column-width-for-printing">℞ 34: Unicode column-width for printing</a></li><li><a href="#%211e-35%3a-Unicode-collation">℞ 35: Unicode collation</a></li><li><a href="#%211e-36%3a-Case--_and_-accent-insensitive-Unicode-sort">℞ 36: Case- _and_ accent-insensitive Unicode sort</a></li><li><a href="#%211e-37%3a-Unicode-locale-collation">℞ 37: Unicode locale collation</a></li><li><a href="#%211e-38%3a-Making-cmp-work-on-text-instead-of-codepoints">℞ 38: Making cmp work on text instead of codepoints</a></li><li><a href="#%211e-39%3a-Case--_and_-accent-insensitive-comparisons">℞ 39: Case- _and_ accent-insensitive comparisons</a></li><li><a href="#%211e-40%3a-Case--_and_-accent-insensitive-locale-comparisons">℞ 40: Case- _and_ accent-insensitive locale comparisons</a></li><li><a href="#%211e-41%3a-Unicode-linebreaking">℞ 41: Unicode linebreaking</a></li><li><a href="#%211e-42%3a-Unicode-text-in-DBM-hashes%2c-the-tedious-way">℞ 42: Unicode text in DBM hashes, the tedious way</a></li><li><a href="#%211e-43%3a-Unicode-text-in-DBM-hashes%2c-the-easy-way">℞ 43: Unicode text in DBM hashes, the easy way</a></li><li><a href="#%211e-44%3a-PROGRAM%3a-Demo-of-Unicode-collation-and-printing">℞ 44: PROGRAM: Demo of Unicode collation and printing</a></li></ul><li><a href="#SEE-ALSO">SEE ALSO</a></li><li><a href="#AUTHOR">AUTHOR</a></li><li><a href="#COPYRIGHT-AND-LICENCE">COPYRIGHT AND LICENCE</a></li><li><a href="#REVISION-HISTORY">REVISION HISTORY</a></li></ul><a id="NAME"></a><h2 class='h2' >NAME</h2>
<p>perlunicook - cookbookish examples of handling Unicode in Perl</p>
<a id="DESCRIPTION"></a><h2 class='h2' >DESCRIPTION</h2>
<p>This manpage contains short recipes demonstrating how to handle common Unicode
operations in Perl, plus one complete program at the end. Any undeclared
variables in individual recipes are assumed to have a previous appropriate
value in them.</p>
<a id="EXAMPLES"></a><h2 class='h2' >EXAMPLES</h2>
<a id="%211e-0%3a-Standard-preamble"></a><h3 class='h3' >&#x211e; 0: Standard preamble</h3>
<p>Unless otherwise notes, all examples below require this standard preamble
to work correctly, with the <pre>
<span class="c">#!</span></code>
 adjusted to work on your system:</p>
<pre>
 <span class="c">#!/usr/bin/env perl</span>

 <a class="l_k" href="functions/use.html">use</a> <span class="w">utf8</span><span class="sc">;</span>      <span class="c"># so literals and identifiers can be in UTF-8</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="v">v5.12</span><span class="sc">;</span>     <span class="c"># or later to get &quot;unicode_strings&quot; feature</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">strict</span><span class="sc">;</span>    <span class="c"># quote strings, declare variables</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">warnings</span><span class="sc">;</span>  <span class="c"># on by default</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">warnings</span>  <span class="q">qw(FATAL utf8)</span><span class="sc">;</span>    <span class="c"># fatalize encoding glitches</span>
 <a class="l_k" href="functions/use.html">use</a> <a class="l_k" href="functions/open.html">open</a>      <span class="q">qw(:std :utf8)</span><span class="sc">;</span>    <span class="c"># undeclared streams in UTF-8</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">charnames</span> <span class="q">qw(:full :short)</span><span class="sc">;</span>  <span class="c"># unneeded in v5.16</span></pre>
<p>This <i>does</i> make even Unix programmers <code class="inline"><a class="l_k" href="functions/binmode.html">binmode</a></code> your binary streams,
or open them with <pre>
<span class="j">:</span><span class="w">raw</span></code>
, but that's the only way to get at them
portably anyway.</p>
<p><strong>WARNING</strong>: <pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">autoload</span></code>
 and <pre>
<a class="l_k" href="functions/use.html">use</a> <a class="l_k" href="functions/open.html">open</a></code>
 do not get along with each other.</p>
<a id="%211e-1%3a-Generic-Unicode-savvy-filter"></a><h3 class='h3' >&#x211e; 1: Generic Unicode-savvy filter</h3>
<p>Always decompose on the way in, then recompose on the way out.</p>
<pre>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">Unicode::Normalize</span><span class="sc">;</span>

 <a class="l_k" href="functions/while.html">while</a> <span class="s">(</span>&lt;&gt;<span class="s">)</span> <span class="s">{</span>
     <span class="i">$_</span> = <span class="i">NFD</span><span class="s">(</span><span class="i">$_</span><span class="s">)</span><span class="sc">;</span>   <span class="c"># decompose + reorder canonically</span>
     ...
 <span class="s">}</span> <a class="l_k" href="functions/continue.html">continue</a> <span class="s">{</span>
     <a class="l_k" href="functions/print.html">print</a> <span class="i">NFC</span><span class="s">(</span><span class="i">$_</span><span class="s">)</span><span class="sc">;</span>  <span class="c"># recompose (where possible) + reorder canonically</span>
 <span class="s">}</span></pre>
<a id="%211e-2%3a-Fine-tuning-Unicode-warnings"></a><h3 class='h3' >&#x211e; 2: Fine-tuning Unicode warnings</h3>
<p>As of v5.14, Perl distinguishes three subclasses of UTF&#x2011;8 warnings.</p>
<pre>
 <a class="l_k" href="functions/use.html">use</a> <span class="v">v5.14</span><span class="sc">;</span>                  <span class="c"># subwarnings unavailable any earlier</span>
 <a class="l_k" href="functions/no.html">no</a> <span class="w">warnings</span> <span class="q">&quot;nonchar&quot;</span><span class="sc">;</span>      <span class="c"># the 66 forbidden non-characters</span>
 <a class="l_k" href="functions/no.html">no</a> <span class="w">warnings</span> <span class="q">&quot;surrogate&quot;</span><span class="sc">;</span>    <span class="c"># UTF-16/CESU-8 nonsense</span>
 <a class="l_k" href="functions/no.html">no</a> <span class="w">warnings</span> <span class="q">&quot;non_unicode&quot;</span><span class="sc">;</span>  <span class="c"># for codepoints over 0x10_FFFF</span></pre>
<a id="%211e-3%3a-Declare-source-in-utf8-for-identifiers-and-literals"></a><h3 class='h3' >&#x211e; 3: Declare source in utf8 for identifiers and literals</h3>
<p>Without the all-critical <pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">utf8</span></code>
 declaration, putting UTF&#x2011;8 in your
literals and identifiers won&#x2019;t work right.  If you used the standard
preamble just given above, this already happened.  If you did, you can
do things like this:</p>
<pre>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">utf8</span><span class="sc">;</span>

 <a class="l_k" href="functions/my.html">my</a> <span class="i">$measure</span>   = <span class="q">&quot;&Aring;ngstr&ouml;m&quot;</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">@&mu;soft</span>     = <span class="q">qw( cp852 cp1251 cp1252 )</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">@&#x1F51;&pi;&#x3AD;&rho;&mu;&epsilon;&gamma;&alpha;&sigmaf;</span> = <span class="q">qw( &#x1F51;&pi;&#x3AD;&rho;  &mu;&epsilon;&gamma;&alpha;&sigmaf; )</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">@&#x9BC9;</span>        = <span class="q">qw( koi8-f koi8-u koi8-r )</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$motto</span>     = <span class="q">&quot;&#x1F46A; &#x1F497; &#x1F42A;&quot;</span><span class="sc">;</span> <span class="c"># FAMILY, GROWING HEART, DROMEDARY CAMEL</span></pre>
<p>If you forget <pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">utf8</span></code>
, high bytes will be misunderstood as
separate characters, and nothing will work right.</p>
<a id="%211e-4%3a-Characters-and-their-numbers"></a><h3 class='h3' >&#x211e; 4: Characters and their numbers</h3>
<p>The <code class="inline"><a class="l_k" href="functions/ord.html">ord</a></code> and <code class="inline"><a class="l_k" href="functions/chr.html">chr</a></code> functions work transparently on all codepoints,
not just on ASCII alone &#x2014; nor in fact, not even just on Unicode alone.</p>
<pre>
 <span class="c"># ASCII characters</span>
 <a class="l_k" href="functions/ord.html">ord</a><span class="s">(</span><span class="q">&quot;A&quot;</span><span class="s">)</span>
 <a class="l_k" href="functions/chr.html">chr</a><span class="s">(</span><span class="n">65</span><span class="s">)</span>

 <span class="c"># characters from the Basic Multilingual Plane</span>
 <a class="l_k" href="functions/ord.html">ord</a><span class="s">(</span><span class="q">&quot;&Sigma;&quot;</span><span class="s">)</span>
 <a class="l_k" href="functions/chr.html">chr</a><span class="s">(</span><span class="n">0x3A3</span><span class="s">)</span>

 <span class="c"># beyond the BMP</span>
 <a class="l_k" href="functions/ord.html">ord</a><span class="s">(</span><span class="q">&quot;&#x1D45B;&quot;</span><span class="s">)</span>               <span class="c"># MATHEMATICAL ITALIC SMALL N</span>
 <a class="l_k" href="functions/chr.html">chr</a><span class="s">(</span><span class="n">0x1D45B</span><span class="s">)</span>

 <span class="c"># beyond Unicode! (up to MAXINT)</span>
 <a class="l_k" href="functions/ord.html">ord</a><span class="s">(</span><span class="q">&quot;\x{20_0000}&quot;</span><span class="s">)</span>
 <a class="l_k" href="functions/chr.html">chr</a><span class="s">(</span><span class="n">0x20_0000</span><span class="s">)</span></pre>
<a id="%211e-5%3a-Unicode-literals-by-character-number"></a><h3 class='h3' >&#x211e; 5: Unicode literals by character number</h3>
<p>In an interpolated literal, whether a double-quoted string or a
regex, you may specify a character by its number using the
<code class="inline">\x{<i>HHHHHH</i>}</code> escape.</p>
<div class="verbatim"><ol><li> String: "\x{3a3}"</li><li> Regex:  /\x{3a3}/</li><li></li><li> String: "\x{1d45b}"</li><li> Regex:  /\x{1d45b}/</li><li></li><li> # even non-BMP ranges in regex work fine</li><li> /[\x{1D434}-\x{1D467}]/</li></ol></div><a id="%211e-6%3a-Get-character-name-by-number"></a><h3 class='h3' >&#x211e; 6: Get character name by number</h3>
<pre>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">charnames</span> <span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$name</span> = <span class="i">charnames::viacode</span><span class="s">(</span><span class="n">0x03A3</span><span class="s">)</span><span class="sc">;</span></pre>
<a id="%211e-7%3a-Get-character-number-by-name"></a><h3 class='h3' >&#x211e; 7: Get character number by name</h3>
<pre>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">charnames</span> <span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$number</span> = <span class="i">charnames::vianame</span><span class="s">(</span><span class="q">&quot;GREEK CAPITAL LETTER SIGMA&quot;</span><span class="s">)</span><span class="sc">;</span></pre>
<a id="%211e-8%3a-Unicode-named-characters"></a><h3 class='h3' >&#x211e; 8: Unicode named characters</h3>
<p>Use the <code class="inline">\N{<i>charname</i>}</code> notation to get the character
by that name for use in interpolated literals (double-quoted
strings and regexes).  In v5.16, there is an implicit</p>
<pre>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">charnames</span> <span class="q">qw(:full :short)</span><span class="sc">;</span></pre>
<p>But prior to v5.16, you must be explicit about which set of charnames you
want.  The <pre>
<span class="j">:</span><span class="w">full</span></code>
 names are the official Unicode character name, alias, or
sequence, which all share a namespace.</p>
<div class="verbatim"><ol><li> use charnames qw(:full :short latin greek);</li><li></li><li> "\N{MATHEMATICAL ITALIC SMALL N}"      # :full</li><li> "\N{GREEK CAPITAL LETTER SIGMA}"       # :full</li></ol></div><p>Anything else is a Perl-specific convenience abbreviation.  Specify one or
more scripts by names if you want short names that are script-specific.</p>
<div class="verbatim"><ol><li> "\N{Greek:Sigma}"                      # :short</li><li> "\N{ae}"                               #  latin</li><li> "\N{epsilon}"                          #  greek</li></ol></div><p>The v5.16 release also supports a <pre>
<span class="j">:</span><span class="w">loose</span></code>
 import for loose matching of
character names, which works just like loose matching of property names:
that is, it disregards case, whitespace, and underscores:</p>
<pre>
 <span class="q">&quot;\N{euro sign}&quot;</span>                        <span class="c"># :loose (from v5.16)</span></pre>
<a id="%211e-9%3a-Unicode-named-sequences"></a><h3 class='h3' >&#x211e; 9: Unicode named sequences</h3>
<p>These look just like character names but return multiple codepoints.
Notice the <pre>
<span class="i">%vx</span></code>
 vector-print functionality in <code class="inline"><a class="l_k" href="functions/printf.html">printf</a></code>.</p>
<pre>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">charnames</span> <span class="q">qw(:full)</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$seq</span> = <span class="q">&quot;\N{LATIN CAPITAL LETTER A WITH MACRON AND GRAVE}&quot;</span><span class="sc">;</span>
 <a class="l_k" href="functions/printf.html">printf</a> <span class="q">&quot;U+%v04X\n&quot;</span><span class="cm">,</span> <span class="i">$seq</span><span class="sc">;</span>
 <span class="w">U</span>+<span class="n">0100</span>.<span class="n">0300</span></pre>
<a id="%211e-10%3a-Custom-named-characters"></a><h3 class='h3' >&#x211e; 10: Custom named characters</h3>
<p>Use <pre>
<span class="j">:</span><span class="w">alias</span></code>
 to give your own lexically scoped nicknames to existing
characters, or even to give unnamed private-use characters useful names.</p>
<div class="verbatim"><ol><li> use charnames ":full", ":alias" =&gt; {</li><li>     ecute =&gt; "LATIN SMALL LETTER E WITH ACUTE",</li><li>     "APPLE LOGO" =&gt; 0xF8FF, # private use character</li><li> };</li><li></li><li> "\N{ecute}"</li><li> "\N{APPLE LOGO}"</li></ol></div><a id="%211e-11%3a-Names-of-CJK-codepoints"></a><h3 class='h3' >&#x211e; 11: Names of CJK codepoints</h3>
<p>Sinograms like &#x201c;&#x6771;&#x4eac;&#x201d; come back with character names of
<pre>
<span class="w">CJK</span> <span class="w">UNIFIED</span> <span class="w">IDEOGRAPH</span>-<span class="n">6771</span></code>
 and <code class="inline">CJK UNIFIED IDEOGRAPH-4EAC</code>,
because their &#x201c;names&#x201d; vary.  The CPAN <pre>
<span class="w">Unicode::Unihan</span></code>
 module
has a large database for decoding these (and a whole lot more), provided you
know how to understand its output.</p>
<pre>
 <span class="c"># cpan -i Unicode::Unihan</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">Unicode::Unihan</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$str</span> = <span class="q">&quot;&#x6771;&#x4EAC;&quot;</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$unhan</span> = <span class="w">new</span> <span class="w">Unicode::Unihan</span><span class="sc">;</span>
 <a class="l_k" href="functions/for.html">for</a> <a class="l_k" href="functions/my.html">my</a> <span class="i">$lang</span> <span class="s">(</span><span class="q">qw(Mandarin Cantonese Korean JapaneseOn JapaneseKun)</span><span class="s">)</span> <span class="s">{</span>
     <a class="l_k" href="functions/printf.html">printf</a> <span class="q">&quot;CJK $str in %-12s is &quot;</span><span class="cm">,</span> <span class="i">$lang</span><span class="sc">;</span>
     <a class="l_k" href="functions/say.html">say</a> <span class="i">$unhan</span><span class="i">-&gt;$lang</span><span class="s">(</span><span class="i">$str</span><span class="s">)</span><span class="sc">;</span>
 <span class="s">}</span></pre>
<p>prints:</p>
<pre>
 <span class="w">CJK</span> <span class="w">&#x6771;&#x4EAC;</span> <span class="w">in</span> <span class="w">Mandarin</span>     <span class="w">is</span> <span class="w">DONG1JING1</span>
 <span class="w">CJK</span> <span class="w">&#x6771;&#x4EAC;</span> <span class="w">in</span> <span class="w">Cantonese</span>    <span class="w">is</span> <span class="w">dung1ging1</span>
 <span class="w">CJK</span> <span class="w">&#x6771;&#x4EAC;</span> <span class="w">in</span> <span class="w">Korean</span>       <span class="w">is</span> <span class="w">TONGKYENG</span>
 <span class="w">CJK</span> <span class="w">&#x6771;&#x4EAC;</span> <span class="w">in</span> <span class="w">JapaneseOn</span>   <span class="w">is</span> <span class="w">TOUKYOU</span> <span class="w">KEI</span> <span class="w">KIN</span>
 <span class="w">CJK</span> <span class="w">&#x6771;&#x4EAC;</span> <span class="w">in</span> <span class="w">JapaneseKun</span>  <span class="w">is</span> <span class="w">HIGASHI</span> <span class="w">AZUMAMIYAKO</span></pre>
<p>If you have a specific romanization scheme in mind,
use the specific module:</p>
<pre>
 <span class="c"># cpan -i Lingua::JA::Romanize::Japanese</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">Lingua::JA::Romanize::Japanese</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$k2r</span> = <span class="w">new</span> <span class="w">Lingua::JA::Romanize::Japanese</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$str</span> = <span class="q">&quot;&#x6771;&#x4EAC;&quot;</span><span class="sc">;</span>
 <a class="l_k" href="functions/say.html">say</a> <span class="q">&quot;Japanese for $str is &quot;</span><span class="cm">,</span> <span class="i">$k2r</span><span class="i">-&gt;chars</span><span class="s">(</span><span class="i">$str</span><span class="s">)</span><span class="sc">;</span></pre>
<p>prints</p>
<pre>
 <span class="w">Japanese</span> <a class="l_k" href="functions/for.html">for</a> <span class="w">&#x6771;&#x4EAC;</span> <span class="w">is</span> <span class="w">toukyou</span></pre>
<a id="%211e-12%3a-Explicit-encode%2fdecode"></a><h3 class='h3' >&#x211e; 12: Explicit encode/decode</h3>
<p>On rare occasion, such as a database read, you may be
given encoded text you need to decode.</p>
<pre>
  <a class="l_k" href="functions/use.html">use</a> <span class="w">Encode</span> <span class="q">qw(encode decode)</span><span class="sc">;</span>

  <a class="l_k" href="functions/my.html">my</a> <span class="i">$chars</span> = <span class="i">decode</span><span class="s">(</span><span class="q">&quot;shiftjis&quot;</span><span class="cm">,</span> <span class="i">$bytes</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span>
 <span class="c"># OR</span>
  <a class="l_k" href="functions/my.html">my</a> <span class="i">$bytes</span> = <span class="i">encode</span><span class="s">(</span><span class="q">&quot;MIME-Header-ISO_2022_JP&quot;</span><span class="cm">,</span> <span class="i">$chars</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span></pre>
<p>For streams all in the same encoding, don't use encode/decode; instead
set the file encoding when you open the file or immediately after with
<code class="inline"><a class="l_k" href="functions/binmode.html">binmode</a></code> as described later below.</p>
<a id="%211e-13%3a-Decode-program-arguments-as-utf8"></a><h3 class='h3' >&#x211e; 13: Decode program arguments as utf8</h3>
<div class="verbatim"><ol><li>     $ perl -CA ...</li><li> or</li><li>     $ export PERL_UNICODE=A</li><li> or</li><li>    use Encode qw(decode_utf8);</li><li>    @ARGV = map { decode_utf8($_, 1) } @ARGV;</li></ol></div><a id="%211e-14%3a-Decode-program-arguments-as-locale-encoding"></a><h3 class='h3' >&#x211e; 14: Decode program arguments as locale encoding</h3>
<pre>
    <span class="c"># cpan -i Encode::Locale</span>
    <a class="l_k" href="functions/use.html">use</a> <span class="w">Encode</span> <span class="q">qw(locale)</span><span class="sc">;</span>
    <a class="l_k" href="functions/use.html">use</a> <span class="w">Encode::Locale</span><span class="sc">;</span>

    <span class="c"># use &quot;locale&quot; as an arg to encode/decode</span>
    <span class="i">@ARGV</span> = <a class="l_k" href="functions/map.html">map</a> <span class="s">{</span> <span class="i">decode</span><span class="s">(</span><span class="w">locale</span> <span class="cm">=&gt;</span> <span class="i">$_</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span> <span class="s">}</span> <span class="i">@ARGV</span><span class="sc">;</span></pre>
<a id="%211e-15%3a-Declare-STD%7bIN%2cOUT%2cERR%7d-to-be-utf8"></a><h3 class='h3' >&#x211e; 15: Declare STD{IN,OUT,ERR} to be utf8</h3>
<p>Use a command-line option, an environment variable, or else
call <code class="inline"><a class="l_k" href="functions/binmode.html">binmode</a></code> explicitly:</p>
<div class="verbatim"><ol><li>     $ perl -CS ...</li><li> or</li><li>     $ export PERL_UNICODE=S</li><li> or</li><li>     use open qw(:std :utf8);</li><li> or</li><li>     binmode(STDIN,  ":utf8");</li><li>     binmode(STDOUT, ":utf8");</li><li>     binmode(STDERR, ":utf8");</li></ol></div><a id="%211e-16%3a-Declare-STD%7bIN%2cOUT%2cERR%7d-to-be-in-locale-encoding"></a><h3 class='h3' >&#x211e; 16: Declare STD{IN,OUT,ERR} to be in locale encoding</h3>
<pre>
    <span class="c"># cpan -i Encode::Locale</span>
    <a class="l_k" href="functions/use.html">use</a> <span class="w">Encode</span><span class="sc">;</span>
    <a class="l_k" href="functions/use.html">use</a> <span class="w">Encode::Locale</span><span class="sc">;</span>

    <span class="c"># or as a stream for binmode or open</span>
    <a class="l_k" href="functions/binmode.html">binmode</a> <span class="w">STDIN</span><span class="cm">,</span>  <span class="q">&quot;:encoding(console_in)&quot;</span>  <a class="l_k" href="functions/if.html">if</a> -t <span class="w">STDIN</span><span class="sc">;</span>
    <a class="l_k" href="functions/binmode.html">binmode</a> <span class="w">STDOUT</span><span class="cm">,</span> <span class="q">&quot;:encoding(console_out)&quot;</span> <a class="l_k" href="functions/if.html">if</a> -t <span class="w">STDOUT</span><span class="sc">;</span>
    <a class="l_k" href="functions/binmode.html">binmode</a> <span class="w">STDERR</span><span class="cm">,</span> <span class="q">&quot;:encoding(console_out)&quot;</span> <a class="l_k" href="functions/if.html">if</a> -t <span class="w">STDERR</span><span class="sc">;</span></pre>
<a id="%211e-17%3a-Make-file-I%2fO-default-to-utf8"></a><h3 class='h3' >&#x211e; 17: Make file I/O default to utf8</h3>
<p>Files opened without an encoding argument will be in UTF-8:</p>
<div class="verbatim"><ol><li>     $ perl -CD ...</li><li> or</li><li>     $ export PERL_UNICODE=D</li><li> or</li><li>     use open qw(:utf8);</li></ol></div><a id="%211e-18%3a-Make-all-I%2fO-and-args-default-to-utf8"></a><h3 class='h3' >&#x211e; 18: Make all I/O and args default to utf8</h3>
<div class="verbatim"><ol><li>     $ perl -CSDA ...</li><li> or</li><li>     $ export PERL_UNICODE=SDA</li><li> or</li><li>     use open qw(:std :utf8);</li><li>     use Encode qw(decode_utf8);</li><li>     @ARGV = map { decode_utf8($_, 1) } @ARGV;</li></ol></div><a id="%211e-19%3a-Open-file-with-specific-encoding"></a><h3 class='h3' >&#x211e; 19: Open file with specific encoding</h3>
<p>Specify stream encoding.  This is the normal way
to deal with encoded text, not by calling low-level
functions.</p>
<pre>
 <span class="c"># input file</span>
     <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><a class="l_k" href="functions/my.html">my</a> <span class="i">$in_file</span><span class="cm">,</span> <span class="q">&quot;&lt; :encoding(UTF-16)&quot;</span><span class="cm">,</span> <span class="q">&quot;wintext&quot;</span><span class="s">)</span><span class="sc">;</span>
 <span class="w">OR</span>
     <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><a class="l_k" href="functions/my.html">my</a> <span class="i">$in_file</span><span class="cm">,</span> <span class="q">&quot;&lt;&quot;</span><span class="cm">,</span> <span class="q">&quot;wintext&quot;</span><span class="s">)</span><span class="sc">;</span>
     <a class="l_k" href="functions/binmode.html">binmode</a><span class="s">(</span><span class="i">$in_file</span><span class="cm">,</span> <span class="q">&quot;:encoding(UTF-16)&quot;</span><span class="s">)</span><span class="sc">;</span>
 <span class="w">THEN</span>
     <a class="l_k" href="functions/my.html">my</a> <span class="i">$line</span> = <span class="q">&lt;$in_file&gt;</span><span class="sc">;</span>

 <span class="c"># output file</span>
     <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><span class="i">$out_file</span><span class="cm">,</span> <span class="q">&quot;&gt; :encoding(cp1252)&quot;</span><span class="cm">,</span> <span class="q">&quot;wintext&quot;</span><span class="s">)</span><span class="sc">;</span>
 <span class="w">OR</span>
     <a class="l_k" href="functions/open.html">open</a><span class="s">(</span><a class="l_k" href="functions/my.html">my</a> <span class="i">$out_file</span><span class="cm">,</span> <span class="q">&quot;&gt;&quot;</span><span class="cm">,</span> <span class="q">&quot;wintext&quot;</span><span class="s">)</span><span class="sc">;</span>
     <a class="l_k" href="functions/binmode.html">binmode</a><span class="s">(</span><span class="i">$out_file</span><span class="cm">,</span> <span class="q">&quot;:encoding(cp1252)&quot;</span><span class="s">)</span><span class="sc">;</span>
 <span class="w">THEN</span>
     <a class="l_k" href="functions/print.html">print</a> <span class="i">$out_file</span> <span class="q">&quot;some text\n&quot;</span><span class="sc">;</span></pre>
<p>More layers than just the encoding can be specified here. For example,
the incantation <pre>
<span class="q">&quot;:raw :encoding(UTF-16LE) :crlf&quot;</span></code>
 includes implicit
CRLF handling.</p>
<a id="%211e-20%3a-Unicode-casing"></a><h3 class='h3' >&#x211e; 20: Unicode casing</h3>
<p>Unicode casing is very different from ASCII casing.</p>
<div class="verbatim"><ol><li> uc("henry &#x2177;")  # "HENRY &#x2167;"</li><li> uc("tsch&#xfc;&#xdf;")   # "TSCH&#xdc;SS"  notice &#xdf; =&gt; SS</li><li></li><li> # both are true:</li><li> "tsch&#xfc;&#xdf;"  =~ /TSCH&#xdc;SS/i   # notice &#xdf; =&gt; SS</li><li> "&#x3a3;&#x3af;&#x3c3;&#x3c5;&#x3c6;&#x3bf;&#x3c2;" =~ /&#x3a3;&#x38a;&#x3a3;&#x3a5;&#x3a6;&#x39f;&#x3a3;/i   # notice &#x3a3;,&#x3c3;,&#x3c2; sameness</li></ol></div><a id="%211e-21%3a-Unicode-case-insensitive-comparisons"></a><h3 class='h3' >&#x211e; 21: Unicode case-insensitive comparisons</h3>
<p>Also available in the CPAN <a href="https://search.cpan.org/perldoc/Unicode::CaseFold">Unicode::CaseFold</a> module,
the new <code class="inline"><a class="l_k" href="functions/fc.html">fc</a></code> &#x201c;foldcase&#x201d; function from v5.16 grants
access to the same Unicode casefolding as the <code class="inline">/i</code>
pattern modifier has always used:</p>
<div class="verbatim"><ol><li> use feature "fc"; # fc() function is from v5.16</li><li></li><li> # sort case-insensitively</li><li> my @sorted = sort { fc($a) cmp fc($b) } @list;</li><li></li><li> # both are true:</li><li> fc("tsch&#xfc;&#xdf;")  eq fc("TSCH&#xdc;SS")</li><li> fc("&#x3a3;&#x3af;&#x3c3;&#x3c5;&#x3c6;&#x3bf;&#x3c2;") eq fc("&#x3a3;&#x38a;&#x3a3;&#x3a5;&#x3a6;&#x39f;&#x3a3;")</li></ol></div><a id="%211e-22%3a-Match-Unicode-linebreak-sequence-in-regex"></a><h3 class='h3' >&#x211e; 22: Match Unicode linebreak sequence in regex</h3>
<p>A Unicode linebreak matches the two-character CRLF
grapheme or any of seven vertical whitespace characters.
Good for dealing with textfiles coming from different
operating systems.</p>
<pre>
 \<span class="w">R</span>

 <span class="q">s/\R/\n/g</span><span class="sc">;</span>  <span class="c"># normalize all linebreaks to \n</span></pre>
<a id="%211e-23%3a-Get-character-category"></a><h3 class='h3' >&#x211e; 23: Get character category</h3>
<p>Find the general category of a numeric codepoint.</p>
<pre>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">Unicode::UCD</span> <span class="q">qw(charinfo)</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$cat</span> = <span class="i">charinfo</span><span class="s">(</span><span class="n">0x3A3</span><span class="s">)</span>-&gt;{<span class="w">category</span>}<span class="sc">;</span>  <span class="c"># &quot;Lu&quot;</span></pre>
<a id="%211e-24%3a-Disabling-Unicode-awareness-in-builtin-charclasses"></a><h3 class='h3' >&#x211e; 24: Disabling Unicode-awareness in builtin charclasses</h3>
<p>Disable <pre>
\<span class="w">w</span></code>
, <pre>
\<span class="w">b</span></code>
, <code class="inline">\s</code>, <pre>
\<span class="w">d</span></code>
, and the POSIX
classes from working correctly on Unicode either in this
scope, or in just one regex.</p>
<pre>
 <a class="l_k" href="functions/use.html">use</a> <span class="v">v5.14</span><span class="sc">;</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">re</span> <span class="q">&quot;/a&quot;</span><span class="sc">;</span>

 <span class="c"># OR</span>

 <a class="l_k" href="functions/my.html">my</a><span class="s">(</span><span class="i">$num</span><span class="s">)</span> = <span class="i">$str</span> =~ <span class="q">/(\d+)/a</span><span class="sc">;</span></pre>
<p>Or use specific un-Unicode properties, like <pre>
\<span class="i">p</span><span class="s">{</span><span class="w">ahex</span><span class="s">}</span></code>

and <code class="inline">\p{POSIX_Digit</code>}.  Properties still work normally
no matter what charset modifiers (<pre>
<span class="q">/d /u</span> /<span class="w">l</span> <span class="q">/a /aa</span></code>
)
should be effect.</p>
<a id="%211e-25%3a-Match-Unicode-properties-in-regex-with-%5cp%2c-%5cP"></a><h3 class='h3' >&#x211e; 25: Match Unicode properties in regex with \p, \P</h3>
<p>These all match a single codepoint with the given
property.  Use <pre>
\<span class="w">P</span></code>
 in place of <pre>
\<span class="w">p</span></code>
 to match
one codepoint lacking that property.</p>
<pre>
 \<span class="w">pL</span><span class="cm">,</span> \<span class="w">pN</span><span class="cm">,</span> \<span class="w">pS</span><span class="cm">,</span> \<span class="w">pP</span><span class="cm">,</span> \<span class="w">pM</span><span class="cm">,</span> \<span class="w">pZ</span><span class="cm">,</span> \<span class="w">pC</span>
 \<span class="i">p</span><span class="s">{</span><span class="w">Sk</span><span class="s">}</span><span class="cm">,</span> \<span class="i">p</span><span class="s">{</span><span class="w">Ps</span><span class="s">}</span><span class="cm">,</span> \<span class="i">p</span><span class="s">{</span><span class="w">Lt</span><span class="s">}</span>
 \<span class="i">p</span><span class="s">{</span><span class="w">alpha</span><span class="s">}</span><span class="cm">,</span> \<span class="i">p</span><span class="s">{</span><span class="w">upper</span><span class="s">}</span><span class="cm">,</span> \<span class="i">p</span><span class="s">{</span><span class="w">lower</span><span class="s">}</span>
 \<span class="i">p</span><span class="s">{</span><span class="w">Latin</span><span class="s">}</span><span class="cm">,</span> \<span class="i">p</span><span class="s">{</span><span class="w">Greek</span><span class="s">}</span>
 \<span class="i">p</span><span class="s">{</span><span class="w">script</span>=<span class="w">Latin</span><span class="s">}</span><span class="cm">,</span> \<span class="i">p</span><span class="s">{</span><span class="w">script</span>=<span class="w">Greek</span><span class="s">}</span>
 \<span class="i">p</span><span class="s">{</span><span class="w">East_Asian_Width</span>=<span class="w">Wide</span><span class="s">}</span><span class="cm">,</span> \<span class="i">p</span><span class="s">{</span><span class="w">EA</span>=<span class="w">W</span><span class="s">}</span>
 \<span class="i">p</span><span class="s">{</span><span class="w">Line_Break</span>=<span class="w">Hyphen</span><span class="s">}</span><span class="cm">,</span> \<span class="i">p</span><span class="s">{</span><span class="w">LB</span>=<span class="w">HY</span><span class="s">}</span>
 \<span class="i">p</span><span class="s">{</span><span class="w">Numeric_Value</span>=<span class="n">4</span><span class="s">}</span><span class="cm">,</span> \<span class="i">p</span><span class="s">{</span><span class="w">NV</span>=<span class="n">4</span><span class="s">}</span></pre>
<a id="%211e-26%3a-Custom-character-properties"></a><h3 class='h3' >&#x211e; 26: Custom character properties</h3>
<p>Define at compile-time your own custom character
properties for use in regexes.</p>
<div class="verbatim"><ol><li> # using private-use characters</li><li> sub In_Tengwar { "E000\tE07F\n" }</li><li></li><li> if (/\p{In_Tengwar}/) { ... }</li><li></li><li> # blending existing properties</li><li> sub Is_GraecoRoman_Title {&lt;&lt;'END_OF_SET'}</li><li> +utf8::IsLatin</li><li> +utf8::IsGreek</li><li> &amp;utf8::IsTitle</li><li> END_OF_SET</li><li></li><li> if (/\p{Is_GraecoRoman_Title}/ { ... }</li></ol></div><a id="%211e-27%3a-Unicode-normalization"></a><h3 class='h3' >&#x211e; 27: Unicode normalization</h3>
<p>Typically render into NFD on input and NFC on output. Using NFKC or NFKD
functions improves recall on searches, assuming you've already done to the
same text to be searched. Note that this is about much more than just pre-
combined compatibility glyphs; it also reorders marks according to their
canonical combining classes and weeds out singletons.</p>
<pre>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">Unicode::Normalize</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$nfd</span>  = <span class="i">NFD</span><span class="s">(</span><span class="i">$orig</span><span class="s">)</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$nfc</span>  = <span class="i">NFC</span><span class="s">(</span><span class="i">$orig</span><span class="s">)</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$nfkd</span> = <span class="i">NFKD</span><span class="s">(</span><span class="i">$orig</span><span class="s">)</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$nfkc</span> = <span class="i">NFKC</span><span class="s">(</span><span class="i">$orig</span><span class="s">)</span><span class="sc">;</span></pre>
<a id="%211e-28%3a-Convert-non-ASCII-Unicode-numerics"></a><h3 class='h3' >&#x211e; 28: Convert non-ASCII Unicode numerics</h3>
<p>Unless you&#x2019;ve used <code class="inline">/a</code> or <code class="inline">/aa</code>, <pre>
\<span class="w">d</span></code>
 matches more than
ASCII digits only, but Perl&#x2019;s implicit string-to-number
conversion does not current recognize these.  Here&#x2019;s how to
convert such strings manually.</p>
<pre>
 <a class="l_k" href="functions/use.html">use</a> <span class="v">v5.14</span><span class="sc">;</span>  <span class="c"># needed for num() function</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">Unicode::UCD</span> <span class="q">qw(num)</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$str</span> = <span class="q">&quot;got &#x216B; and &#x96A;&#x96B;&#x96C;&#x96D; and &#x215E; and here&quot;</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">@nums</span> = <span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 <a class="l_k" href="functions/while.html">while</a> <span class="s">(</span><span class="q">/$str =~ (\d+|\N)/g</span><span class="s">)</span> <span class="s">{</span>  <span class="c"># not just ASCII!</span>
    <a class="l_k" href="functions/push.html">push</a> <span class="i">@nums</span><span class="cm">,</span> <span class="i">num</span><span class="s">(</span><span class="i">$1</span><span class="s">)</span><span class="sc">;</span>
 <span class="s">}</span>
 <a class="l_k" href="functions/say.html">say</a> <span class="q">&quot;@nums&quot;</span><span class="sc">;</span>   <span class="c">#     12      4567      0.875</span>

 <a class="l_k" href="functions/use.html">use</a> <span class="w">charnames</span> <span class="q">qw(:full)</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$nv</span> = <span class="i">num</span><span class="s">(</span><span class="q">&quot;\N{RUMI DIGIT ONE}\N{RUMI DIGIT TWO}&quot;</span><span class="s">)</span><span class="sc">;</span></pre>
<a id="%211e-29%3a-Match-Unicode-grapheme-cluster-in-regex"></a><h3 class='h3' >&#x211e; 29: Match Unicode grapheme cluster in regex</h3>
<p>Programmer-visible &#x201c;characters&#x201d; are codepoints matched by <pre>
<span class="q">/./s</span></code>
,
but user-visible &#x201c;characters&#x201d; are graphemes matched by <pre>
<span class="q">/\X/</span></code>
.</p>
<pre>
 <span class="c"># Find vowel *plus* any combining diacritics,underlining,etc.</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$nfd</span> = <span class="i">NFD</span><span class="s">(</span><span class="i">$orig</span><span class="s">)</span><span class="sc">;</span>
 <span class="i">$nfd</span> =~ <span class="q">/ (?=[aeiou]) \X /xi</span></pre>
<a id="%211e-30%3a-Extract-by-grapheme-instead-of-by-codepoint-(regex)"></a><h3 class='h3' >&#x211e; 30: Extract by grapheme instead of by codepoint (regex)</h3>
<pre>
 <span class="c"># match and grab five first graphemes</span>
 <a class="l_k" href="functions/my.html">my</a><span class="s">(</span><span class="i">$first_five</span><span class="s">)</span> = <span class="i">$str</span> =~ <span class="q">/^ ( \X{5} ) /x</span><span class="sc">;</span></pre>
<a id="%211e-31%3a-Extract-by-grapheme-instead-of-by-codepoint-(substr)"></a><h3 class='h3' >&#x211e; 31: Extract by grapheme instead of by codepoint (substr)</h3>
<pre>
 <span class="c"># cpan -i Unicode::GCString</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">Unicode::GCString</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$gcs</span> = <span class="w">Unicode::GCString</span><span class="w">-&gt;new</span><span class="s">(</span><span class="i">$str</span><span class="s">)</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$first_five</span> = <span class="i">$gcs</span><span class="i">-&gt;substr</span><span class="s">(</span><span class="n">0</span><span class="cm">,</span> <span class="n">5</span><span class="s">)</span><span class="sc">;</span></pre>
<a id="%211e-32%3a-Reverse-string-by-grapheme"></a><h3 class='h3' >&#x211e; 32: Reverse string by grapheme</h3>
<p>Reversing by codepoint messes up diacritics, mistakenly converting
<pre>
<span class="w">cr&egrave;me</span> <span class="w">br&ucirc;l&eacute;e</span></code>
 into <pre>
<span class="w">&eacute;el&#x302;urb</span> <span class="w">em&#x300;erc</span></code>
 instead of into <pre>
<span class="w">e&eacute;l&ucirc;rb</span> <span class="w">em&egrave;rc</span></code>
;
so reverse by grapheme instead.  Both these approaches work
right no matter what normalization the string is in:</p>
<pre>
 <span class="i">$str</span> = <a class="l_k" href="functions/join.html">join</a><span class="s">(</span><span class="q">&quot;&quot;</span><span class="cm">,</span> <a class="l_k" href="functions/reverse.html">reverse</a> <span class="i">$str</span> =~ <span class="q">/\X/g</span><span class="s">)</span><span class="sc">;</span>

 <span class="c"># OR: cpan -i Unicode::GCString</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">Unicode::GCString</span><span class="sc">;</span>
 <span class="i">$str</span> = <a class="l_k" href="functions/reverse.html">reverse</a> <span class="w">Unicode::GCString</span><span class="w">-&gt;new</span><span class="s">(</span><span class="i">$str</span><span class="s">)</span><span class="sc">;</span></pre>
<a id="%211e-33%3a-String-length-in-graphemes"></a><h3 class='h3' >&#x211e; 33: String length in graphemes</h3>
<p>The string <pre>
<span class="w">br&ucirc;l&eacute;e</span></code>
 has six graphemes but up to eight codepoints.
This counts by grapheme, not by codepoint:</p>
<pre>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$str</span> = <span class="q">&quot;br&ucirc;l&eacute;e&quot;</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$count</span> = <span class="n">0</span><span class="sc">;</span>
 <a class="l_k" href="functions/while.html">while</a> <span class="s">(</span><span class="i">$str</span> =~ <span class="q">/\X/g</span><span class="s">)</span> <span class="s">{</span> <span class="i">$count</span>++ <span class="s">}</span>

  <span class="c"># OR: cpan -i Unicode::GCString</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">Unicode::GCString</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$gcs</span> = <span class="w">Unicode::GCString</span><span class="w">-&gt;new</span><span class="s">(</span><span class="i">$str</span><span class="s">)</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$count</span> = <span class="i">$gcs</span><span class="i">-&gt;length</span><span class="sc">;</span></pre>
<a id="%211e-34%3a-Unicode-column-width-for-printing"></a><h3 class='h3' >&#x211e; 34: Unicode column-width for printing</h3>
<p>Perl&#x2019;s <code class="inline"><a class="l_k" href="functions/printf.html">printf</a></code>, <code class="inline"><a class="l_k" href="functions/sprintf.html">sprintf</a></code>, and <code class="inline"><a class="l_k" href="functions/format.html">format</a></code> think all
codepoints take up 1 print column, but many take 0 or 2.
Here to show that normalization makes no difference,
we print out both forms:</p>
<pre>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">Unicode::GCString</span><span class="sc">;</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">Unicode::Normalize</span><span class="sc">;</span>

 <a class="l_k" href="functions/my.html">my</a> <span class="i">@words</span> = <span class="q">qw/cr&egrave;me br&ucirc;l&eacute;e/</span><span class="sc">;</span>
 <span class="i">@words</span> = <a class="l_k" href="functions/map.html">map</a> <span class="s">{</span> <span class="i">NFC</span><span class="s">(</span><span class="i">$_</span><span class="s">)</span><span class="cm">,</span> <span class="i">NFD</span><span class="s">(</span><span class="i">$_</span><span class="s">)</span> <span class="s">}</span> <span class="i">@words</span><span class="sc">;</span>

 <a class="l_k" href="functions/for.html">for</a> <a class="l_k" href="functions/my.html">my</a> <span class="i">$str</span> <span class="s">(</span><span class="i">@words</span><span class="s">)</span> <span class="s">{</span>
     <a class="l_k" href="functions/my.html">my</a> <span class="i">$gcs</span> = <span class="w">Unicode::GCString</span><span class="w">-&gt;new</span><span class="s">(</span><span class="i">$str</span><span class="s">)</span><span class="sc">;</span>
     <a class="l_k" href="functions/my.html">my</a> <span class="i">$cols</span> = <span class="i">$gcs</span><span class="i">-&gt;columns</span><span class="sc">;</span>
     <a class="l_k" href="functions/my.html">my</a> <span class="i">$pad</span> = <span class="q">&quot; &quot;</span> x <span class="s">(</span><span class="n">10</span> - <span class="i">$cols</span><span class="s">)</span><span class="sc">;</span>
     <a class="l_k" href="functions/say.html">say</a> <span class="i">str</span><span class="cm">,</span> <span class="i">$pad</span><span class="cm">,</span> <span class="q">&quot; |&quot;</span><span class="sc">;</span>
 <span class="s">}</span></pre>
<p>generates this to show that it pads correctly no matter
the normalization:</p>
<pre>
 <span class="w">cr&egrave;me</span>      |
 <span class="w">cre&#x300;me</span>      |
 <span class="w">br&ucirc;l&eacute;e</span>     |
 <span class="w">bru&#x302;le&#x301;e</span>     |</pre>
<a id="%211e-35%3a-Unicode-collation"></a><h3 class='h3' >&#x211e; 35: Unicode collation</h3>
<p>Text sorted by numeric codepoint follows no reasonable alphabetic order;
use the UCA for sorting text.</p>
<pre>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">Unicode::Collate</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$col</span> = <span class="w">Unicode::Collate</span><span class="w">-&gt;new</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">@list</span> = <span class="i">$col</span><span class="i">-&gt;sort</span><span class="s">(</span><span class="i">@old_list</span><span class="s">)</span><span class="sc">;</span></pre>
<p>See the <i>ucsort</i> program from the <a href="https://search.cpan.org/perldoc/Unicode::Tussle">Unicode::Tussle</a> CPAN module
for a convenient command-line interface to this module.</p>
<a id="%211e-36%3a-Case--_and_-accent-insensitive-Unicode-sort"></a><h3 class='h3' >&#x211e; 36: Case- <i>and</i> accent-insensitive Unicode sort</h3>
<p>Specify a collation strength of level 1 to ignore case and
diacritics, only looking at the basic character.</p>
<pre>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">Unicode::Collate</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$col</span> = <span class="w">Unicode::Collate</span><span class="w">-&gt;new</span><span class="s">(</span><span class="w">level</span> <span class="cm">=&gt;</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">@list</span> = <span class="i">$col</span><span class="i">-&gt;sort</span><span class="s">(</span><span class="i">@old_list</span><span class="s">)</span><span class="sc">;</span></pre>
<a id="%211e-37%3a-Unicode-locale-collation"></a><h3 class='h3' >&#x211e; 37: Unicode locale collation</h3>
<p>Some locales have special sorting rules.</p>
<pre>
 <span class="c"># either use v5.12, OR: cpan -i Unicode::Collate::Locale</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">Unicode::Collate::Locale</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$col</span> = <span class="w">Unicode::Collate::Locale</span><span class="w">-&gt;new</span><span class="s">(</span><span class="w">locale</span> <span class="cm">=&gt;</span> <span class="q">&quot;de__phonebook&quot;</span><span class="s">)</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">@list</span> = <span class="i">$col</span><span class="i">-&gt;sort</span><span class="s">(</span><span class="i">@old_list</span><span class="s">)</span><span class="sc">;</span></pre>
<p>The <i>ucsort</i> program mentioned above accepts a <pre>
--<span class="w">locale</span></code>
 parameter.</p>
<a id="%211e-38%3a-Making-cmp-work-on-text-instead-of-codepoints"></a><h3 class='h3' >&#x211e; 38: Making <code class="inline"><a class="l_k" href="functions/cmp.html">cmp</a></code> work on text instead of codepoints</h3>
<p>Instead of this:</p>
<pre>
 <span class="i">@srecs</span> = <a class="l_k" href="functions/sort.html">sort</a> <span class="s">{</span>
     <span class="i">$b</span>-&gt;{<span class="w">AGE</span>}   &lt;=&gt;  <span class="i">$a</span>-&gt;{<span class="w">AGE</span>}
                 ||
     <span class="i">$a</span>-&gt;{<span class="w">NAME</span>}  <a class="l_k" href="functions/cmp.html">cmp</a>  <span class="i">$b</span>-&gt;{<span class="w">NAME</span>}
 <span class="s">}</span> <span class="i">@recs</span><span class="sc">;</span></pre>
<p>Use this:</p>
<pre>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$coll</span> = <span class="w">Unicode::Collate</span><span class="w">-&gt;new</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>
 <a class="l_k" href="functions/for.html">for</a> <a class="l_k" href="functions/my.html">my</a> <span class="i">$rec</span> <span class="s">(</span><span class="i">@recs</span><span class="s">)</span> <span class="s">{</span>
     <span class="i">$rec</span>-&gt;{<span class="w">NAME_key</span>} = <span class="i">$coll</span><span class="i">-&gt;getSortKey</span><span class="s">(</span> <span class="i">$rec</span>-&gt;{<span class="w">NAME</span>} <span class="s">)</span><span class="sc">;</span>
 <span class="s">}</span>
 <span class="i">@srecs</span> = <a class="l_k" href="functions/sort.html">sort</a> <span class="s">{</span>
     <span class="i">$b</span>-&gt;{<span class="w">AGE</span>}       &lt;=&gt;  <span class="i">$a</span>-&gt;{<span class="w">AGE</span>}
                     ||
     <span class="i">$a</span>-&gt;{<span class="w">NAME_key</span>}  <a class="l_k" href="functions/cmp.html">cmp</a>  <span class="i">$b</span>-&gt;{<span class="w">NAME_key</span>}
 <span class="s">}</span> <span class="i">@recs</span><span class="sc">;</span></pre>
<a id="%211e-39%3a-Case--_and_-accent-insensitive-comparisons"></a><h3 class='h3' >&#x211e; 39: Case- <i>and</i> accent-insensitive comparisons</h3>
<p>Use a collator object to compare Unicode text by character
instead of by codepoint.</p>
<pre>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">Unicode::Collate</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$es</span> = <span class="w">Unicode::Collate</span><span class="w">-&gt;new</span><span class="s">(</span>
     <span class="w">level</span> <span class="cm">=&gt;</span> <span class="n">1</span><span class="cm">,</span>
     <span class="w">normalization</span> <span class="cm">=&gt;</span> <a class="l_k" href="functions/undef.html">undef</a>
 <span class="s">)</span><span class="sc">;</span>

  <span class="c"># now both are true:</span>
 <span class="i">$es</span><span class="i">-&gt;eq</span><span class="s">(</span><span class="q">&quot;Garc&iacute;a&quot;</span><span class="cm">,</span>  <span class="q">&quot;GARCIA&quot;</span> <span class="s">)</span><span class="sc">;</span>
 <span class="i">$es</span><span class="i">-&gt;eq</span><span class="s">(</span><span class="q">&quot;M&aacute;rquez&quot;</span><span class="cm">,</span> <span class="q">&quot;MARQUEZ&quot;</span><span class="s">)</span><span class="sc">;</span></pre>
<a id="%211e-40%3a-Case--_and_-accent-insensitive-locale-comparisons"></a><h3 class='h3' >&#x211e; 40: Case- <i>and</i> accent-insensitive locale comparisons</h3>
<p>Same, but in a specific locale.</p>
<pre>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$de</span> = <span class="w">Unicode::Collate::Locale</span><span class="w">-&gt;new</span><span class="s">(</span>
            <span class="w">locale</span> <span class="cm">=&gt;</span> <span class="q">&quot;de__phonebook&quot;</span><span class="cm">,</span>
          <span class="s">)</span><span class="sc">;</span>

 <span class="c"># now this is true:</span>
 <span class="i">$de</span><span class="i">-&gt;eq</span><span class="s">(</span><span class="q">&quot;tsch&uuml;&szlig;&quot;</span><span class="cm">,</span> <span class="q">&quot;TSCHUESS&quot;</span><span class="s">)</span><span class="sc">;</span>  <span class="c"># notice &uuml; =&gt; UE, &szlig; =&gt; SS</span></pre>
<a id="%211e-41%3a-Unicode-linebreaking"></a><h3 class='h3' >&#x211e; 41: Unicode linebreaking</h3>
<p>Break up text into lines according to Unicode rules.</p>
<pre>
 <span class="c"># cpan -i Unicode::LineBreak</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">Unicode::LineBreak</span><span class="sc">;</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">charnames</span> <span class="q">qw(:full)</span><span class="sc">;</span>

 <a class="l_k" href="functions/my.html">my</a> <span class="i">$para</span> = <span class="q">&quot;This is a super\N{HYPHEN}long string. &quot;</span> x <span class="n">20</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$fmt</span> = <span class="w">new</span> <span class="w">Unicode::LineBreak</span><span class="sc">;</span>
 <a class="l_k" href="functions/print.html">print</a> <span class="i">$fmt</span><span class="i">-&gt;break</span><span class="s">(</span><span class="i">$para</span><span class="s">)</span><span class="cm">,</span> <span class="q">&quot;\n&quot;</span><span class="sc">;</span></pre>
<a id="%211e-42%3a-Unicode-text-in-DBM-hashes%2c-the-tedious-way"></a><h3 class='h3' >&#x211e; 42: Unicode text in DBM hashes, the tedious way</h3>
<p>Using a regular Perl string as a key or value for a DBM
hash will trigger a wide character exception if any codepoints
won&#x2019;t fit into a byte.  Here&#x2019;s how to manually manage the translation:</p>
<pre>
    <a class="l_k" href="functions/use.html">use</a> <span class="w">DB_File</span><span class="sc">;</span>
    <a class="l_k" href="functions/use.html">use</a> <span class="w">Encode</span> <span class="q">qw(encode decode)</span><span class="sc">;</span>
    <a class="l_k" href="functions/tie.html">tie</a> <span class="i">%dbhash</span><span class="cm">,</span> <span class="q">&quot;DB_File&quot;</span><span class="cm">,</span> <span class="q">&quot;pathname&quot;</span><span class="sc">;</span>

 <span class="c"># STORE</span>

    <span class="c"># assume $uni_key and $uni_value are abstract Unicode strings</span>
    <a class="l_k" href="functions/my.html">my</a> <span class="i">$enc_key</span>   = <span class="i">encode</span><span class="s">(</span><span class="q">&quot;UTF-8&quot;</span><span class="cm">,</span> <span class="i">$uni_key</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span>
    <a class="l_k" href="functions/my.html">my</a> <span class="i">$enc_value</span> = <span class="i">encode</span><span class="s">(</span><span class="q">&quot;UTF-8&quot;</span><span class="cm">,</span> <span class="i">$uni_value</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span>
    <span class="i">$dbhash</span>{<span class="i">$enc_key</span>} = <span class="i">$enc_value</span><span class="sc">;</span>

 <span class="c"># FETCH</span>

    <span class="c"># assume $uni_key holds a normal Perl string (abstract Unicode)</span>
    <a class="l_k" href="functions/my.html">my</a> <span class="i">$enc_key</span>   = <span class="i">encode</span><span class="s">(</span><span class="q">&quot;UTF-8&quot;</span><span class="cm">,</span> <span class="i">$uni_key</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span>
    <a class="l_k" href="functions/my.html">my</a> <span class="i">$enc_value</span> = <span class="i">$dbhash</span>{<span class="i">$enc_key</span>}<span class="sc">;</span>
    <a class="l_k" href="functions/my.html">my</a> <span class="i">$uni_value</span> = <span class="i">decode</span><span class="s">(</span><span class="q">&quot;UTF-8&quot;</span><span class="cm">,</span> <span class="i">$enc_key</span><span class="cm">,</span> <span class="n">1</span><span class="s">)</span><span class="sc">;</span></pre>
<a id="%211e-43%3a-Unicode-text-in-DBM-hashes%2c-the-easy-way"></a><h3 class='h3' >&#x211e; 43: Unicode text in DBM hashes, the easy way</h3>
<p>Here&#x2019;s how to implicitly manage the translation; all encoding
and decoding is done automatically, just as with streams that
have a particular encoding attached to them:</p>
<pre>
    <a class="l_k" href="functions/use.html">use</a> <span class="w">DB_File</span><span class="sc">;</span>
    <a class="l_k" href="functions/use.html">use</a> <span class="w">DBM_Filter</span><span class="sc">;</span>

    <a class="l_k" href="functions/my.html">my</a> <span class="i">$dbobj</span> = <a class="l_k" href="functions/tie.html">tie</a> <span class="i">%dbhash</span><span class="cm">,</span> <span class="q">&quot;DB_File&quot;</span><span class="cm">,</span> <span class="q">&quot;pathname&quot;</span><span class="sc">;</span>
    <span class="i">$dbobj</span><span class="i">-&gt;Filter_Value</span><span class="s">(</span><span class="q">&quot;utf8&quot;</span><span class="s">)</span><span class="sc">;</span>  <span class="c"># this is the magic bit</span>

 <span class="c"># STORE</span>

    <span class="c"># assume $uni_key and $uni_value are abstract Unicode strings</span>
    <span class="i">$dbhash</span>{<span class="i">$uni_key</span>} = <span class="i">$uni_value</span><span class="sc">;</span>

  <span class="c"># FETCH</span>

    <span class="c"># $uni_key holds a normal Perl string (abstract Unicode)</span>
    <a class="l_k" href="functions/my.html">my</a> <span class="i">$uni_value</span> = <span class="i">$dbhash</span>{<span class="i">$uni_key</span>}<span class="sc">;</span></pre>
<a id="%211e-44%3a-PROGRAM%3a-Demo-of-Unicode-collation-and-printing"></a><h3 class='h3' >&#x211e; 44: PROGRAM: Demo of Unicode collation and printing</h3>
<p>Here&#x2019;s a full program showing how to make use of locale-sensitive
sorting, Unicode casing, and managing print widths when some of the
characters take up zero or two columns, not just one column each time.
When run, the following program produces this nicely aligned output:</p>
<div class="verbatim"><ol><li>    Cr&#xe8;me Br&#xfb;l&#xe9;e....... &#x20ac;2.00</li><li>    &#xc9;clair............. &#x20ac;1.60</li><li>    Fideu&#xe0;............. &#x20ac;4.20</li><li>    Hamburger.......... &#x20ac;6.00</li><li>    Jam&#xf3;n Serrano...... &#x20ac;4.45</li><li>    Lingui&#xe7;a........... &#x20ac;7.00</li><li>    P&#xe2;t&#xe9;............... &#x20ac;4.15</li><li>    Pears.............. &#x20ac;2.00</li><li>    P&#xea;ches............. &#x20ac;2.25</li><li>    Sm&#xf8;rbr&#xf8;d........... &#x20ac;5.75</li><li>    Sp&#xe4;tzle............ &#x20ac;5.50</li><li>    Xori&#xe7;o............. &#x20ac;3.00</li><li>    &#x393;&#x3cd;&#x3c1;&#x3bf;&#x3c2;.............. &#x20ac;6.50</li><li>    &#xb9c9;&#xac78;&#xb9ac;............. &#x20ac;4.00</li><li>    &#x304a;&#x3082;&#x3061;............. &#x20ac;2.65</li><li>    &#x304a;&#x597d;&#x307f;&#x713c;&#x304d;......... &#x20ac;8.00</li><li>    &#x30b7;&#x30e5;&#x30fc;&#x30af;&#x30ea;&#x30fc;&#x30e0;..... &#x20ac;1.85</li><li>    &#x5bff;&#x53f8;............... &#x20ac;9.99</li><li>    &#x5305;&#x5b50;............... &#x20ac;7.50</li></ol></div><p>Here's that program; tested on v5.14.</p>
<pre>
 <span class="c">#!/usr/bin/env perl</span>
 <span class="c"># umenu - demo sorting and printing of Unicode food</span>
 <span class="c">#</span>
 <span class="c"># (obligatory and increasingly long preamble)</span>
 <span class="c">#</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">utf8</span><span class="sc">;</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="v">v5.14</span><span class="sc">;</span>                       <span class="c"># for locale sorting</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">strict</span><span class="sc">;</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">warnings</span><span class="sc">;</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">warnings</span>  <span class="q">qw(FATAL utf8)</span><span class="sc">;</span>    <span class="c"># fatalize encoding faults</span>
 <a class="l_k" href="functions/use.html">use</a> <a class="l_k" href="functions/open.html">open</a>      <span class="q">qw(:std :utf8)</span><span class="sc">;</span>    <span class="c"># undeclared streams in UTF-8</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">charnames</span> <span class="q">qw(:full :short)</span><span class="sc">;</span>  <span class="c"># unneeded in v5.16</span>

 <span class="c"># std modules</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">Unicode::Normalize</span><span class="sc">;</span>          <span class="c"># std perl distro as of v5.8</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">List::Util</span> <span class="q">qw(max)</span><span class="sc">;</span>          <span class="c"># std perl distro as of v5.10</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">Unicode::Collate::Locale</span><span class="sc">;</span>    <span class="c"># std perl distro as of v5.14</span>

 <span class="c"># cpan modules</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">Unicode::GCString</span><span class="sc">;</span>           <span class="c"># from CPAN</span>

 <span class="c"># forward defs</span>
 sub <span class="m">pad($$$)</span><span class="sc">;</span>
 sub <span class="m">colwidth(_)</span><span class="sc">;</span>
 sub <span class="m">entitle(_)</span><span class="sc">;</span>

 <a class="l_k" href="functions/my.html">my</a> <span class="i">%price</span> = <span class="s">(</span>
     <span class="q">&quot;&gamma;&#x3CD;&rho;&omicron;&sigmaf;&quot;</span>             <span class="cm">=&gt;</span> <span class="n">6.50</span><span class="cm">,</span> <span class="c"># gyros</span>
     <span class="q">&quot;pears&quot;</span>             <span class="cm">=&gt;</span> <span class="n">2.00</span><span class="cm">,</span> <span class="c"># like um, pears</span>
     <span class="q">&quot;lingui&ccedil;a&quot;</span>          <span class="cm">=&gt;</span> <span class="n">7.00</span><span class="cm">,</span> <span class="c"># spicy sausage, Portuguese</span>
     <span class="q">&quot;xori&ccedil;o&quot;</span>            <span class="cm">=&gt;</span> <span class="n">3.00</span><span class="cm">,</span> <span class="c"># chorizo sausage, Catalan</span>
     <span class="q">&quot;hamburger&quot;</span>         <span class="cm">=&gt;</span> <span class="n">6.00</span><span class="cm">,</span> <span class="c"># burgermeister meisterburger</span>
     <span class="q">&quot;&eacute;clair&quot;</span>            <span class="cm">=&gt;</span> <span class="n">1.60</span><span class="cm">,</span> <span class="c"># dessert, French</span>
     <span class="q">&quot;sm&oslash;rbr&oslash;d&quot;</span>          <span class="cm">=&gt;</span> <span class="n">5.75</span><span class="cm">,</span> <span class="c"># sandwiches, Norwegian</span>
     <span class="q">&quot;sp&auml;tzle&quot;</span>           <span class="cm">=&gt;</span> <span class="n">5.50</span><span class="cm">,</span> <span class="c"># Bayerisch noodles, little sparrows</span>
     <span class="q">&quot;&#x5305;&#x5B50;&quot;</span>              <span class="cm">=&gt;</span> <span class="n">7.50</span><span class="cm">,</span> <span class="c"># bao1 zi5, steamed pork buns, Mandarin</span>
     <span class="q">&quot;jam&oacute;n serrano&quot;</span>     <span class="cm">=&gt;</span> <span class="n">4.45</span><span class="cm">,</span> <span class="c"># country ham, Spanish</span>
     <span class="q">&quot;p&ecirc;ches&quot;</span>            <span class="cm">=&gt;</span> <span class="n">2.25</span><span class="cm">,</span> <span class="c"># peaches, French</span>
     <span class="q">&quot;&#x30B7;&#x30E5;&#x30FC;&#x30AF;&#x30EA;&#x30FC;&#x30E0;&quot;</span>    <span class="cm">=&gt;</span> <span class="n">1.85</span><span class="cm">,</span> <span class="c"># cream-filled pastry like eclair</span>
     <span class="q">&quot;&#xB9C9;&#xAC78;&#xB9AC;&quot;</span>            <span class="cm">=&gt;</span> <span class="n">4.00</span><span class="cm">,</span> <span class="c"># makgeolli, Korean rice wine</span>
     <span class="q">&quot;&#x5BFF;&#x53F8;&quot;</span>              <span class="cm">=&gt;</span> <span class="n">9.99</span><span class="cm">,</span> <span class="c"># sushi, Japanese</span>
     <span class="q">&quot;&#x304A;&#x3082;&#x3061;&quot;</span>            <span class="cm">=&gt;</span> <span class="n">2.65</span><span class="cm">,</span> <span class="c"># omochi, rice cakes, Japanese</span>
     <span class="q">&quot;cr&egrave;me br&ucirc;l&eacute;e&quot;</span>      <span class="cm">=&gt;</span> <span class="n">2.00</span><span class="cm">,</span> <span class="c"># crema catalana</span>
     <span class="q">&quot;fideu&agrave;&quot;</span>            <span class="cm">=&gt;</span> <span class="n">4.20</span><span class="cm">,</span> <span class="c"># more noodles, Valencian</span>
                                  <span class="c"># (Catalan=fideuada)</span>
     <span class="q">&quot;p&acirc;t&eacute;&quot;</span>              <span class="cm">=&gt;</span> <span class="n">4.15</span><span class="cm">,</span> <span class="c"># gooseliver paste, French</span>
     <span class="q">&quot;&#x304A;&#x597D;&#x307F;&#x713C;&#x304D;&quot;</span>        <span class="cm">=&gt;</span> <span class="n">8.00</span><span class="cm">,</span> <span class="c"># okonomiyaki, Japanese</span>
 <span class="s">)</span><span class="sc">;</span>

 <a class="l_k" href="functions/my.html">my</a> <span class="i">$width</span> = <span class="n">5</span> + <span class="w">max</span> <a class="l_k" href="functions/map.html">map</a> <span class="s">{</span> <span class="i">colwidth</span> <span class="s">}</span> <a class="l_k" href="functions/keys.html">keys</a> <span class="i">%price</span><span class="sc">;</span>

 <span class="c"># So the Asian stuff comes out in an order that someone</span>
 <span class="c"># who reads those scripts won&#39;t freak out over; the</span>
 <span class="c"># CJK stuff will be in JIS X 0208 order that way.</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="i">$coll</span>  = <span class="w">new</span> <span class="w">Unicode::Collate::Locale</span> <span class="w">locale</span> <span class="cm">=&gt;</span> <span class="q">&quot;ja&quot;</span><span class="sc">;</span>

 <a class="l_k" href="functions/for.html">for</a> <a class="l_k" href="functions/my.html">my</a> <span class="i">$item</span> <span class="s">(</span><span class="i">$coll</span><span class="i">-&gt;sort</span><span class="s">(</span><a class="l_k" href="functions/keys.html">keys</a> <span class="i">%price</span><span class="s">)</span><span class="s">)</span> <span class="s">{</span>
     <a class="l_k" href="functions/print.html">print</a> <span class="i">pad</span><span class="s">(</span><span class="i">entitle</span><span class="s">(</span><span class="i">$item</span><span class="s">)</span><span class="cm">,</span> <span class="i">$width</span><span class="cm">,</span> <span class="q">&quot;.&quot;</span><span class="s">)</span><span class="sc">;</span>
     <a class="l_k" href="functions/printf.html">printf</a> <span class="q">&quot; &euro;%.2f\n&quot;</span><span class="cm">,</span> <span class="i">$price</span>{<span class="i">$item</span>}<span class="sc">;</span>
 <span class="s">}</span>

<a name="pad"></a> sub <span class="m">pad($$$)</span> <span class="s">{</span>
     <a class="l_k" href="functions/my.html">my</a><span class="s">(</span><span class="i">$str</span><span class="cm">,</span> <span class="i">$width</span><span class="cm">,</span> <span class="i">$padchar</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
     <a class="l_k" href="functions/return.html">return</a> <span class="i">$str</span> . <span class="s">(</span><span class="i">$padchar</span> x <span class="s">(</span><span class="i">$width</span> - <span class="i">colwidth</span><span class="s">(</span><span class="i">$str</span><span class="s">)</span><span class="s">)</span><span class="s">)</span><span class="sc">;</span>
 <span class="s">}</span>

<a name="colwidth"></a> sub <span class="m">colwidth(_)</span> <span class="s">{</span>
     <a class="l_k" href="functions/my.html">my</a><span class="s">(</span><span class="i">$str</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
     <a class="l_k" href="functions/return.html">return</a> <span class="w">Unicode::GCString</span><span class="w">-&gt;new</span><span class="s">(</span><span class="i">$str</span><span class="s">)</span><span class="i">-&gt;columns</span><span class="sc">;</span>
 <span class="s">}</span>

<a name="entitle"></a> sub <span class="m">entitle(_)</span> <span class="s">{</span>
     <a class="l_k" href="functions/my.html">my</a><span class="s">(</span><span class="i">$str</span><span class="s">)</span> = <span class="i">@_</span><span class="sc">;</span>
     <span class="i">$str</span> =~ <span class="q">s{ (?=\pL)(\S)     (\S*) }</span>
              <span class="q">              { ucfirst($1) . lc($2)  }xge</span><span class="sc">;</span>
     <a class="l_k" href="functions/return.html">return</a> <span class="i">$str</span><span class="sc">;</span>
 <span class="s">}</span></pre>
<a id="SEE-ALSO"></a><h2 class='h2' >SEE ALSO</h2>
<p>See these manpages, some of which are CPAN modules:
<a href="perlunicode.html">perlunicode</a>, <a href="perluniprops.html">perluniprops</a>,
<a href="perlre.html">perlre</a>, <a href="perlrecharclass.html">perlrecharclass</a>,
<a href="perluniintro.html">perluniintro</a>, <a href="perlunitut.html">perlunitut</a>, <a href="perlunifaq.html">perlunifaq</a>,
<a href="PerlIO.html">PerlIO</a>, <a href="https://search.cpan.org/perldoc/DB_File">DB_File</a>, <a href="DBM_Filter.html">DBM_Filter</a>, <a href="DBM_Filter/utf8.html">DBM_Filter::utf8</a>,
<a href="Encode.html">Encode</a>, <a href="https://search.cpan.org/perldoc/Encode::Locale">Encode::Locale</a>,
<a href="Unicode/UCD.html">Unicode::UCD</a>,
<a href="Unicode/Normalize.html">Unicode::Normalize</a>,
<a href="https://search.cpan.org/perldoc/Unicode::GCString">Unicode::GCString</a>, <a href="https://search.cpan.org/perldoc/Unicode::LineBreak">Unicode::LineBreak</a>,
<a href="Unicode/Collate.html">Unicode::Collate</a>, <a href="Unicode/Collate/Locale.html">Unicode::Collate::Locale</a>,
<a href="https://search.cpan.org/perldoc/Unicode::Unihan">Unicode::Unihan</a>,
<a href="https://search.cpan.org/perldoc/Unicode::CaseFold">Unicode::CaseFold</a>,
<a href="https://search.cpan.org/perldoc/Unicode::Tussle">Unicode::Tussle</a>,
<a href="https://search.cpan.org/perldoc/Lingua::JA::Romanize::Japanese">Lingua::JA::Romanize::Japanese</a>,
<a href="https://search.cpan.org/perldoc/Lingua::ZH::Romanize::Pinyin">Lingua::ZH::Romanize::Pinyin</a>,
<a href="https://search.cpan.org/perldoc/Lingua::KO::Romanize::Hangul">Lingua::KO::Romanize::Hangul</a>.</p>
<p>The <a href="https://search.cpan.org/perldoc/Unicode::Tussle">Unicode::Tussle</a> CPAN module includes many programs
to help with working with Unicode, including
these programs to fully or partly replace standard utilities:
<i>tcgrep</i> instead of <i>egrep</i>,
<i>uniquote</i> instead of <i>cat -v</i> or <i>hexdump</i>,
<i>uniwc</i> instead of <i>wc</i>,
<i>unilook</i> instead of <i>look</i>,
<i>unifmt</i> instead of <i>fmt</i>,
and
<i>ucsort</i> instead of <i>sort</i>.
For exploring Unicode character names and character properties,
see its <i>uniprops</i>, <i>unichars</i>, and <i>uninames</i> programs.
It also supplies these programs, all of which are general filters that do Unicode-y things:
<i>unititle</i> and <i>unicaps</i>;
<i>uniwide</i> and <i>uninarrow</i>;
<i>unisupers</i> and <i>unisubs</i>;
<i>nfd</i>, <i>nfc</i>, <i>nfkd</i>, and <i>nfkc</i>;
and <i>uc</i>, <i>lc</i>, and <i>tc</i>.</p>
<p>Finally, see the published Unicode Standard (page numbers are from version
6.0.0), including these specific annexes and technical reports:</p>
<ul>
<li><a id="%a73.13-Default-Case-Algorithms%2c-page-113%3b-%a74.2--Case%2c-pages-120%2013122%3b-Case-Mappings%2c-page-166%2013172%2c-especially-Caseless-Matching-starting-on-page-170."></a><strong>&#xa7;3.13 Default Case Algorithms, page 113;
&#xa7;4.2  Case, pages 120&#x2013;122;
Case Mappings, page 166&#x2013;172, especially Caseless Matching starting on page 170.</strong>
</li>
<li><a id="UAX-%2344%3a-Unicode-Character-Database"></a><strong>UAX #44: Unicode Character Database</strong>
</li>
<li><a id="UTS-%2318%3a-Unicode-Regular-Expressions"></a><strong>UTS #18: Unicode Regular Expressions</strong>
</li>
<li><a id="UAX-%2315%3a-Unicode-Normalization-Forms"></a><strong>UAX #15: Unicode Normalization Forms</strong>
</li>
<li><a id="UTS-%2310%3a-Unicode-Collation-Algorithm"></a><strong>UTS #10: Unicode Collation Algorithm</strong>
</li>
<li><a id="UAX-%2329%3a-Unicode-Text-Segmentation"></a><strong>UAX #29: Unicode Text Segmentation</strong>
</li>
<li><a id="UAX-%2314%3a-Unicode-Line-Breaking-Algorithm"></a><strong>UAX #14: Unicode Line Breaking Algorithm</strong>
</li>
<li><a id="UAX-%2311%3a-East-Asian-Width"></a><strong>UAX #11: East Asian Width</strong>
</li>
</ul>
<a id="AUTHOR"></a><h2 class='h2' >AUTHOR</h2>
<p>Tom Christiansen &lt;tchrist@perl.com&gt; wrote this, with occasional
kibbitzing from Larry Wall and Jeffrey Friedl in the background.</p>
<a id="COPYRIGHT-AND-LICENCE"></a><h2 class='h2' >COPYRIGHT AND LICENCE</h2>
<p>Copyright &#xa9; 2012 Tom Christiansen.</p>
<p>This program is free software; you may redistribute it and/or modify it
under the same terms as Perl itself.</p>
<p>Most of these examples taken from the current edition of the &#x201c;Camel Book&#x201d;;
that is, from the 4&#x1d57;&#x2b0; Edition of <i>Programming Perl</i>, Copyright &#xa9; 2012 Tom
Christiansen &lt;et al.&gt;, 2012-02-13 by O&#x2019;Reilly Media.  The code itself is
freely redistributable, and you are encouraged to transplant, fold,
spindle, and mutilate any of the examples in this manpage however you please
for inclusion into your own programs without any encumbrance whatsoever.
Acknowledgement via code comment is polite but not required.</p>
<a id="REVISION-HISTORY"></a><h2 class='h2' >REVISION HISTORY</h2>
<p>v1.0.0 &#x2013; first public release, 2012-02-27</p>




      <ul><li><a href="#NAME">NAME</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><li><a href="#EXAMPLES">EXAMPLES</a></li><ul><li><a href="#%211e-0%3a-Standard-preamble">℞ 0: Standard preamble</a></li><li><a href="#%211e-1%3a-Generic-Unicode-savvy-filter">℞ 1: Generic Unicode-savvy filter</a></li><li><a href="#%211e-2%3a-Fine-tuning-Unicode-warnings">℞ 2: Fine-tuning Unicode warnings</a></li><li><a href="#%211e-3%3a-Declare-source-in-utf8-for-identifiers-and-literals">℞ 3: Declare source in utf8 for identifiers and literals</a></li><li><a href="#%211e-4%3a-Characters-and-their-numbers">℞ 4: Characters and their numbers</a></li><li><a href="#%211e-5%3a-Unicode-literals-by-character-number">℞ 5: Unicode literals by character number</a></li><li><a href="#%211e-6%3a-Get-character-name-by-number">℞ 6: Get character name by number</a></li><li><a href="#%211e-7%3a-Get-character-number-by-name">℞ 7: Get character number by name</a></li><li><a href="#%211e-8%3a-Unicode-named-characters">℞ 8: Unicode named characters</a></li><li><a href="#%211e-9%3a-Unicode-named-sequences">℞ 9: Unicode named sequences</a></li><li><a href="#%211e-10%3a-Custom-named-characters">℞ 10: Custom named characters</a></li><li><a href="#%211e-11%3a-Names-of-CJK-codepoints">℞ 11: Names of CJK codepoints</a></li><li><a href="#%211e-12%3a-Explicit-encode%2fdecode">℞ 12: Explicit encode/decode</a></li><li><a href="#%211e-13%3a-Decode-program-arguments-as-utf8">℞ 13: Decode program arguments as utf8</a></li><li><a href="#%211e-14%3a-Decode-program-arguments-as-locale-encoding">℞ 14: Decode program arguments as locale encoding</a></li><li><a href="#%211e-15%3a-Declare-STD%7bIN%2cOUT%2cERR%7d-to-be-utf8">℞ 15: Declare STD{IN,OUT,ERR} to be utf8</a></li><li><a href="#%211e-16%3a-Declare-STD%7bIN%2cOUT%2cERR%7d-to-be-in-locale-encoding">℞ 16: Declare STD{IN,OUT,ERR} to be in locale encoding</a></li><li><a href="#%211e-17%3a-Make-file-I%2fO-default-to-utf8">℞ 17: Make file I/O default to utf8</a></li><li><a href="#%211e-18%3a-Make-all-I%2fO-and-args-default-to-utf8">℞ 18: Make all I/O and args default to utf8</a></li><li><a href="#%211e-19%3a-Open-file-with-specific-encoding">℞ 19: Open file with specific encoding</a></li><li><a href="#%211e-20%3a-Unicode-casing">℞ 20: Unicode casing</a></li><li><a href="#%211e-21%3a-Unicode-case-insensitive-comparisons">℞ 21: Unicode case-insensitive comparisons</a></li><li><a href="#%211e-22%3a-Match-Unicode-linebreak-sequence-in-regex">℞ 22: Match Unicode linebreak sequence in regex</a></li><li><a href="#%211e-23%3a-Get-character-category">℞ 23: Get character category</a></li><li><a href="#%211e-24%3a-Disabling-Unicode-awareness-in-builtin-charclasses">℞ 24: Disabling Unicode-awareness in builtin charclasses</a></li><li><a href="#%211e-25%3a-Match-Unicode-properties-in-regex-with-%5cp%2c-%5cP">℞ 25: Match Unicode properties in regex with \p, \P</a></li><li><a href="#%211e-26%3a-Custom-character-properties">℞ 26: Custom character properties</a></li><li><a href="#%211e-27%3a-Unicode-normalization">℞ 27: Unicode normalization</a></li><li><a href="#%211e-28%3a-Convert-non-ASCII-Unicode-numerics">℞ 28: Convert non-ASCII Unicode numerics</a></li><li><a href="#%211e-29%3a-Match-Unicode-grapheme-cluster-in-regex">℞ 29: Match Unicode grapheme cluster in regex</a></li><li><a href="#%211e-30%3a-Extract-by-grapheme-instead-of-by-codepoint-(regex)">℞ 30: Extract by grapheme instead of by codepoint (regex)</a></li><li><a href="#%211e-31%3a-Extract-by-grapheme-instead-of-by-codepoint-(substr)">℞ 31: Extract by grapheme instead of by codepoint (substr)</a></li><li><a href="#%211e-32%3a-Reverse-string-by-grapheme">℞ 32: Reverse string by grapheme</a></li><li><a href="#%211e-33%3a-String-length-in-graphemes">℞ 33: String length in graphemes</a></li><li><a href="#%211e-34%3a-Unicode-column-width-for-printing">℞ 34: Unicode column-width for printing</a></li><li><a href="#%211e-35%3a-Unicode-collation">℞ 35: Unicode collation</a></li><li><a href="#%211e-36%3a-Case--_and_-accent-insensitive-Unicode-sort">℞ 36: Case- _and_ accent-insensitive Unicode sort</a></li><li><a href="#%211e-37%3a-Unicode-locale-collation">℞ 37: Unicode locale collation</a></li><li><a href="#%211e-38%3a-Making-cmp-work-on-text-instead-of-codepoints">℞ 38: Making cmp work on text instead of codepoints</a></li><li><a href="#%211e-39%3a-Case--_and_-accent-insensitive-comparisons">℞ 39: Case- _and_ accent-insensitive comparisons</a></li><li><a href="#%211e-40%3a-Case--_and_-accent-insensitive-locale-comparisons">℞ 40: Case- _and_ accent-insensitive locale comparisons</a></li><li><a href="#%211e-41%3a-Unicode-linebreaking">℞ 41: Unicode linebreaking</a></li><li><a href="#%211e-42%3a-Unicode-text-in-DBM-hashes%2c-the-tedious-way">℞ 42: Unicode text in DBM hashes, the tedious way</a></li><li><a href="#%211e-43%3a-Unicode-text-in-DBM-hashes%2c-the-easy-way">℞ 43: Unicode text in DBM hashes, the easy way</a></li><li><a href="#%211e-44%3a-PROGRAM%3a-Demo-of-Unicode-collation-and-printing">℞ 44: PROGRAM: Demo of Unicode collation and printing</a></li></ul><li><a href="#SEE-ALSO">SEE ALSO</a></li><li><a href="#AUTHOR">AUTHOR</a></li><li><a href="#COPYRIGHT-AND-LICENCE">COPYRIGHT AND LICENCE</a></li><li><a href="#REVISION-HISTORY">REVISION HISTORY</a></li></ul>


                </div>
              </article>
          </div>
        </div>
      </main>
    </div>
    <footer class="footer row bg-light pt-5 pb-5">
      <div class="col-sm-8 offset-sm-2">
        <div class="row">
          <div class="col-md-4">
            <ul class="list-unstyled">
              <li>
                <h4>Site info</h4>
              </li>
              <li>Docs mantained by
                <a href="//lists.cpan.org/showlist.cgi?name=perl5-porters" rel="noopener">Perl 5 Porters</a>
              </li>
              <li>Site development sponsored by
                <a href="//opusvl.com" rel="noopener"><img class="opus-logo" src="/public/img/opusvl_logo.svg" alt="OpusVL Logo"></a>
              </li>
            </ul>
          </div>
          <div class="col-md-8">
            <div class="row">
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Manual</h4>
                  </li>
                  <li>
                    <a href="/5/20/2/index-overview.html">Overview</a>
                  </li>
                  <li>
                    <a href="/5/20/2/index-tutorials.html">Tutorials</a>
                  </li>
                  <li>
                    <a href="/5/20/2/index-faq.html">FAQs</a>
                  </li>
                  <li>
                    <a href="/5/20/2/index-history.html">Changes</a>
                  </li>
                </ul>
              </div>
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Reference</h4>
                  </li>
                  <li>
                    <a href="/5/20/2/index-language.html">Language</a>
                  </li>
                  <li>
                    <a href="/5/20/2/index-functions.html">Functions</a>
                  </li>
                  <li>
                    <a href="/5/20/2/perlop.html">Operators</a>
                  </li>
                  <li>
                    <a href="/5/20/2/perlvar.html">Variables</a>
                  </li>
                </ul>
              </div>
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Modules</h4>
                  </li>
                  <li>
                    <a href="/5/20/2/index-modules-A.html">Modules</a>
                  </li>
                  <li>
                    <a href="/5/20/2/index-pragmas.html">Pragmas</a>
                  </li>
                  <li>
                    <a href="/5/20/2/index-utilities.html">Utilities</a>
                  </li>
                </ul>
              </div>
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Misc</h4>
                  </li>
                  <li>
                    <a href="/5/20/2/index-licence.html">License</a>
                  </li>
                  <li>
                    <a href="/5/20/2/index-internals.html">Internals</a>
                  </li>
                  <li>
                    <a href="/5/20/2/index-platforms.html">Platforms</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class=" col-12 footer-inf text-center">
            <small>perldoc.perl.org - Official documentation for the Perl programming language</small>
          </div>
        </div>
      </div>
    </footer>
    <div class="beta-wrapper beta-bottom-right ">
      <div class="beta beta-blue  ">
        <a class="beta-link " href="https://github.com/OpusVL/perldoc.perl.org/issues/new" rel="noopener">
          <span class="beta-text">
            This is a Beta release.
          </span>
          <span class="beta-text">
            For any issues please raise a ticket on GitHub
          </span>
        </a>
      </div>
    </div>
    <script src="/public/js/main.min.js"></script>
  </body>
</html>
