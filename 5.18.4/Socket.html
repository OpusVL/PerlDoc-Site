<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Socket - perldoc.perl.org">
    <link rel="icon" href="/public/img/favicon.ico">
    <title>Socket - perldoc.perl.org</title>
    <link href="/public/css/main.min.css" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Lato:400,100,300,700,900' rel='stylesheet' type='text/css'>
    <script>
            window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
            ga('create', 'UA-1892152-2', 'auto');  // JJ's account
            ga('create', 'UA-50555-3', 'auto', 'perlOrg');   // perl.org account
            ga('require', 'outboundLinkTracker', {
              events: ['click', 'auxclick', 'contextmenu'],
            });
            ga('require', 'maxScrollTracker');
            ga('send', 'pageview');
            ga('perlOrg.send', 'pageview');
    </script>
    <script async src="https://www.google-analytics.com/analytics.js"></script>
    <script async src="/public/js/tracking.min.js"></script>
  </head>
  <body class="body container-fluid ">
    <div class="wrapper">
        <nav class="navbar navbar-expand-md navbar-dark bg-primary bg-perl fixed-top justify-content-between">
          <a class="navbar-brand" href="/">
            <object class="logo" data="/public/img/logo_perl_doc.svg" type="image/svg+xml" name="Perl Documentation Logo">Perl Documentation Logo</object>
          </a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div id="navbar" class="collapse navbar-collapse justify-content-end">
            <ul class="nav navbar-nav navbar-right">
              <li class="nav-item dropdown">
                <a id="navbarDropdown" href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Perl versions</a>
                <div class="dropdown-menu" id="dropdown-menu-links" aria-labelledby="navbarDropdown">
                </div>
              </li>
              <li class="nav-item dropdown">
                <a id="navbarDropdown1" href="#" class="dropdown-toggle nav-link" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Manuals</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown1">
                  <a class="dropdown-item" href="/5.18.4/index-overview.html">Overview</a>
                  <a class="dropdown-item" href="/5.18.4/index-tutorials.html">Tutorials</a>
                  <a class="dropdown-item" href="/5.18.4/index-faq.html">FAQs</a>
                  <a class="dropdown-item" href="/5.18.4/index-history.html">History / Changes</a>
                  <a class="dropdown-item" href="/5.18.4/index-licence.html">License</a>
                  <a class="dropdown-item" href="/5.18.4/index-language.html">Language</a>
                  <a class="dropdown-item" href="/5.18.4/index-functions.html">Functions</a>
                  <a class="dropdown-item" href="/5.18.4/perlop.html">Operators</a>
                  <a class="dropdown-item" href="/5.18.4/perlvar.html">Special Variables</a>
                  <a class="dropdown-item" href="/5.18.4/index-pragmas.html">Pragmas</a>
                  <a class="dropdown-item" href="/5.18.4/index-utilities.html">Utilities</a>
                  <a class="dropdown-item" href="/5.18.4/index-internals.html">Internals</a>
                  <a class="dropdown-item" href="/5.18.4/index-platforms.html">Platform Specific</a>
                </div>
              </li>
              <li class="nav-item dropdown">
                <a id="navbarDropdown3" href="#" class="nav-link dropdown-toggle " data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Modules</a>
                <div aria-labelledby="navbarDropdown3" class="dropdown-menu letters-wrap">
                  <a class="dropdown-item" href="/5.18.4/index-functions.html">A-Z</a>
                  <a class="dropdown-item" href="/5.18.4/index-functions-by-cat.html">By Category</a>
                  <div class="dropdown-divider"></div>
                  <div class="letter-container">
                    <a class="dropdown-item letters" href="/5.18.4/index-modules-A.html">A</a>
                    <a class="dropdown-item letters" href="/5.18.4/index-modules-B.html">B</a>
                    <a class="dropdown-item letters" href="/5.18.4/index-modules-C.html">C</a>
                    <a class="dropdown-item letters" href="/5.18.4/index-modules-D.html">D</a>
                    <a class="dropdown-item letters" href="/5.18.4/index-modules-E.html">E</a>
                    <a class="dropdown-item letters" href="/5.18.4/index-modules-F.html">F</a>
                    <a class="dropdown-item letters" href="/5.18.4/index-modules-G.html">G</a>
                    <a class="dropdown-item letters" href="/5.18.4/index-modules-H.html">H</a>
                    <a class="dropdown-item letters" href="/5.18.4/index-modules-I.html">I</a>
                    <a class="dropdown-item letters" href="/5.18.4/index-modules-J.html">J</a>
                    <a class="dropdown-item letters" href="/5.18.4/index-modules-L.html">L</a>
                    <a class="dropdown-item letters" href="/5.18.4/index-modules-M.html">M</a>
                    <a class="dropdown-item letters" href="/5.18.4/index-modules-N.html">N</a>
                    <a class="dropdown-item letters" href="/5.18.4/index-modules-O.html">O</a>
                    <a class="dropdown-item letters" href="/5.18.4/index-modules-P.html">P</a>
                    <a class="dropdown-item letters" href="/5.18.4/index-modules-S.html">S</a>
                    <a class="dropdown-item letters" href="/5.18.4/index-modules-T.html">T</a>
                    <a class="dropdown-item letters" href="/5.18.4/index-modules-U.html">U</a>
                    <a class="dropdown-item letters" href="/5.18.4/index-modules-X.html">X</a>
                    </div>
                </div>
              </li>
            </ul>
          </div>
          <!--/.nav-collapse -->
        </nav>

      <main class="row main-content pb-5 pt-5">
        <div class="col-sm-8 offset-sm-2">
          <div class="row">
            <div class="col-sm-12">
                <div id="breadcrumbs">
                    
    <a href="index.html">Home</a>&nbsp; &gt;
    
      
        <a href="index-modules-S.html">Core modules (S)</a> &gt;
      
    
    Socket
  

                </div>
            </div>
          </div>
          <div class="row">
              <article class="col-sm-12 content">
                <div class="documentation-wrapper">
                  <div id="perl_version">
                    <h1 class='page-title'> Perl 5 version 18.4 documentation</h1>
                  </div>
                  <h1>Socket</h1>


  <!--    -->
<ul><li><a href="#NAME">NAME</a></li><li><a href="#SYNOPSIS">SYNOPSIS</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><li><a href="#CONSTANTS">CONSTANTS</a></li><ul><li><a href="#PF_INET%2c-PF_INET6%2c-PF_UNIX%2c-...">PF_INET, PF_INET6, PF_UNIX, ...</a></li><li><a href="#AF_INET%2c-AF_INET6%2c-AF_UNIX%2c-...">AF_INET, AF_INET6, AF_UNIX, ...</a></li><li><a href="#SOCK_STREAM%2c-SOCK_DGRAM%2c-SOCK_RAW%2c-...">SOCK_STREAM, SOCK_DGRAM, SOCK_RAW, ...</a></li><li><a href="#SOCK_NONBLOCK.-SOCK_CLOEXEC">SOCK_NONBLOCK. SOCK_CLOEXEC</a></li><li><a href="#SOL_SOCKET">SOL_SOCKET</a></li><li><a href="#SO_ACCEPTCONN%2c-SO_BROADCAST%2c-SO_ERROR%2c-...">SO_ACCEPTCONN, SO_BROADCAST, SO_ERROR, ...</a></li><li><a href="#IP_OPTIONS%2c-IP_TOS%2c-IP_TTL%2c-...">IP_OPTIONS, IP_TOS, IP_TTL, ...</a></li><li><a href="#MSG_BCAST%2c-MSG_OOB%2c-MSG_TRUNC%2c-...">MSG_BCAST, MSG_OOB, MSG_TRUNC, ...</a></li><li><a href="#SHUT_RD%2c-SHUT_RDWR%2c-SHUT_WR">SHUT_RD, SHUT_RDWR, SHUT_WR</a></li><li><a href="#INADDR_ANY%2c-INADDR_BROADCAST%2c-INADDR_LOOPBACK%2c-INADDR_NONE">INADDR_ANY, INADDR_BROADCAST, INADDR_LOOPBACK, INADDR_NONE</a></li><li><a href="#IPPROTO_IP%2c-IPPROTO_IPV6%2c-IPPROTO_TCP%2c-...">IPPROTO_IP, IPPROTO_IPV6, IPPROTO_TCP, ...</a></li><li><a href="#TCP_CORK%2c-TCP_KEEPALIVE%2c-TCP_NODELAY%2c-...">TCP_CORK, TCP_KEEPALIVE, TCP_NODELAY, ...</a></li><li><a href="#IN6ADDR_ANY%2c-IN6ADDR_LOOPBACK">IN6ADDR_ANY, IN6ADDR_LOOPBACK</a></li><li><a href="#IPV6_ADD_MEMBERSHIP%2c-IPV6_MTU%2c-IPV6_V6ONLY%2c-...">IPV6_ADD_MEMBERSHIP, IPV6_MTU, IPV6_V6ONLY, ...</a></li></ul><li><a href="#STRUCTURE-MANIPULATORS">STRUCTURE MANIPULATORS</a></li><ul><li><a href="#%24family-%3d-sockaddr_family-%24sockaddr">$family = sockaddr_family $sockaddr</a></li><li><a href="#%24sockaddr-%3d-pack_sockaddr_in-%24port%2c-%24ip_address">$sockaddr = pack_sockaddr_in $port, $ip_address</a></li><li><a href="#(%24port%2c-%24ip_address)-%3d-unpack_sockaddr_in-%24sockaddr">($port, $ip_address) = unpack_sockaddr_in $sockaddr</a></li><li><a href="#%24sockaddr-%3d-sockaddr_in-%24port%2c-%24ip_address">$sockaddr = sockaddr_in $port, $ip_address</a></li><li><a href="#(%24port%2c-%24ip_address)-%3d-sockaddr_in-%24sockaddr">($port, $ip_address) = sockaddr_in $sockaddr</a></li><li><a href="#%24sockaddr-%3d-pack_sockaddr_in6-%24port%2c-%24ip6_address%2c-%5b%24scope_id%2c-%5b%24flowinfo%5d%5d">$sockaddr = pack_sockaddr_in6 $port, $ip6_address, [$scope_id, [$flowinfo]]</a></li><li><a href="#(%24port%2c-%24ip6_address%2c-%24scope_id%2c-%24flowinfo)-%3d-unpack_sockaddr_in6-%24sockaddr">($port, $ip6_address, $scope_id, $flowinfo) = unpack_sockaddr_in6 $sockaddr</a></li><li><a href="#%24sockaddr-%3d-sockaddr_in6-%24port%2c-%24ip6_address%2c-%5b%24scope_id%2c-%5b%24flowinfo%5d%5d">$sockaddr = sockaddr_in6 $port, $ip6_address, [$scope_id, [$flowinfo]]</a></li><li><a href="#(%24port%2c-%24ip6_address%2c-%24scope_id%2c-%24flowinfo)-%3d-sockaddr_in6-%24sockaddr">($port, $ip6_address, $scope_id, $flowinfo) = sockaddr_in6 $sockaddr</a></li><li><a href="#%24sockaddr-%3d-pack_sockaddr_un-%24path">$sockaddr = pack_sockaddr_un $path</a></li><li><a href="#(%24path)-%3d-unpack_sockaddr_un-%24sockaddr">($path) = unpack_sockaddr_un $sockaddr</a></li><li><a href="#%24sockaddr-%3d-sockaddr_un-%24path">$sockaddr = sockaddr_un $path</a></li><li><a href="#(%24path)-%3d-sockaddr_un-%24sockaddr">($path) = sockaddr_un $sockaddr</a></li><li><a href="#%24ip_mreq-%3d-pack_ip_mreq-%24multiaddr%2c-%24interface">$ip_mreq = pack_ip_mreq $multiaddr, $interface</a></li><li><a href="#(%24multiaddr%2c-%24interface)-%3d-unpack_ip_mreq-%24ip_mreq">($multiaddr, $interface) = unpack_ip_mreq $ip_mreq</a></li><li><a href="#%24ip_mreq_source-%3d-pack_ip_mreq_source-%24multiaddr%2c-%24source%2c-%24interface">$ip_mreq_source = pack_ip_mreq_source $multiaddr, $source, $interface</a></li><li><a href="#(%24multiaddr%2c-%24source%2c-%24interface)-%3d-unpack_ip_mreq_source-%24ip_mreq">($multiaddr, $source, $interface) = unpack_ip_mreq_source $ip_mreq</a></li><li><a href="#%24ipv6_mreq-%3d-pack_ipv6_mreq-%24multiaddr6%2c-%24ifindex">$ipv6_mreq = pack_ipv6_mreq $multiaddr6, $ifindex</a></li><li><a href="#(%24multiaddr6%2c-%24ifindex)-%3d-unpack_ipv6_mreq-%24ipv6_mreq">($multiaddr6, $ifindex) = unpack_ipv6_mreq $ipv6_mreq</a></li></ul><li><a href="#FUNCTIONS">FUNCTIONS</a></li><ul><li><a href="#%24ip_address-%3d-inet_aton-%24string">$ip_address = inet_aton $string</a></li><li><a href="#%24string-%3d-inet_ntoa-%24ip_address">$string = inet_ntoa $ip_address</a></li><li><a href="#%24address-%3d-inet_pton-%24family%2c-%24string">$address = inet_pton $family, $string</a></li><li><a href="#%24string-%3d-inet_ntop-%24family%2c-%24address">$string = inet_ntop $family, $address</a></li><li><a href="#(%24err%2c-%40result)-%3d-getaddrinfo-%24host%2c-%24service%2c-%5b%24hints%5d">($err, @result) = getaddrinfo $host, $service, [$hints]</a></li><li><a href="#(%24err%2c-%24hostname%2c-%24servicename)-%3d-getnameinfo-%24sockaddr%2c-%5b%24flags%2c-%5b%24xflags%5d%5d">($err, $hostname, $servicename) = getnameinfo $sockaddr, [$flags, [$xflags]]</a></li></ul><li><a href="#getaddrinfo()-%2f-getnameinfo()-ERROR-CONSTANTS">getaddrinfo() / getnameinfo() ERROR CONSTANTS</a></li><li><a href="#EXAMPLES">EXAMPLES</a></li><ul><li><a href="#Lookup-for-connect()">Lookup for connect()</a></li><li><a href="#Making-a-human-readable-string-out-of-an-address">Making a human-readable string out of an address</a></li><li><a href="#Resolving-hostnames-into-IP-addresses">Resolving hostnames into IP addresses</a></li><li><a href="#Accessing-socket-options">Accessing socket options</a></li></ul><li><a href="#AUTHOR">AUTHOR</a></li></ul><a id="NAME"></a><h2 class='h2' >NAME</h2>
<p><pre>
<span class="w">Socket</span></code>
 - networking constants and support functions</p>
<a id="SYNOPSIS"></a><h2 class='h2' >SYNOPSIS</h2>
<p><pre>
<span class="w">Socket</span></code>
 a low-level module used by, among other things, the <a href="IO/Socket.html">IO::Socket</a>
family of modules. The following examples demonstrate some low-level uses but
a practical program would likely use the higher-level API provided by
<pre>
<span class="w">IO::Socket</span></code>
 or similar instead.</p>
<pre>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">Socket</span> <span class="q">qw(PF_INET SOCK_STREAM pack_sockaddr_in inet_aton)</span><span class="sc">;</span>

 <a class="l_k" href="functions/socket.html">socket</a><span class="s">(</span><a class="l_k" href="functions/my.html">my</a> <span class="i">$socket</span><span class="cm">,</span> <span class="w">PF_INET</span><span class="cm">,</span> <span class="w">SOCK_STREAM</span><span class="cm">,</span> <span class="n">0</span><span class="s">)</span>
     <a class="l_k" href="functions/or.html">or</a> <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;socket: $!&quot;</span><span class="sc">;</span>

 <a class="l_k" href="functions/my.html">my</a> <span class="i">$port</span> = <a class="l_k" href="functions/getservbyname.html">getservbyname</a> <span class="q">&quot;echo&quot;</span><span class="cm">,</span> <span class="q">&quot;tcp&quot;</span><span class="sc">;</span>
 <a class="l_k" href="functions/connect.html">connect</a><span class="s">(</span><span class="i">$socket</span><span class="cm">,</span> <span class="i">pack_sockaddr_in</span><span class="s">(</span><span class="i">$port</span><span class="cm">,</span> <span class="i">inet_aton</span><span class="s">(</span><span class="q">&quot;localhost&quot;</span><span class="s">)</span><span class="s">)</span><span class="s">)</span>
     <a class="l_k" href="functions/or.html">or</a> <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;connect: $!&quot;</span><span class="sc">;</span>

 <a class="l_k" href="functions/print.html">print</a> <span class="i">$socket</span> <span class="q">&quot;Hello, world!\n&quot;</span><span class="sc">;</span>
 <a class="l_k" href="functions/print.html">print</a> <span class="q">&lt;$socket&gt;</span><span class="sc">;</span></pre>
<p>See also the <a href="#EXAMPLES">EXAMPLES</a> section.</p>
<a id="DESCRIPTION"></a><h2 class='h2' >DESCRIPTION</h2>
<p>This module provides a variety of constants, structure manipulators and other
functions related to socket-based networking. The values and functions
provided are useful when used in conjunction with Perl core functions such as
socket(), setsockopt() and bind(). It also provides several other support
functions, mostly for dealing with conversions of network addresses between
human-readable and native binary forms, and for hostname resolver operations.</p>
<p>Some constants and functions are exported by default by this module; but for
backward-compatibility any recently-added symbols are not exported by default
and must be requested explicitly. When an import list is provided to the
<pre>
<a class="l_k" href="functions/use.html">use</a> <span class="w">Socket</span></code>
 line, the default exports are not automatically imported. It is
therefore best practice to always to explicitly list all the symbols required.</p>
<p>Also, some common socket "newline" constants are provided: the constants
<pre>
<span class="w">CR</span></code>
, <pre>
<span class="w">LF</span></code>
, and <pre>
<span class="w">CRLF</span></code>
, as well as <pre>
<span class="i">$CR</span></code>
, <pre>
<span class="i">$LF</span></code>
, and <pre>
<span class="i">$CRLF</span></code>
, which map
to <pre>
\<span class="n">015</span></code>
, <pre>
\<span class="n">012</span></code>
, and <pre>
\<span class="n">015</span>\<span class="n">012</span></code>
. If you do not want to use the literal
characters in your programs, then use the constants provided here. They are
not exported by default, but can be imported individually, and with the
<pre>
<span class="j">:</span><span class="w">crlf</span></code>
 export tag:</p>
<pre>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">Socket</span> <span class="q">qw(:DEFAULT :crlf)</span><span class="sc">;</span>

 <span class="i">$sock</span><span class="i">-&gt;print</span><span class="s">(</span><span class="q">&quot;GET / HTTP/1.0$CRLF&quot;</span><span class="s">)</span><span class="sc">;</span></pre>
<p>The entire getaddrinfo() subsystem can be exported using the tag <pre>
<span class="j">:</span><span class="w">addrinfo</span></code>
;
this exports the getaddrinfo() and getnameinfo() functions, and all the
<pre>
<span class="w">AI_</span>*</code>
, <pre>
<span class="w">NI_</span>*</code>
, <pre>
<span class="w">NIx_</span>*</code>
 and <pre>
<span class="w">EAI_</span>*</code>
 constants.</p>
<a id="CONSTANTS"></a><h2 class='h2' >CONSTANTS</h2>
<p>In each of the following groups, there may be many more constants provided
than just the ones given as examples in the section heading. If the heading
ends <pre>
...</code>
 then this means there are likely more; the exact constants
provided will depend on the OS and headers found at compile-time.</p>
<a id="PF_INET%2c-PF_INET6%2c-PF_UNIX%2c-..."></a><h3 class='h3' >PF_INET, PF_INET6, PF_UNIX, ...</h3>
<p>Protocol family constants to use as the first argument to socket() or the
value of the <pre>
<span class="w">SO_DOMAIN</span></code>
 or <pre>
<span class="w">SO_FAMILY</span></code>
 socket option.</p>
<a id="AF_INET%2c-AF_INET6%2c-AF_UNIX%2c-..."></a><h3 class='h3' >AF_INET, AF_INET6, AF_UNIX, ...</h3>
<p>Address family constants used by the socket address structures, to pass to
such functions as inet_pton() or getaddrinfo(), or are returned by such
functions as sockaddr_family().</p>
<a id="SOCK_STREAM%2c-SOCK_DGRAM%2c-SOCK_RAW%2c-..."></a><h3 class='h3' >SOCK_STREAM, SOCK_DGRAM, SOCK_RAW, ...</h3>
<p>Socket type constants to use as the second argument to socket(), or the value
of the <pre>
<span class="w">SO_TYPE</span></code>
 socket option.</p>
<a id="SOCK_NONBLOCK.-SOCK_CLOEXEC"></a><h3 class='h3' >SOCK_NONBLOCK. SOCK_CLOEXEC</h3>
<p>Linux-specific shortcuts to specify the <pre>
<span class="w">O_NONBLOCK</span></code>
 and <pre>
<span class="w">FD_CLOEXEC</span></code>
 flags
during a <code class="inline"><a class="l_k" href="functions/socket.html">socket(2)</a></code> call.</p>
<pre>
 <a class="l_k" href="functions/socket.html">socket</a><span class="s">(</span> <a class="l_k" href="functions/my.html">my</a> <span class="i">$sockh</span><span class="cm">,</span> <span class="w">PF_INET</span><span class="cm">,</span> <span class="w">SOCK_DGRAM</span>|<span class="w">SOCK_NONBLOCK</span><span class="cm">,</span> <span class="n">0</span> <span class="s">)</span></pre>
<a id="SOL_SOCKET"></a><h3 class='h3' >SOL_SOCKET</h3>
<p>Socket option level constant for setsockopt() and getsockopt().</p>
<a id="SO_ACCEPTCONN%2c-SO_BROADCAST%2c-SO_ERROR%2c-..."></a><h3 class='h3' >SO_ACCEPTCONN, SO_BROADCAST, SO_ERROR, ...</h3>
<p>Socket option name constants for setsockopt() and getsockopt() at the
<pre>
<span class="w">SOL_SOCKET</span></code>
 level.</p>
<a id="IP_OPTIONS%2c-IP_TOS%2c-IP_TTL%2c-..."></a><h3 class='h3' >IP_OPTIONS, IP_TOS, IP_TTL, ...</h3>
<p>Socket option name constants for IPv4 socket options at the <pre>
<span class="w">IPPROTO_IP</span></code>

level.</p>
<a id="MSG_BCAST%2c-MSG_OOB%2c-MSG_TRUNC%2c-..."></a><h3 class='h3' >MSG_BCAST, MSG_OOB, MSG_TRUNC, ...</h3>
<p>Message flag constants for send() and recv().</p>
<a id="SHUT_RD%2c-SHUT_RDWR%2c-SHUT_WR"></a><h3 class='h3' >SHUT_RD, SHUT_RDWR, SHUT_WR</h3>
<p>Direction constants for shutdown().</p>
<a id="INADDR_ANY%2c-INADDR_BROADCAST%2c-INADDR_LOOPBACK%2c-INADDR_NONE"></a><h3 class='h3' >INADDR_ANY, INADDR_BROADCAST, INADDR_LOOPBACK, INADDR_NONE</h3>
<p>Constants giving the special <pre>
<span class="w">AF_INET</span></code>
 addresses for wildcard, broadcast,
local loopback, and invalid addresses.</p>
<p>Normally equivalent to inet_aton('0.0.0.0'), inet_aton('255.255.255.255'),
inet_aton('localhost') and inet_aton('255.255.255.255') respectively.</p>
<a id="IPPROTO_IP%2c-IPPROTO_IPV6%2c-IPPROTO_TCP%2c-..."></a><h3 class='h3' >IPPROTO_IP, IPPROTO_IPV6, IPPROTO_TCP, ...</h3>
<p>IP protocol constants to use as the third argument to socket(), the level
argument to getsockopt() or setsockopt(), or the value of the <pre>
<span class="w">SO_PROTOCOL</span></code>

socket option.</p>
<a id="TCP_CORK%2c-TCP_KEEPALIVE%2c-TCP_NODELAY%2c-..."></a><h3 class='h3' >TCP_CORK, TCP_KEEPALIVE, TCP_NODELAY, ...</h3>
<p>Socket option name constants for TCP socket options at the <pre>
<span class="w">IPPROTO_TCP</span></code>

level.</p>
<a id="IN6ADDR_ANY%2c-IN6ADDR_LOOPBACK"></a><h3 class='h3' >IN6ADDR_ANY, IN6ADDR_LOOPBACK</h3>
<p>Constants giving the special <pre>
<span class="w">AF_INET6</span></code>
 addresses for wildcard and local
loopback.</p>
<p>Normally equivalent to inet_pton(AF_INET6, "::") and
inet_pton(AF_INET6, "::1") respectively.</p>
<a id="IPV6_ADD_MEMBERSHIP%2c-IPV6_MTU%2c-IPV6_V6ONLY%2c-..."></a><h3 class='h3' >IPV6_ADD_MEMBERSHIP, IPV6_MTU, IPV6_V6ONLY, ...</h3>
<p>Socket option name constants for IPv6 socket options at the <pre>
<span class="w">IPPROTO_IPV6</span></code>

level.</p>
<a id="STRUCTURE-MANIPULATORS"></a><h2 class='h2' >STRUCTURE MANIPULATORS</h2>
<p>The following functions convert between lists of Perl values and packed binary
strings representing structures.</p>
<a id="%24family-%3d-sockaddr_family-%24sockaddr"></a><h3 class='h3' >$family = sockaddr_family $sockaddr</h3>
<p>Takes a packed socket address (as returned by pack_sockaddr_in(),
pack_sockaddr_un() or the perl builtin functions getsockname() and
getpeername()). Returns the address family tag. This will be one of the
<pre>
<span class="w">AF_</span>*</code>
 constants, such as <pre>
<span class="w">AF_INET</span></code>
 for a <pre>
<span class="w">sockaddr_in</span></code>
 addresses or
<pre>
<span class="w">AF_UNIX</span></code>
 for a <pre>
<span class="w">sockaddr_un</span></code>
. It can be used to figure out what unpack to
use for a sockaddr of unknown type.</p>
<a id="%24sockaddr-%3d-pack_sockaddr_in-%24port%2c-%24ip_address"></a><h3 class='h3' >$sockaddr = pack_sockaddr_in $port, $ip_address</h3>
<p>Takes two arguments, a port number and an opaque string (as returned by
inet_aton(), or a v-string). Returns the <pre>
<span class="w">sockaddr_in</span></code>
 structure with those
arguments packed in and <pre>
<span class="w">AF_INET</span></code>
 filled in. For Internet domain sockets,
this structure is normally what you need for the arguments in bind(),
connect(), and send().</p>
<a id="(%24port%2c-%24ip_address)-%3d-unpack_sockaddr_in-%24sockaddr"></a><h3 class='h3' >($port, $ip_address) = unpack_sockaddr_in $sockaddr</h3>
<p>Takes a <pre>
<span class="w">sockaddr_in</span></code>
 structure (as returned by pack_sockaddr_in(),
getpeername() or recv()). Returns a list of two elements: the port and an
opaque string representing the IP address (you can use inet_ntoa() to convert
the address to the four-dotted numeric format). Will croak if the structure
does not represent an <pre>
<span class="w">AF_INET</span></code>
 address.</p>
<p>In scalar context will return just the IP address.</p>
<a id="%24sockaddr-%3d-sockaddr_in-%24port%2c-%24ip_address"></a><h3 class='h3' >$sockaddr = sockaddr_in $port, $ip_address</h3>
<a id="(%24port%2c-%24ip_address)-%3d-sockaddr_in-%24sockaddr"></a><h3 class='h3' >($port, $ip_address) = sockaddr_in $sockaddr</h3>
<p>A wrapper of pack_sockaddr_in() or unpack_sockaddr_in(). In list context,
unpacks its argument and returns a list consisting of the port and IP address.
In scalar context, packs its port and IP address arguments as a <pre>
<span class="w">sockaddr_in</span></code>

and returns it.</p>
<p>Provided largely for legacy compatibility; it is better to use
pack_sockaddr_in() or unpack_sockaddr_in() explicitly.</p>
<a id="%24sockaddr-%3d-pack_sockaddr_in6-%24port%2c-%24ip6_address%2c-%5b%24scope_id%2c-%5b%24flowinfo%5d%5d"></a><h3 class='h3' >$sockaddr = pack_sockaddr_in6 $port, $ip6_address, [$scope_id, [$flowinfo]]</h3>
<p>Takes two to four arguments, a port number, an opaque string (as returned by
inet_pton()), optionally a scope ID number, and optionally a flow label
number. Returns the <pre>
<span class="w">sockaddr_in6</span></code>
 structure with those arguments packed in
and <pre>
<span class="w">AF_INET6</span></code>
 filled in. IPv6 equivalent of pack_sockaddr_in().</p>
<a id="(%24port%2c-%24ip6_address%2c-%24scope_id%2c-%24flowinfo)-%3d-unpack_sockaddr_in6-%24sockaddr"></a><h3 class='h3' >($port, $ip6_address, $scope_id, $flowinfo) = unpack_sockaddr_in6 $sockaddr</h3>
<p>Takes a <pre>
<span class="w">sockaddr_in6</span></code>
 structure. Returns a list of four elements: the port
number, an opaque string representing the IPv6 address, the scope ID, and the
flow label. (You can use inet_ntop() to convert the address to the usual
string format). Will croak if the structure does not represent an <pre>
<span class="w">AF_INET6</span></code>

address.</p>
<p>In scalar context will return just the IP address.</p>
<a id="%24sockaddr-%3d-sockaddr_in6-%24port%2c-%24ip6_address%2c-%5b%24scope_id%2c-%5b%24flowinfo%5d%5d"></a><h3 class='h3' >$sockaddr = sockaddr_in6 $port, $ip6_address, [$scope_id, [$flowinfo]]</h3>
<a id="(%24port%2c-%24ip6_address%2c-%24scope_id%2c-%24flowinfo)-%3d-sockaddr_in6-%24sockaddr"></a><h3 class='h3' >($port, $ip6_address, $scope_id, $flowinfo) = sockaddr_in6 $sockaddr</h3>
<p>A wrapper of pack_sockaddr_in6() or unpack_sockaddr_in6(). In list context,
unpacks its argument according to unpack_sockaddr_in6(). In scalar context,
packs its arguments according to pack_sockaddr_in6().</p>
<p>Provided largely for legacy compatibility; it is better to use
pack_sockaddr_in6() or unpack_sockaddr_in6() explicitly.</p>
<a id="%24sockaddr-%3d-pack_sockaddr_un-%24path"></a><h3 class='h3' >$sockaddr = pack_sockaddr_un $path</h3>
<p>Takes one argument, a pathname. Returns the <pre>
<span class="w">sockaddr_un</span></code>
 structure with that
path packed in with <pre>
<span class="w">AF_UNIX</span></code>
 filled in. For <pre>
<span class="w">PF_UNIX</span></code>
 sockets, this
structure is normally what you need for the arguments in bind(), connect(),
and send().</p>
<a id="(%24path)-%3d-unpack_sockaddr_un-%24sockaddr"></a><h3 class='h3' >($path) = unpack_sockaddr_un $sockaddr</h3>
<p>Takes a <pre>
<span class="w">sockaddr_un</span></code>
 structure (as returned by pack_sockaddr_un(),
getpeername() or recv()). Returns a list of one element: the pathname. Will
croak if the structure does not represent an <pre>
<span class="w">AF_UNIX</span></code>
 address.</p>
<a id="%24sockaddr-%3d-sockaddr_un-%24path"></a><h3 class='h3' >$sockaddr = sockaddr_un $path</h3>
<a id="(%24path)-%3d-sockaddr_un-%24sockaddr"></a><h3 class='h3' >($path) = sockaddr_un $sockaddr</h3>
<p>A wrapper of pack_sockaddr_un() or unpack_sockaddr_un(). In a list context,
unpacks its argument and returns a list consisting of the pathname. In a
scalar context, packs its pathname as a <pre>
<span class="w">sockaddr_un</span></code>
 and returns it.</p>
<p>Provided largely for legacy compatibility; it is better to use
pack_sockaddr_un() or unpack_sockaddr_un() explicitly.</p>
<p>These are only supported if your system has &lt;<i>sys/un.h</i>&gt;.</p>
<a id="%24ip_mreq-%3d-pack_ip_mreq-%24multiaddr%2c-%24interface"></a><h3 class='h3' >$ip_mreq = pack_ip_mreq $multiaddr, $interface</h3>
<p>Takes an IPv4 multicast address and optionally an interface address (or
<pre>
<span class="w">INADDR_ANY</span></code>
). Returns the <pre>
<span class="w">ip_mreq</span></code>
 structure with those arguments packed
in. Suitable for use with the <pre>
<span class="w">IP_ADD_MEMBERSHIP</span></code>
 and <pre>
<span class="w">IP_DROP_MEMBERSHIP</span></code>

sockopts.</p>
<a id="(%24multiaddr%2c-%24interface)-%3d-unpack_ip_mreq-%24ip_mreq"></a><h3 class='h3' >($multiaddr, $interface) = unpack_ip_mreq $ip_mreq</h3>
<p>Takes an <pre>
<span class="w">ip_mreq</span></code>
 structure. Returns a list of two elements; the IPv4
multicast address and interface address.</p>
<a id="%24ip_mreq_source-%3d-pack_ip_mreq_source-%24multiaddr%2c-%24source%2c-%24interface"></a><h3 class='h3' >$ip_mreq_source = pack_ip_mreq_source $multiaddr, $source, $interface</h3>
<p>Takes an IPv4 multicast address, source address, and optionally an interface
address (or <pre>
<span class="w">INADDR_ANY</span></code>
). Returns the <pre>
<span class="w">ip_mreq_source</span></code>
 structure with those
arguments packed in. Suitable for use with the <pre>
<span class="w">IP_ADD_SOURCE_MEMBERSHIP</span></code>

and <pre>
<span class="w">IP_DROP_SOURCE_MEMBERSHIP</span></code>
 sockopts.</p>
<a id="(%24multiaddr%2c-%24source%2c-%24interface)-%3d-unpack_ip_mreq_source-%24ip_mreq"></a><h3 class='h3' >($multiaddr, $source, $interface) = unpack_ip_mreq_source $ip_mreq</h3>
<p>Takes an <pre>
<span class="w">ip_mreq_source</span></code>
 structure. Returns a list of three elements; the
IPv4 multicast address, source address and interface address.</p>
<a id="%24ipv6_mreq-%3d-pack_ipv6_mreq-%24multiaddr6%2c-%24ifindex"></a><h3 class='h3' >$ipv6_mreq = pack_ipv6_mreq $multiaddr6, $ifindex</h3>
<p>Takes an IPv6 multicast address and an interface number. Returns the
<pre>
<span class="w">ipv6_mreq</span></code>
 structure with those arguments packed in. Suitable for use with
the <pre>
<span class="w">IPV6_ADD_MEMBERSHIP</span></code>
 and <pre>
<span class="w">IPV6_DROP_MEMBERSHIP</span></code>
 sockopts.</p>
<a id="(%24multiaddr6%2c-%24ifindex)-%3d-unpack_ipv6_mreq-%24ipv6_mreq"></a><h3 class='h3' >($multiaddr6, $ifindex) = unpack_ipv6_mreq $ipv6_mreq</h3>
<p>Takes an <pre>
<span class="w">ipv6_mreq</span></code>
 structure. Returns a list of two elements; the IPv6
address and an interface number.</p>
<a id="FUNCTIONS"></a><h2 class='h2' >FUNCTIONS</h2>
<a id="%24ip_address-%3d-inet_aton-%24string"></a><h3 class='h3' >$ip_address = inet_aton $string</h3>
<p>Takes a string giving the name of a host, or a textual representation of an IP
address and translates that to an packed binary address structure suitable to
pass to pack_sockaddr_in(). If passed a hostname that cannot be resolved,
returns <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code>. For multi-homed hosts (hosts with more than one address),
the first address found is returned.</p>
<p>For portability do not assume that the result of inet_aton() is 32 bits wide,
in other words, that it would contain only the IPv4 address in network order.</p>
<p>This IPv4-only function is provided largely for legacy reasons. Newly-written
code should use getaddrinfo() or inet_pton() instead for IPv6 support.</p>
<a id="%24string-%3d-inet_ntoa-%24ip_address"></a><h3 class='h3' >$string = inet_ntoa $ip_address</h3>
<p>Takes a packed binary address structure such as returned by
unpack_sockaddr_in() (or a v-string representing the four octets of the IPv4
address in network order) and translates it into a string of the form
<pre>
<span class="w">d</span>.<span class="w">d</span>.<span class="w">d</span>.<span class="w">d</span></code>
 where the <pre>
<span class="w">d</span></code>
s are numbers less than 256 (the normal
human-readable four dotted number notation for Internet addresses).</p>
<p>This IPv4-only function is provided largely for legacy reasons. Newly-written
code should use getnameinfo() or inet_ntop() instead for IPv6 support.</p>
<a id="%24address-%3d-inet_pton-%24family%2c-%24string"></a><h3 class='h3' >$address = inet_pton $family, $string</h3>
<p>Takes an address family (such as <pre>
<span class="w">AF_INET</span></code>
 or <pre>
<span class="w">AF_INET6</span></code>
) and a string
containing a textual representation of an address in that family and
translates that to an packed binary address structure.</p>
<p>See also getaddrinfo() for a more powerful and flexible function to look up
socket addresses given hostnames or textual addresses.</p>
<a id="%24string-%3d-inet_ntop-%24family%2c-%24address"></a><h3 class='h3' >$string = inet_ntop $family, $address</h3>
<p>Takes an address family and a packed binary address structure and translates
it into a human-readable textual representation of the address; typically in
<pre>
<span class="w">d</span>.<span class="w">d</span>.<span class="w">d</span>.<span class="w">d</span></code>
 form for <pre>
<span class="w">AF_INET</span></code>
 or <pre>
<span class="j">hhhh:</span><span class="w">hhhh::hhhh</span></code>
 form for <pre>
<span class="w">AF_INET6</span></code>
.</p>
<p>See also getnameinfo() for a more powerful and flexible function to turn
socket addresses into human-readable textual representations.</p>
<a id="(%24err%2c-%40result)-%3d-getaddrinfo-%24host%2c-%24service%2c-%5b%24hints%5d"></a><h3 class='h3' >($err, @result) = getaddrinfo $host, $service, [$hints]</h3>
<p>Given both a hostname and service name, this function attempts to resolve the
host name into a list of network addresses, and the service name into a
protocol and port number, and then returns a list of address structures
suitable to connect() to it.</p>
<p>Given just a host name, this function attempts to resolve it to a list of
network addresses, and then returns a list of address structures giving these
addresses.</p>
<p>Given just a service name, this function attempts to resolve it to a protocol
and port number, and then returns a list of address structures that represent
it suitable to bind() to. This use should be combined with the <pre>
<span class="w">AI_PASSIVE</span></code>

flag; see below.</p>
<p>Given neither name, it generates an error.</p>
<p>If present, $hints should be a reference to a hash, where the following keys
are recognised:</p>
<ul>
<li><a id="flags-%3d%3e-INT"></a><strong>flags =&gt; INT</strong>
<p>A bitfield containing <pre>
<span class="w">AI_</span>*</code>
 constants; see below.</p>
</li>
<li><a id="family-%3d%3e-INT"></a><strong>family =&gt; INT</strong>
<p>Restrict to only generating addresses in this address family</p>
</li>
<li><a id="socktype-%3d%3e-INT"></a><strong>socktype =&gt; INT</strong>
<p>Restrict to only generating addresses of this socket type</p>
</li>
<li><a id="protocol-%3d%3e-INT"></a><strong>protocol =&gt; INT</strong>
<p>Restrict to only generating addresses for this protocol</p>
</li>
</ul>
<p>The return value will be a list; the first value being an error indication,
followed by a list of address structures (if no error occurred).</p>
<p>The error value will be a dualvar; comparable to the <pre>
<span class="w">EI_</span>*</code>
 error constants,
or printable as a human-readable error message string. If no error occurred it
will be zero numerically and an empty string.</p>
<p>Each value in the results list will be a hash reference containing the following
fields:</p>
<ul>
<li><a id="family-%3d%3e-INT"></a><strong>family =&gt; INT</strong>
<p>The address family (e.g. <pre>
<span class="w">AF_INET</span></code>
)</p>
</li>
<li><a id="socktype-%3d%3e-INT"></a><strong>socktype =&gt; INT</strong>
<p>The socket type (e.g. <pre>
<span class="w">SOCK_STREAM</span></code>
)</p>
</li>
<li><a id="protocol-%3d%3e-INT"></a><strong>protocol =&gt; INT</strong>
<p>The protocol (e.g. <pre>
<span class="w">IPPROTO_TCP</span></code>
)</p>
</li>
<li><a id="addr-%3d%3e-STRING"></a><strong>addr =&gt; STRING</strong>
<p>The address in a packed string (such as would be returned by
pack_sockaddr_in())</p>
</li>
<li><a id="canonname-%3d%3e-STRING"></a><strong>canonname =&gt; STRING</strong>
<p>The canonical name for the host if the <pre>
<span class="w">AI_CANONNAME</span></code>
 flag was provided, or
<code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> otherwise. This field will only be present on the first returned
address.</p>
</li>
</ul>
<p>The following flag constants are recognised in the $hints hash. Other flag
constants may exist as provided by the OS.</p>
<ul>
<li><a id="AI_PASSIVE"></a><strong>AI_PASSIVE</strong>
<p>Indicates that this resolution is for a local bind() for a passive (i.e.
listening) socket, rather than an active (i.e. connecting) socket.</p>
</li>
<li><a id="AI_CANONNAME"></a><strong>AI_CANONNAME</strong>
<p>Indicates that the caller wishes the canonical hostname (<pre>
<span class="w">canonname</span></code>
) field
of the result to be filled in.</p>
</li>
<li><a id="AI_NUMERICHOST"></a><strong>AI_NUMERICHOST</strong>
<p>Indicates that the caller will pass a numeric address, rather than a hostname,
and that getaddrinfo() must not perform a resolve operation on this name. This
flag will prevent a possibly-slow network lookup operation, and instead return
an error if a hostname is passed.</p>
</li>
</ul>
<a id="(%24err%2c-%24hostname%2c-%24servicename)-%3d-getnameinfo-%24sockaddr%2c-%5b%24flags%2c-%5b%24xflags%5d%5d"></a><h3 class='h3' >($err, $hostname, $servicename) = getnameinfo $sockaddr, [$flags, [$xflags]]</h3>
<p>Given a packed socket address (such as from getsockname(), getpeername(), or
returned by getaddrinfo() in a <pre>
<span class="w">addr</span></code>
 field), returns the hostname and
symbolic service name it represents. $flags may be a bitmask of <pre>
<span class="w">NI_</span>*</code>

constants, or defaults to 0 if unspecified.</p>
<p>The return value will be a list; the first value being an error condition,
followed by the hostname and service name.</p>
<p>The error value will be a dualvar; comparable to the <pre>
<span class="w">EI_</span>*</code>
 error constants,
or printable as a human-readable error message string. The host and service
names will be plain strings.</p>
<p>The following flag constants are recognised as $flags. Other flag constants may
exist as provided by the OS.</p>
<ul>
<li><a id="NI_NUMERICHOST"></a><strong>NI_NUMERICHOST</strong>
<p>Requests that a human-readable string representation of the numeric address be
returned directly, rather than performing a name resolve operation that may
convert it into a hostname. This will also avoid potentially-blocking network
IO.</p>
</li>
<li><a id="NI_NUMERICSERV"></a><strong>NI_NUMERICSERV</strong>
<p>Requests that the port number be returned directly as a number representation
rather than performing a name resolve operation that may convert it into a
service name.</p>
</li>
<li><a id="NI_NAMEREQD"></a><strong>NI_NAMEREQD</strong>
<p>If a name resolve operation fails to provide a name, then this flag will cause
getnameinfo() to indicate an error, rather than returning the numeric
representation as a human-readable string.</p>
</li>
<li><a id="NI_DGRAM"></a><strong>NI_DGRAM</strong>
<p>Indicates that the socket address relates to a <pre>
<span class="w">SOCK_DGRAM</span></code>
 socket, for the
services whose name differs between TCP and UDP protocols.</p>
</li>
</ul>
<p>The following constants may be supplied as $xflags.</p>
<ul>
<li><a id="NIx_NOHOST"></a><strong>NIx_NOHOST</strong>
<p>Indicates that the caller is not interested in the hostname of the result, so
it does not have to be converted. <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> will be returned as the hostname.</p>
</li>
<li><a id="NIx_NOSERV"></a><strong>NIx_NOSERV</strong>
<p>Indicates that the caller is not interested in the service name of the result,
so it does not have to be converted. <code class="inline"><a class="l_k" href="functions/undef.html">undef</a></code> will be returned as the service
name.</p>
</li>
</ul>
<a id="getaddrinfo()-%2f-getnameinfo()-ERROR-CONSTANTS"></a><h2 class='h2' >getaddrinfo() / getnameinfo() ERROR CONSTANTS</h2>
<p>The following constants may be returned by getaddrinfo() or getnameinfo().
Others may be provided by the OS.</p>
<ul>
<li><a id="EAI_AGAIN"></a><strong>EAI_AGAIN</strong>
<p>A temporary failure occurred during name resolution. The operation may be
successful if it is retried later.</p>
</li>
<li><a id="EAI_BADFLAGS"></a><strong>EAI_BADFLAGS</strong>
<p>The value of the <pre>
<span class="w">flags</span></code>
 hint to getaddrinfo(), or the $flags parameter to
getnameinfo() contains unrecognised flags.</p>
</li>
<li><a id="EAI_FAMILY"></a><strong>EAI_FAMILY</strong>
<p>The <pre>
<span class="w">family</span></code>
 hint to getaddrinfo(), or the family of the socket address
passed to getnameinfo() is not supported.</p>
</li>
<li><a id="EAI_NODATA"></a><strong>EAI_NODATA</strong>
<p>The host name supplied to getaddrinfo() did not provide any usable address
data.</p>
</li>
<li><a id="EAI_NONAME"></a><strong>EAI_NONAME</strong>
<p>The host name supplied to getaddrinfo() does not exist, or the address
supplied to getnameinfo() is not associated with a host name and the
<pre>
<span class="w">NI_NAMEREQD</span></code>
 flag was supplied.</p>
</li>
<li><a id="EAI_SERVICE"></a><strong>EAI_SERVICE</strong>
<p>The service name supplied to getaddrinfo() is not available for the socket
type given in the $hints.</p>
</li>
</ul>
<a id="EXAMPLES"></a><h2 class='h2' >EXAMPLES</h2>
<a id="Lookup-for-connect()"></a><h3 class='h3' >Lookup for connect()</h3>
<p>The getaddrinfo() function converts a hostname and a service name into a list
of structures, each containing a potential way to connect() to the named
service on the named host.</p>
<pre>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">IO::Socket</span><span class="sc">;</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">Socket</span> <span class="q">qw(SOCK_STREAM getaddrinfo)</span><span class="sc">;</span>

 <a class="l_k" href="functions/my.html">my</a> <span class="i">%hints</span> = <span class="s">(</span><span class="w">socktype</span> <span class="cm">=&gt;</span> <span class="w">SOCK_STREAM</span><span class="s">)</span><span class="sc">;</span>
 <a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$err</span><span class="cm">,</span> <span class="i">@res</span><span class="s">)</span> = <span class="i">getaddrinfo</span><span class="s">(</span><span class="q">&quot;localhost&quot;</span><span class="cm">,</span> <span class="q">&quot;echo&quot;</span><span class="cm">,</span> \<span class="i">%hints</span><span class="s">)</span><span class="sc">;</span>
 <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;Cannot getaddrinfo - $err&quot;</span> <a class="l_k" href="functions/if.html">if</a> <span class="i">$err</span><span class="sc">;</span>

 <a class="l_k" href="functions/my.html">my</a> <span class="i">$sock</span><span class="sc">;</span>

 <a class="l_k" href="functions/foreach.html">foreach</a> <a class="l_k" href="functions/my.html">my</a> <span class="i">$ai</span> <span class="s">(</span><span class="i">@res</span><span class="s">)</span> <span class="s">{</span>
     <a class="l_k" href="functions/my.html">my</a> <span class="i">$candidate</span> = <span class="w">IO::Socket</span><span class="w">-&gt;new</span><span class="s">(</span><span class="s">)</span><span class="sc">;</span>

     <span class="i">$candidate</span><span class="i">-&gt;socket</span><span class="s">(</span><span class="i">$ai</span>-&gt;{<span class="w">family</span>}<span class="cm">,</span> <span class="i">$ai</span>-&gt;{<span class="w">socktype</span>}<span class="cm">,</span> <span class="i">$ai</span>-&gt;{<span class="w">protocol</span>}<span class="s">)</span>
         <a class="l_k" href="functions/or.html">or</a> <a class="l_k" href="functions/next.html">next</a><span class="sc">;</span>

     <span class="i">$candidate</span><span class="i">-&gt;connect</span><span class="s">(</span><span class="i">$ai</span>-&gt;{<span class="w">addr</span>}<span class="s">)</span>
         <a class="l_k" href="functions/or.html">or</a> <a class="l_k" href="functions/next.html">next</a><span class="sc">;</span>

     <span class="i">$sock</span> = <span class="i">$candidate</span><span class="sc">;</span>
     <a class="l_k" href="functions/last.html">last</a><span class="sc">;</span>
 <span class="s">}</span>

 <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;Cannot connect to localhost:echo&quot;</span> <a class="l_k" href="functions/unless.html">unless</a> <span class="i">$sock</span><span class="sc">;</span>

 <span class="i">$sock</span><span class="i">-&gt;print</span><span class="s">(</span><span class="q">&quot;Hello, world!\n&quot;</span><span class="s">)</span><span class="sc">;</span>
 <a class="l_k" href="functions/print.html">print</a> <span class="q">&lt;$sock&gt;</span><span class="sc">;</span></pre>
<p>Because a list of potential candidates is returned, the <code class="inline"><a class="l_k" href="functions/while.html">while</a></code> loop tries
each in turn until it it finds one that succeeds both the socket() and
connect() calls.</p>
<p>This function performs the work of the legacy functions gethostbyname(),
getservbyname(), inet_aton() and pack_sockaddr_in().</p>
<p>In practice this logic is better performed by <a href="https://search.cpan.org/perldoc/IO::Socket::IP">IO::Socket::IP</a>.</p>
<a id="Making-a-human-readable-string-out-of-an-address"></a><h3 class='h3' >Making a human-readable string out of an address</h3>
<p>The getnameinfo() function converts a socket address, such as returned by
getsockname() or getpeername(), into a pair of human-readable strings
representing the address and service name.</p>
<pre>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">IO::Socket::IP</span><span class="sc">;</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">Socket</span> <span class="q">qw(getnameinfo)</span><span class="sc">;</span>

 <a class="l_k" href="functions/my.html">my</a> <span class="i">$server</span> = <span class="w">IO::Socket::IP</span><span class="w">-&gt;new</span><span class="s">(</span><span class="w">LocalPort</span> <span class="cm">=&gt;</span> <span class="n">12345</span><span class="cm">,</span> <span class="w">Listen</span> <span class="cm">=&gt;</span> <span class="n">1</span><span class="s">)</span> <a class="l_k" href="functions/or.html">or</a>
     <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;Cannot listen - $@&quot;</span><span class="sc">;</span>

 <a class="l_k" href="functions/my.html">my</a> <span class="i">$socket</span> = <span class="i">$server</span><span class="i">-&gt;accept</span> <a class="l_k" href="functions/or.html">or</a> <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;accept: $!&quot;</span><span class="sc">;</span>

 <a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$err</span><span class="cm">,</span> <span class="i">$hostname</span><span class="cm">,</span> <span class="i">$servicename</span><span class="s">)</span> = <span class="i">getnameinfo</span><span class="s">(</span><span class="i">$socket</span><span class="i">-&gt;peername</span><span class="s">)</span><span class="sc">;</span>
 <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;Cannot getnameinfo - $err&quot;</span> <a class="l_k" href="functions/if.html">if</a> <span class="i">$err</span><span class="sc">;</span>

 <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;The peer is connected from $hostname\n&quot;</span><span class="sc">;</span></pre>
<p>Since in this example only the hostname was used, the redundant conversion of
the port number into a service name may be omitted by passing the
<pre>
<span class="w">NIx_NOSERV</span></code>
 flag.</p>
<pre>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">Socket</span> <span class="q">qw(getnameinfo NIx_NOSERV)</span><span class="sc">;</span>

 <a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$err</span><span class="cm">,</span> <span class="i">$hostname</span><span class="s">)</span> = <span class="i">getnameinfo</span><span class="s">(</span><span class="i">$socket</span><span class="i">-&gt;peername</span><span class="cm">,</span> <span class="n">0</span><span class="cm">,</span> <span class="w">NIx_NOSERV</span><span class="s">)</span><span class="sc">;</span></pre>
<p>This function performs the work of the legacy functions unpack_sockaddr_in(),
inet_ntoa(), gethostbyaddr() and getservbyport().</p>
<p>In practice this logic is better performed by <a href="https://search.cpan.org/perldoc/IO::Socket::IP">IO::Socket::IP</a>.</p>
<a id="Resolving-hostnames-into-IP-addresses"></a><h3 class='h3' >Resolving hostnames into IP addresses</h3>
<p>To turn a hostname into a human-readable plain IP address use getaddrinfo()
to turn the hostname into a list of socket structures, then getnameinfo() on
each one to make it a readable IP address again.</p>
<pre>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">Socket</span> <span class="q">qw(:addrinfo SOCK_RAW)</span><span class="sc">;</span>

 <a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$err</span><span class="cm">,</span> <span class="i">@res</span><span class="s">)</span> = <span class="i">getaddrinfo</span><span class="s">(</span><span class="i">$hostname</span><span class="cm">,</span> <span class="q">&quot;&quot;</span><span class="cm">,</span> <span class="s">{</span><span class="w">socktype</span> <span class="cm">=&gt;</span> <span class="w">SOCK_RAW</span><span class="s">}</span><span class="s">)</span><span class="sc">;</span>
 <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;Cannot getaddrinfo - $err&quot;</span> <a class="l_k" href="functions/if.html">if</a> <span class="i">$err</span><span class="sc">;</span>

 <a class="l_k" href="functions/while.html">while</a><span class="s">(</span> <a class="l_k" href="functions/my.html">my</a> <span class="i">$ai</span> = <a class="l_k" href="functions/shift.html">shift</a> <span class="i">@res</span> <span class="s">)</span> <span class="s">{</span>
     <a class="l_k" href="functions/my.html">my</a> <span class="s">(</span><span class="i">$err</span><span class="cm">,</span> <span class="i">$ipaddr</span><span class="s">)</span> = <span class="i">getnameinfo</span><span class="s">(</span><span class="i">$ai</span>-&gt;{<span class="w">addr</span>}<span class="cm">,</span> <span class="w">NI_NUMERICHOST</span><span class="cm">,</span> <span class="w">NIx_NOSERV</span><span class="s">)</span><span class="sc">;</span>
     <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;Cannot getnameinfo - $err&quot;</span> <a class="l_k" href="functions/if.html">if</a> <span class="i">$err</span><span class="sc">;</span>

     <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;$ipaddr\n&quot;</span><span class="sc">;</span>
 <span class="s">}</span></pre>
<p>The <pre>
<span class="w">socktype</span></code>
 hint to getaddrinfo() filters the results to only include one
socket type and protocol. Without this most OSes return three combinations,
for <pre>
<span class="w">SOCK_STREAM</span></code>
, <pre>
<span class="w">SOCK_DGRAM</span></code>
 and <pre>
<span class="w">SOCK_RAW</span></code>
, resulting in triplicate
output of addresses. The <pre>
<span class="w">NI_NUMERICHOST</span></code>
 flag to getnameinfo() causes it to
return a string-formatted plain IP address, rather than reverse resolving it
back into a hostname.</p>
<p>This combination performs the work of the legacy functions gethostbyname()
and inet_ntoa().</p>
<a id="Accessing-socket-options"></a><h3 class='h3' >Accessing socket options</h3>
<p>The many <pre>
<span class="w">SO_</span>*</code>
 and other constants provide the socket option names for
getsockopt() and setsockopt().</p>
<pre>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">IO::Socket::INET</span><span class="sc">;</span>
 <a class="l_k" href="functions/use.html">use</a> <span class="w">Socket</span> <span class="q">qw(SOL_SOCKET SO_RCVBUF IPPROTO_IP IP_TTL)</span><span class="sc">;</span>

 <a class="l_k" href="functions/my.html">my</a> <span class="i">$socket</span> = <span class="w">IO::Socket::INET</span><span class="w">-&gt;new</span><span class="s">(</span><span class="w">LocalPort</span> <span class="cm">=&gt;</span> <span class="n">0</span><span class="cm">,</span> <span class="w">Proto</span> <span class="cm">=&gt;</span> <span class="q">&#39;udp&#39;</span><span class="s">)</span>
     <a class="l_k" href="functions/or.html">or</a> <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;Cannot create socket: $@&quot;</span><span class="sc">;</span>

 <span class="i">$socket</span><span class="i">-&gt;setsockopt</span><span class="s">(</span><span class="w">SOL_SOCKET</span><span class="cm">,</span> <span class="w">SO_RCVBUF</span><span class="cm">,</span> <span class="n">64</span>*<span class="n">1024</span><span class="s">)</span> <a class="l_k" href="functions/or.html">or</a>
     <a class="l_k" href="functions/die.html">die</a> <span class="q">&quot;setsockopt: $!&quot;</span><span class="sc">;</span>

 <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;Receive buffer is &quot;</span><span class="cm">,</span> <span class="i">$socket</span><span class="i">-&gt;getsockopt</span><span class="s">(</span><span class="w">SOL_SOCKET</span><span class="cm">,</span> <span class="w">SO_RCVBUF</span><span class="s">)</span><span class="cm">,</span>
     <span class="q">&quot; bytes\n&quot;</span><span class="sc">;</span>

 <a class="l_k" href="functions/print.html">print</a> <span class="q">&quot;IP TTL is &quot;</span><span class="cm">,</span> <span class="i">$socket</span><span class="i">-&gt;getsockopt</span><span class="s">(</span><span class="w">IPPROTO_IP</span><span class="cm">,</span> <span class="w">IP_TTL</span><span class="s">)</span><span class="cm">,</span> <span class="q">&quot;\n&quot;</span><span class="sc">;</span></pre>
<p>As a convenience, <a href="IO/Socket.html">IO::Socket</a>'s setsockopt() method will convert a number
into a packed byte buffer, and getsockopt() will unpack a byte buffer of the
correct size back into a number.</p>
<a id="AUTHOR"></a><h2 class='h2' >AUTHOR</h2>
<p>This module was originally maintained in Perl core by the Perl 5 Porters.</p>
<p>It was extracted to dual-life on CPAN at version 1.95 by
Paul Evans &lt;leonerd@leonerd.org.uk&gt;</p>




      <ul><li><a href="#NAME">NAME</a></li><li><a href="#SYNOPSIS">SYNOPSIS</a></li><li><a href="#DESCRIPTION">DESCRIPTION</a></li><li><a href="#CONSTANTS">CONSTANTS</a></li><ul><li><a href="#PF_INET%2c-PF_INET6%2c-PF_UNIX%2c-...">PF_INET, PF_INET6, PF_UNIX, ...</a></li><li><a href="#AF_INET%2c-AF_INET6%2c-AF_UNIX%2c-...">AF_INET, AF_INET6, AF_UNIX, ...</a></li><li><a href="#SOCK_STREAM%2c-SOCK_DGRAM%2c-SOCK_RAW%2c-...">SOCK_STREAM, SOCK_DGRAM, SOCK_RAW, ...</a></li><li><a href="#SOCK_NONBLOCK.-SOCK_CLOEXEC">SOCK_NONBLOCK. SOCK_CLOEXEC</a></li><li><a href="#SOL_SOCKET">SOL_SOCKET</a></li><li><a href="#SO_ACCEPTCONN%2c-SO_BROADCAST%2c-SO_ERROR%2c-...">SO_ACCEPTCONN, SO_BROADCAST, SO_ERROR, ...</a></li><li><a href="#IP_OPTIONS%2c-IP_TOS%2c-IP_TTL%2c-...">IP_OPTIONS, IP_TOS, IP_TTL, ...</a></li><li><a href="#MSG_BCAST%2c-MSG_OOB%2c-MSG_TRUNC%2c-...">MSG_BCAST, MSG_OOB, MSG_TRUNC, ...</a></li><li><a href="#SHUT_RD%2c-SHUT_RDWR%2c-SHUT_WR">SHUT_RD, SHUT_RDWR, SHUT_WR</a></li><li><a href="#INADDR_ANY%2c-INADDR_BROADCAST%2c-INADDR_LOOPBACK%2c-INADDR_NONE">INADDR_ANY, INADDR_BROADCAST, INADDR_LOOPBACK, INADDR_NONE</a></li><li><a href="#IPPROTO_IP%2c-IPPROTO_IPV6%2c-IPPROTO_TCP%2c-...">IPPROTO_IP, IPPROTO_IPV6, IPPROTO_TCP, ...</a></li><li><a href="#TCP_CORK%2c-TCP_KEEPALIVE%2c-TCP_NODELAY%2c-...">TCP_CORK, TCP_KEEPALIVE, TCP_NODELAY, ...</a></li><li><a href="#IN6ADDR_ANY%2c-IN6ADDR_LOOPBACK">IN6ADDR_ANY, IN6ADDR_LOOPBACK</a></li><li><a href="#IPV6_ADD_MEMBERSHIP%2c-IPV6_MTU%2c-IPV6_V6ONLY%2c-...">IPV6_ADD_MEMBERSHIP, IPV6_MTU, IPV6_V6ONLY, ...</a></li></ul><li><a href="#STRUCTURE-MANIPULATORS">STRUCTURE MANIPULATORS</a></li><ul><li><a href="#%24family-%3d-sockaddr_family-%24sockaddr">$family = sockaddr_family $sockaddr</a></li><li><a href="#%24sockaddr-%3d-pack_sockaddr_in-%24port%2c-%24ip_address">$sockaddr = pack_sockaddr_in $port, $ip_address</a></li><li><a href="#(%24port%2c-%24ip_address)-%3d-unpack_sockaddr_in-%24sockaddr">($port, $ip_address) = unpack_sockaddr_in $sockaddr</a></li><li><a href="#%24sockaddr-%3d-sockaddr_in-%24port%2c-%24ip_address">$sockaddr = sockaddr_in $port, $ip_address</a></li><li><a href="#(%24port%2c-%24ip_address)-%3d-sockaddr_in-%24sockaddr">($port, $ip_address) = sockaddr_in $sockaddr</a></li><li><a href="#%24sockaddr-%3d-pack_sockaddr_in6-%24port%2c-%24ip6_address%2c-%5b%24scope_id%2c-%5b%24flowinfo%5d%5d">$sockaddr = pack_sockaddr_in6 $port, $ip6_address, [$scope_id, [$flowinfo]]</a></li><li><a href="#(%24port%2c-%24ip6_address%2c-%24scope_id%2c-%24flowinfo)-%3d-unpack_sockaddr_in6-%24sockaddr">($port, $ip6_address, $scope_id, $flowinfo) = unpack_sockaddr_in6 $sockaddr</a></li><li><a href="#%24sockaddr-%3d-sockaddr_in6-%24port%2c-%24ip6_address%2c-%5b%24scope_id%2c-%5b%24flowinfo%5d%5d">$sockaddr = sockaddr_in6 $port, $ip6_address, [$scope_id, [$flowinfo]]</a></li><li><a href="#(%24port%2c-%24ip6_address%2c-%24scope_id%2c-%24flowinfo)-%3d-sockaddr_in6-%24sockaddr">($port, $ip6_address, $scope_id, $flowinfo) = sockaddr_in6 $sockaddr</a></li><li><a href="#%24sockaddr-%3d-pack_sockaddr_un-%24path">$sockaddr = pack_sockaddr_un $path</a></li><li><a href="#(%24path)-%3d-unpack_sockaddr_un-%24sockaddr">($path) = unpack_sockaddr_un $sockaddr</a></li><li><a href="#%24sockaddr-%3d-sockaddr_un-%24path">$sockaddr = sockaddr_un $path</a></li><li><a href="#(%24path)-%3d-sockaddr_un-%24sockaddr">($path) = sockaddr_un $sockaddr</a></li><li><a href="#%24ip_mreq-%3d-pack_ip_mreq-%24multiaddr%2c-%24interface">$ip_mreq = pack_ip_mreq $multiaddr, $interface</a></li><li><a href="#(%24multiaddr%2c-%24interface)-%3d-unpack_ip_mreq-%24ip_mreq">($multiaddr, $interface) = unpack_ip_mreq $ip_mreq</a></li><li><a href="#%24ip_mreq_source-%3d-pack_ip_mreq_source-%24multiaddr%2c-%24source%2c-%24interface">$ip_mreq_source = pack_ip_mreq_source $multiaddr, $source, $interface</a></li><li><a href="#(%24multiaddr%2c-%24source%2c-%24interface)-%3d-unpack_ip_mreq_source-%24ip_mreq">($multiaddr, $source, $interface) = unpack_ip_mreq_source $ip_mreq</a></li><li><a href="#%24ipv6_mreq-%3d-pack_ipv6_mreq-%24multiaddr6%2c-%24ifindex">$ipv6_mreq = pack_ipv6_mreq $multiaddr6, $ifindex</a></li><li><a href="#(%24multiaddr6%2c-%24ifindex)-%3d-unpack_ipv6_mreq-%24ipv6_mreq">($multiaddr6, $ifindex) = unpack_ipv6_mreq $ipv6_mreq</a></li></ul><li><a href="#FUNCTIONS">FUNCTIONS</a></li><ul><li><a href="#%24ip_address-%3d-inet_aton-%24string">$ip_address = inet_aton $string</a></li><li><a href="#%24string-%3d-inet_ntoa-%24ip_address">$string = inet_ntoa $ip_address</a></li><li><a href="#%24address-%3d-inet_pton-%24family%2c-%24string">$address = inet_pton $family, $string</a></li><li><a href="#%24string-%3d-inet_ntop-%24family%2c-%24address">$string = inet_ntop $family, $address</a></li><li><a href="#(%24err%2c-%40result)-%3d-getaddrinfo-%24host%2c-%24service%2c-%5b%24hints%5d">($err, @result) = getaddrinfo $host, $service, [$hints]</a></li><li><a href="#(%24err%2c-%24hostname%2c-%24servicename)-%3d-getnameinfo-%24sockaddr%2c-%5b%24flags%2c-%5b%24xflags%5d%5d">($err, $hostname, $servicename) = getnameinfo $sockaddr, [$flags, [$xflags]]</a></li></ul><li><a href="#getaddrinfo()-%2f-getnameinfo()-ERROR-CONSTANTS">getaddrinfo() / getnameinfo() ERROR CONSTANTS</a></li><li><a href="#EXAMPLES">EXAMPLES</a></li><ul><li><a href="#Lookup-for-connect()">Lookup for connect()</a></li><li><a href="#Making-a-human-readable-string-out-of-an-address">Making a human-readable string out of an address</a></li><li><a href="#Resolving-hostnames-into-IP-addresses">Resolving hostnames into IP addresses</a></li><li><a href="#Accessing-socket-options">Accessing socket options</a></li></ul><li><a href="#AUTHOR">AUTHOR</a></li></ul>


                </div>
              </article>
          </div>
        </div>
      </main>
    </div>
    <footer class="footer row bg-light pt-5 pb-5">
      <div class="col-sm-8 offset-sm-2">
        <div class="row">
          <div class="col-md-4">
            <ul class="list-unstyled">
              <li>
                <h4>Site info</h4>
              </li>
              <li>Docs mantained by
                <a href="//lists.cpan.org/showlist.cgi?name=perl5-porters" rel="noopener">Perl 5 Porters</a>
              </li>
              <li>Site development sponsored by
                <a href="//opusvl.com" rel="noopener"><img class="opus-logo" src="/public/img/opusvl_logo.svg" alt="OpusVL Logo"></a>
              </li>
            </ul>
          </div>
          <div class="col-md-8">
            <div class="row">
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Manual</h4>
                  </li>
                  <li>
                    <a href="/5/18/4/index-overview.html">Overview</a>
                  </li>
                  <li>
                    <a href="/5/18/4/index-tutorials.html">Tutorials</a>
                  </li>
                  <li>
                    <a href="/5/18/4/index-faq.html">FAQs</a>
                  </li>
                  <li>
                    <a href="/5/18/4/index-history.html">Changes</a>
                  </li>
                </ul>
              </div>
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Reference</h4>
                  </li>
                  <li>
                    <a href="/5/18/4/index-language.html">Language</a>
                  </li>
                  <li>
                    <a href="/5/18/4/index-functions.html">Functions</a>
                  </li>
                  <li>
                    <a href="/5/18/4/perlop.html">Operators</a>
                  </li>
                  <li>
                    <a href="/5/18/4/perlvar.html">Variables</a>
                  </li>
                </ul>
              </div>
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Modules</h4>
                  </li>
                  <li>
                    <a href="/5/18/4/index-modules-A.html">Modules</a>
                  </li>
                  <li>
                    <a href="/5/18/4/index-pragmas.html">Pragmas</a>
                  </li>
                  <li>
                    <a href="/5/18/4/index-utilities.html">Utilities</a>
                  </li>
                </ul>
              </div>
              <div class="col-md-6 col-lg-3">
                <ul class=" list-unstyled">
                  <li>
                    <h4>Misc</h4>
                  </li>
                  <li>
                    <a href="/5/18/4/index-licence.html">License</a>
                  </li>
                  <li>
                    <a href="/5/18/4/index-internals.html">Internals</a>
                  </li>
                  <li>
                    <a href="/5/18/4/index-platforms.html">Platforms</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
          <div class=" col-12 footer-inf text-center">
            <small>perldoc.perl.org - Official documentation for the Perl programming language</small>
          </div>
        </div>
      </div>
    </footer>
    <div class="beta-wrapper beta-bottom-right ">
      <div class="beta beta-blue  ">
        <a class="beta-link " href="https://github.com/OpusVL/perldoc.perl.org/issues/new" rel="noopener">
          <span class="beta-text">
            This is a Beta release.
          </span>
          <span class="beta-text">
            For any issues please raise a ticket on GitHub
          </span>
        </a>
      </div>
    </div>
    <script src="/public/js/main.min.js"></script>
  </body>
</html>
